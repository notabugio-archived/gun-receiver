!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("ramda"),require("uuid"),require("ws")):"function"==typeof define&&define.amd?define("gun-receiver",["ramda","uuid","ws"],t):"object"==typeof exports?exports["gun-receiver"]=t(require("ramda"),require("uuid"),require("ws")):e["gun-receiver"]=t(e.ramda,e.uuid,e.ws)}("undefined"!=typeof self?self:this,function(e,t,n){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(t,n){t.exports=e},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"chainInterface",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(t,"preventConflicts",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"Receiver",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"deduplicateMessages",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(t,"allowLeech",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"relayMessages",{enumerable:!0,get:function(){return c.default}}),t.websocketTransport=void 0;var r=a(n(2)),o=a(n(3)),i=a(n(4)),u=a(n(6)),s=a(n(7)),c=a(n(8));function a(e){return e&&e.__esModule?e:{default:e}}var f=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(9));t.websocketTransport=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(0);function o(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}t.default=function(e){return e.get=function(t){return function t(n){var i,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=function(t){var o,s,c=!1,a=t.bind(i),f=function(e){return(c=!0)&&a(o=e)},l={},d={},p=e.connected(function(e){var t=e.json;(0,r.keys)((0,r.prop)("put",t)).forEach(function(e){if(l[e]){var n=(0,r.path)(["put",e],t);n||c||f(),n&&(d[e]=n)}});var i=s(n);i!==o&&f(i)}),h=function(e){return l[e]?d[e]:(l[e]=!0,p.receive({...u,json:{get:{"#":e}},skipValidation:!0}),d[e])};return s=function(e){var t=e[e.length-1];if(1===e.length)return h(t);var o=s(e.slice(0,e.length-1));if(o){var i=(0,r.prop)(t,o);return i&&i["#"]?h(i["#"]):(e===n&&f(i),i)}},p.receive({json:{leech:!0}}),s(n),function(){return e.disconnected(p)}},c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r.identity;return new Promise(function(e){var t=s(function(n){e(n),t()})}).then(e)};return i={get:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t([].concat(o(n),[e]),r)},on:s,then:c,once:function(e){return c(e.bind(i))&&i}}}([t],arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})},e},e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(0);t.default=function(e){return e.onIn(function(t){var n=t.json,o=[],i=(0,r.keys)((0,r.prop)("put",n));return i.length?Promise.all(i.map(function(t){var i=(0,r.path)(["put",t,"_",">"],n)||{};return e.get(t,{noRelay:!0}).then(function(e){var t=(0,r.path)(["_",">"],e)||{};(0,r.keys)(i).forEach(function(e){t[e]&&t[e]>i[e]||o.push(i[e])})})})).then(function(){return o.length||n.get?t:null}):Promise.resolve(t)}),e},e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e,t=[],n=u(s(),2),r=n[0],c=n[1],a=u(s(),2),f=a[0],l=a[1];return e={connections:t,connected:function(n){var r=function(e){var t,n=e.db,r=e.send,u={},s=!1;return t={send:function(e){return n.processOut({...e,to:t}).then(function(e){return e&&r(e)}).catch(function(t){s||console.error("PISTOL send err",JSON.stringify(e,null,2),e.json.put,t),s=!0})},receive:function(e){var r=e.json,o=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,["json"]),u=JSON.stringify(r,null,2);return n.processIn({...o,db:n,json:{...r,"#":r["#"]||i.default.v4()},from:t}).catch(function(e){return console.error("PISTOL receive err",e,u)})},get:function(e){return(0,o.path)(e,u)},set:function(e,t){return u=(0,o.assocPath)(e,t,u)},msgId:function(){return i.default.v4()}}}({db:e,send:n});return t.push(r),r},disconnected:function(e){var n=t.indexOf(e);-1!==n&&t.splice(n,1)},onIn:r,onOut:f,processIn:c,processOut:l}};var r,o=n(0),i=(r=n(5))&&r.__esModule?r:{default:r};function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var u,s=e[Symbol.iterator]();!(r=(u=s.next()).done)&&(n.push(u.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function s(){var e=[];return[function(t){return e.push(t)},function(t){var n=e.slice().reverse();return function e(t){try{var r=n.pop();return t&&r?Promise.resolve(r(t)).then(e):Promise.resolve(t)}catch(e){return Promise.reject(e)}}(t)},function(t){return e=(0,o.without)([t],e)}]}e.exports=t.default},function(e,n){e.exports=t},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(0),o=5e4;t.default=function(e){var t={};return e.onIn(function(e){var n=(0,r.path)(["json","#"],e);return!n||n in t?null:(t[n]=!0,e)}),setInterval(function(){for(var e=(0,r.keys)(t).reverse();e.length>o;)delete t[e.pop()]},6e4),e},e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(0);function o(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}t.default=function(e){return e.onIn(function(e){if(!(0,r.path)(["json","leech"],e))return[(0,r.path)(["json","get","#"],e)].concat(o((0,r.keys)((0,r.path)(["json","put"],e)))).forEach(function(t){return t&&e.from.set(["hasAskedFor",t],!0)}),e;e.from.set(["isLeeching"],!0)}),e.onOut(function(e){var t=e.to,n=e.json,o=e.ignoreLeeching;return!t.get(["isLeeching"])||o?e:(0,r.keys)(n.put).filter(function(e){if(!t.get(["hasAskedFor",e]))return!1;var o=(0,r.path)([e,"_",">"],n.put),i=!1;return!(0,r.keys)(o).length||((0,r.keys)(o).forEach(function(n){var r=t.get(["knownDeltas",e,n])||0,u=parseFloat(o[n])||0;r&&u<=r||(t.set(["knownDeltas",e,n],u),i=!0)}),i)}).length?e:void 0}),e},e.exports=t.default},function(e,t,n){"use strict";var r=n(0);e.exports=function(e){return e.onIn(function(t){var n=t.from,o=t.json;return t.noRelay?t:((0,r.without)([n],e.connections).forEach(function(e){return e.send({from:n,json:o,skipValidation:!0})}),t)}),e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.client=t.server=void 0;var r=n(0),o=u(n(10)),i=u(n(11));function u(e){return e&&e.__esModule?e:{default:e}}var s=(0,r.curry)(function(e,t){var n=!1,r=!0,o=e.connected(function(e){e&&e.json&&r&&t.send(JSON.stringify(e.json),function(e){e&&!n&&(console.warn("ws send err",e),n=!0)})}),i=setInterval(function(){return o.send({json:{ping:!0},skipValidation:!0})},6e4);return t.addEventListener("close",function(){t.reconnect||(r=!1,clearInterval(i),e.disconnected(o))}),t.addEventListener("message",function e(t){try{var n=JSON.parse(t.data||t);Array.isArray(n)?n.forEach(e):o.receive({json:n})}catch(e){console.error("RECEIVER invalid ws msg",e,t.data)}}),o}),c=(0,r.curry)(function(e,t){var n=e.web,r=e.port;return new o.default.Server({port:n?void 0:r,server:n}).on("connection",s(t)),t});t.server=c;var a=(0,r.curry)(function(e,t){var n=new i.default(e,[],{WebSocket:o.default});return n.addEventListener("open",function(){return s(t,n)}),t});t.client=a},function(e,t){e.exports=n},function(e,t,n){"use strict";n.r(t);
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function o(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var i=function(){return function(e,t){this.target=t,this.type=e}}(),u=function(e){function t(t,n){var r=e.call(this,"error",n)||this;return r.message=t.message,r.error=t,r}return o(t,e),t}(i),s=function(e){function t(t,n,r){void 0===t&&(t=1e3),void 0===n&&(n="");var o=e.call(this,"close",r)||this;return o.wasClean=!0,o.code=t,o.reason=n,o}return o(t,e),t}(i),c=function(){if("undefined"!=typeof WebSocket)return WebSocket},a={maxReconnectionDelay:1e4,minReconnectionDelay:1e3+4e3*Math.random(),minUptime:5e3,reconnectionDelayGrowFactor:1.3,connectionTimeout:4e3,maxRetries:1/0,debug:!1},f=function(){function e(e,t,n){void 0===n&&(n={});var r=this;this._listeners={error:[],message:[],open:[],close:[]},this._retryCount=-1,this._shouldReconnect=!0,this._connectLock=!1,this._binaryType="blob",this._closeCalled=!1,this._messageQueue=[],this.onclose=void 0,this.onerror=void 0,this.onmessage=void 0,this.onopen=void 0,this._handleOpen=function(e){r._debug("open event");var t=r._options.minUptime,n=void 0===t?a.minUptime:t;clearTimeout(r._connectTimeout),r._uptimeTimeout=setTimeout(function(){return r._acceptOpen()},n),r._ws.binaryType=r._binaryType,r._messageQueue.forEach(function(e){return r._ws.send(e)}),r._messageQueue=[],r.onopen&&r.onopen(e),r._listeners.open.forEach(function(t){return r._callEventListener(e,t)})},this._handleMessage=function(e){r._debug("message event"),r.onmessage&&r.onmessage(e),r._listeners.message.forEach(function(t){return r._callEventListener(e,t)})},this._handleError=function(e){r._debug("error event",e.message),r._disconnect(void 0,"TIMEOUT"===e.message?"timeout":void 0),r.onerror&&r.onerror(e),r._debug("exec error listeners"),r._listeners.error.forEach(function(t){return r._callEventListener(e,t)}),r._connect()},this._handleClose=function(e){r._debug("close event"),r._clearTimeouts(),r._shouldReconnect&&r._connect(),r.onclose&&r.onclose(e),r._listeners.close.forEach(function(t){return r._callEventListener(e,t)})},this._url=e,this._protocols=t,this._options=n,this._connect()}return Object.defineProperty(e,"CONNECTING",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(e,"OPEN",{get:function(){return 1},enumerable:!0,configurable:!0}),Object.defineProperty(e,"CLOSING",{get:function(){return 2},enumerable:!0,configurable:!0}),Object.defineProperty(e,"CLOSED",{get:function(){return 3},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"CONNECTING",{get:function(){return e.CONNECTING},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"OPEN",{get:function(){return e.OPEN},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"CLOSING",{get:function(){return e.CLOSING},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"CLOSED",{get:function(){return e.CLOSED},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"binaryType",{get:function(){return this._ws?this._ws.binaryType:this._binaryType},set:function(e){this._binaryType=e,this._ws&&(this._ws.binaryType=e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"retryCount",{get:function(){return Math.max(this._retryCount,0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bufferedAmount",{get:function(){return this._messageQueue.reduce(function(e,t){return"string"==typeof t?e+=t.length:t instanceof Blob?e+=t.size:e+=t.byteLength,e},0)+(this._ws?this._ws.bufferedAmount:0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"extensions",{get:function(){return this._ws?this._ws.extensions:""},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"protocol",{get:function(){return this._ws?this._ws.protocol:""},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"readyState",{get:function(){return this._ws?this._ws.readyState:e.CONNECTING},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"url",{get:function(){return this._ws?this._ws.url:""},enumerable:!0,configurable:!0}),e.prototype.close=function(e,t){void 0===e&&(e=1e3),this._closeCalled=!0,this._shouldReconnect=!1,this._clearTimeouts(),this._ws?this._ws.readyState!==this.CLOSED?this._ws.close(e,t):this._debug("close: already closed"):this._debug("close enqueued: no ws instance")},e.prototype.reconnect=function(e,t){this._shouldReconnect=!0,this._closeCalled=!1,this._retryCount=-1,this._ws&&this._ws.readyState!==this.CLOSED?(this._disconnect(e,t),this._connect()):this._connect()},e.prototype.send=function(e){this._ws&&this._ws.readyState===this.OPEN?(this._debug("send",e),this._ws.send(e)):(this._debug("enqueue",e),this._messageQueue.push(e))},e.prototype.addEventListener=function(e,t){this._listeners[e]&&this._listeners[e].push(t)},e.prototype.removeEventListener=function(e,t){this._listeners[e]&&(this._listeners[e]=this._listeners[e].filter(function(e){return e!==t}))},e.prototype._debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._options.debug&&console.log.apply(console,["RWS>"].concat(e))},e.prototype._getNextDelay=function(){var e=this._options,t=e.reconnectionDelayGrowFactor,n=void 0===t?a.reconnectionDelayGrowFactor:t,r=e.minReconnectionDelay,o=void 0===r?a.minReconnectionDelay:r,i=e.maxReconnectionDelay,u=void 0===i?a.maxReconnectionDelay:i,s=o;return this._retryCount>0&&(s=o*Math.pow(n,this._retryCount-1))>u&&(s=u),this._debug("next delay",s),s},e.prototype._wait=function(){var e=this;return new Promise(function(t){setTimeout(t,e._getNextDelay())})},e.prototype._getNextUrl=function(e){if("string"==typeof e)return Promise.resolve(e);if("function"==typeof e){var t=e();if("string"==typeof t)return Promise.resolve(t);if(t.then)return t}throw Error("Invalid URL")},e.prototype._connect=function(){var e=this;if(!this._connectLock&&this._shouldReconnect){this._connectLock=!0;var t=this._options,n=t.maxRetries,r=void 0===n?a.maxRetries:n,o=t.connectionTimeout,i=void 0===o?a.connectionTimeout:o,u=t.WebSocket,s=void 0===u?c():u;if(this._retryCount>=r)this._debug("max retries reached",this._retryCount,">=",r);else{if(this._retryCount++,this._debug("connect",this._retryCount),this._removeListeners(),"function"!=typeof(f=s)||2!==f.CLOSING)throw Error("No valid WebSocket class provided");var f;this._wait().then(function(){return e._getNextUrl(e._url)}).then(function(t){e._closeCalled?e._connectLock=!1:(e._debug("connect",{url:t,protocols:e._protocols}),e._ws=e._protocols?new s(t,e._protocols):new s(t),e._ws.binaryType=e._binaryType,e._connectLock=!1,e._addListeners(),e._connectTimeout=setTimeout(function(){return e._handleTimeout()},i))})}}},e.prototype._handleTimeout=function(){this._debug("timeout event"),this._handleError(new u(Error("TIMEOUT"),this))},e.prototype._disconnect=function(e,t){if(void 0===e&&(e=1e3),this._clearTimeouts(),this._ws){this._removeListeners();try{this._ws.close(e,t),this._handleClose(new s(e,t,this))}catch(e){}}},e.prototype._acceptOpen=function(){this._debug("accept open"),this._retryCount=0},e.prototype._callEventListener=function(e,t){"handleEvent"in t?t.handleEvent(e):t(e)},e.prototype._removeListeners=function(){this._ws&&(this._debug("removeListeners"),this._ws.removeEventListener("open",this._handleOpen),this._ws.removeEventListener("close",this._handleClose),this._ws.removeEventListener("message",this._handleMessage),this._ws.removeEventListener("error",this._handleError))},e.prototype._addListeners=function(){this._ws&&(this._debug("addListeners"),this._ws.addEventListener("open",this._handleOpen),this._ws.addEventListener("close",this._handleClose),this._ws.addEventListener("message",this._handleMessage),this._ws.addEventListener("error",this._handleError))},e.prototype._clearTimeouts=function(){clearTimeout(this._connectTimeout),clearTimeout(this._uptimeTimeout)},e}();t.default=f}])});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ndW4tcmVjZWl2ZXIvd2VicGFjay91bml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uIiwid2VicGFjazovL2d1bi1yZWNlaXZlci93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9ndW4tcmVjZWl2ZXIvZXh0ZXJuYWwgXCJyYW1kYVwiIiwid2VicGFjazovL2d1bi1yZWNlaXZlci8uL3NyYy9pbmRleC5qcyIsIndlYnBhY2s6Ly9ndW4tcmVjZWl2ZXIvLi9zcmMvY2hhaW4uanMiLCJ3ZWJwYWNrOi8vZ3VuLXJlY2VpdmVyLy4vc3JjL2NvbmZsaWN0cy5qcyIsIndlYnBhY2s6Ly9ndW4tcmVjZWl2ZXIvLi9zcmMvY29yZS5qcyIsIndlYnBhY2s6Ly9ndW4tcmVjZWl2ZXIvZXh0ZXJuYWwgXCJ1dWlkXCIiLCJ3ZWJwYWNrOi8vZ3VuLXJlY2VpdmVyLy4vc3JjL2RlZHVwLmpzIiwid2VicGFjazovL2d1bi1yZWNlaXZlci8uL3NyYy9sZWVjaC5qcyIsIndlYnBhY2s6Ly9ndW4tcmVjZWl2ZXIvLi9zcmMvcmVsYXkuanMiLCJ3ZWJwYWNrOi8vZ3VuLXJlY2VpdmVyLy4vc3JjL3dlYnNvY2tldC5qcyIsIndlYnBhY2s6Ly9ndW4tcmVjZWl2ZXIvZXh0ZXJuYWwgXCJ3c1wiIiwid2VicGFjazovL2d1bi1yZWNlaXZlci8uL25vZGVfbW9kdWxlcy9yZWNvbm5lY3Rpbmctd2Vic29ja2V0L2Rpc3QvcmVjb25uZWN0aW5nLXdlYnNvY2tldC5tanMiXSwibmFtZXMiOlsicm9vdCIsImZhY3RvcnkiLCJleHBvcnRzIiwibW9kdWxlIiwicmVxdWlyZSIsImRlZmluZSIsImFtZCIsInNlbGYiLCJ0aGlzIiwiX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV9fMF9fIiwiX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV9fNV9fIiwiX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV9fMTBfXyIsImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJfY2hhaW4iLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwiX2NvbmZsaWN0cyIsIl9jb3JlIiwiX2RlZHVwIiwiX2xlZWNoIiwiX3JlbGF5Iiwid2Vic29ja2V0VHJhbnNwb3J0IiwiX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQiLCJfcmFtZGEiLCJkYiIsImdldFBhdGgiLCJrZXlMaXN0IiwidGhpc0NoYWluIiwib3B0cyIsImFyZ3VtZW50cyIsImxlbmd0aCIsInVuZGVmaW5lZCIsIm9uIiwiZm4iLCJnZXRWYWx1ZSIsImhhc1Jlc3BvbnNlIiwiYm91bmQiLCJyZWNlaXZlZCIsInZhbCIsInJlcXVlc3RlZCIsImdyYXBoIiwiY29ubmVjdGlvbiIsImNvbm5lY3RlZCIsIm1zZyIsImpzb24iLCJrZXlzIiwicHJvcCIsImZvckVhY2giLCJzb3VsIiwibm9kZSIsInBhdGgiLCJuZXh0VmFsdWUiLCJnZXROb2RlIiwicmVjZWl2ZSIsIiMiLCJza2lwVmFsaWRhdGlvbiIsImtsIiwibGFzdEtleSIsInBhcmVudFZhbHVlIiwic2xpY2UiLCJsZWVjaCIsImRpc2Nvbm5lY3RlZCIsInRoZW4iLCJpZGVudGl0eSIsIlByb21pc2UiLCJyZXNvbHZlIiwidW5zdWJzY3JpYmUiLCJjb25jYXQiLCJfdG9Db25zdW1hYmxlQXJyYXkiLCJvbmNlIiwib25JbiIsInVwZGF0ZWRWZWN0b3JzIiwicHV0S2V5cyIsImFsbCIsIm1hcCIsInB1dFZlY3RvcnMiLCJub1JlbGF5Iiwia25vd25WZWN0b3JzIiwicHVzaCIsInBlZXIiLCJjb25uZWN0aW9ucyIsIl9wcm9jZXNzUXVldWUyIiwiX3NsaWNlZFRvQXJyYXkiLCJwcm9jZXNzUXVldWUiLCJwcm9jZXNzSW4iLCJfcHJvY2Vzc1F1ZXVlNCIsIm9uT3V0IiwicHJvY2Vzc091dCIsInNlbmQiLCJfcmVmIiwic2VuZEZuIiwic3RhdGUiLCJoYXNSZXBvcnRlZEVycm9yIiwidG8iLCJjYXRjaCIsImVyciIsImNvbnNvbGUiLCJlcnJvciIsIkpTT04iLCJzdHJpbmdpZnkiLCJwdXQiLCJfcmVmMiIsIl9vYmplY3RXaXRob3V0UHJvcGVydGllcyIsInByZXNlcnZlZCIsIl91dWlkIiwiZGVmYXVsdCIsInY0IiwiZnJvbSIsInNldCIsInYiLCJhc3NvY1BhdGgiLCJtc2dJZCIsInBpc3RvbENvbm5lY3Rpb24iLCJjb25uZWN0aW9uSWR4IiwiaW5kZXhPZiIsInNwbGljZSIsImZucyIsInJlbWFpbmluZ0ZucyIsInJldmVyc2UiLCJleGVjdXRlTmV4dCIsInBvcCIsImUiLCJyZWplY3QiLCJ3aXRob3V0IiwiTUFYX01TR19JRF9DQUNIRSIsInJlY2VpdmVkSWRzIiwiaWQiLCJzZXRJbnRlcnZhbCIsImlkcyIsImlnbm9yZUxlZWNoaW5nIiwiZmlsdGVyIiwic291bERlbHRhcyIsImhhc1VwZGF0ZXMiLCJrbm93biIsImRlbHRhIiwicGFyc2VGbG9hdCIsIl93cyIsIl9yZWNvbm5lY3RpbmdXZWJzb2NrZXQiLCJ3c0Nvbm5lY3Rpb24iLCJjdXJyeSIsIndzIiwiaGFzTG9nZ2VkRXJyIiwid2FybiIsInBpbmdJbnRlcnZhbCIsInBpbmciLCJhZGRFdmVudExpc3RlbmVyIiwicmVjb25uZWN0IiwiY2xlYXJJbnRlcnZhbCIsInBhcnNlIiwiZGF0YSIsIkFycmF5IiwiaXNBcnJheSIsInNlcnZlciIsIndlYiIsInBvcnQiLCJTZXJ2ZXIiLCJjbGllbnQiLCJ1cmwiLCJXZWJTb2NrZXQiLCJfX3dlYnBhY2tfZXhwb3J0c19fIiwiZXh0ZW5kU3RhdGljcyIsImIiLCJzZXRQcm90b3R5cGVPZiIsIl9fcHJvdG9fXyIsIl9fZXh0ZW5kcyIsIl9fIiwiY29uc3RydWN0b3IiLCJFdmVudCIsInR5cGUiLCJ0YXJnZXQiLCJFcnJvckV2ZW50IiwiX3N1cGVyIiwiX3RoaXMiLCJtZXNzYWdlIiwiQ2xvc2VFdmVudCIsImNvZGUiLCJyZWFzb24iLCJ3YXNDbGVhbiIsImdldEdsb2JhbFdlYlNvY2tldCIsIkRFRkFVTFQiLCJtYXhSZWNvbm5lY3Rpb25EZWxheSIsIm1pblJlY29ubmVjdGlvbkRlbGF5IiwiTWF0aCIsInJhbmRvbSIsIm1pblVwdGltZSIsInJlY29ubmVjdGlvbkRlbGF5R3Jvd0ZhY3RvciIsImNvbm5lY3Rpb25UaW1lb3V0IiwibWF4UmV0cmllcyIsIkluZmluaXR5IiwiZGVidWciLCJSZWNvbm5lY3RpbmdXZWJTb2NrZXQiLCJwcm90b2NvbHMiLCJvcHRpb25zIiwiX2xpc3RlbmVycyIsIm9wZW4iLCJjbG9zZSIsIl9yZXRyeUNvdW50IiwiX3Nob3VsZFJlY29ubmVjdCIsIl9jb25uZWN0TG9jayIsIl9iaW5hcnlUeXBlIiwiX2Nsb3NlQ2FsbGVkIiwiX21lc3NhZ2VRdWV1ZSIsIm9uY2xvc2UiLCJvbmVycm9yIiwib25tZXNzYWdlIiwib25vcGVuIiwiX2hhbmRsZU9wZW4iLCJldmVudCIsIl9kZWJ1ZyIsIl9hIiwiX29wdGlvbnMiLCJjbGVhclRpbWVvdXQiLCJfY29ubmVjdFRpbWVvdXQiLCJfdXB0aW1lVGltZW91dCIsInNldFRpbWVvdXQiLCJfYWNjZXB0T3BlbiIsImJpbmFyeVR5cGUiLCJsaXN0ZW5lciIsIl9jYWxsRXZlbnRMaXN0ZW5lciIsIl9oYW5kbGVNZXNzYWdlIiwiX2hhbmRsZUVycm9yIiwiX2Rpc2Nvbm5lY3QiLCJfY29ubmVjdCIsIl9oYW5kbGVDbG9zZSIsIl9jbGVhclRpbWVvdXRzIiwiX3VybCIsIl9wcm90b2NvbHMiLCJjb25maWd1cmFibGUiLCJDT05ORUNUSU5HIiwiT1BFTiIsIkNMT1NJTkciLCJDTE9TRUQiLCJtYXgiLCJyZWR1Y2UiLCJhY2MiLCJCbG9iIiwic2l6ZSIsImJ5dGVMZW5ndGgiLCJidWZmZXJlZEFtb3VudCIsImV4dGVuc2lvbnMiLCJwcm90b2NvbCIsInJlYWR5U3RhdGUiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiYXJncyIsIl9pIiwibG9nIiwiYXBwbHkiLCJfZ2V0TmV4dERlbGF5IiwiX2IiLCJfYyIsIl9kIiwiZGVsYXkiLCJwb3ciLCJfd2FpdCIsIl9nZXROZXh0VXJsIiwidXJsUHJvdmlkZXIiLCJFcnJvciIsIl9yZW1vdmVMaXN0ZW5lcnMiLCJ3IiwiX2FkZExpc3RlbmVycyIsIl9oYW5kbGVUaW1lb3V0IiwiaGFuZGxlRXZlbnQiXSwibWFwcGluZ3MiOiJDQUFBLFNBQUFBLEVBQUFDLEdBQ0EsaUJBQUFDLFNBQUEsaUJBQUFDLE9BQ0FBLE9BQUFELFFBQUFELEVBQUFHLFFBQUEsU0FBQUEsUUFBQSxRQUFBQSxRQUFBLE9BQ0EsbUJBQUFDLGVBQUFDLElBQ0FELE9BQUEscUNBQUFKLEdBQ0EsaUJBQUFDLFFBQ0FBLFFBQUEsZ0JBQUFELEVBQUFHLFFBQUEsU0FBQUEsUUFBQSxRQUFBQSxRQUFBLE9BRUFKLEVBQUEsZ0JBQUFDLEVBQUFELEVBQUEsTUFBQUEsRUFBQSxLQUFBQSxFQUFBLElBUkEsQ0FTQyxvQkFBQU8sVUFBQUMsS0FBQSxTQUFBQyxFQUFBQyxFQUFBQyxHQUNELG1CQ1RBLElBQUFDLEVBQUEsR0FHQSxTQUFBQyxFQUFBQyxHQUdBLEdBQUFGLEVBQUFFLEdBQ0EsT0FBQUYsRUFBQUUsR0FBQVosUUFHQSxJQUFBQyxFQUFBUyxFQUFBRSxHQUFBLENBQ0FDLEVBQUFELEVBQ0FFLEdBQUEsRUFDQWQsUUFBQSxJQVVBLE9BTkFlLEVBQUFILEdBQUFJLEtBQUFmLEVBQUFELFFBQUFDLElBQUFELFFBQUFXLEdBR0FWLEVBQUFhLEdBQUEsRUFHQWIsRUFBQUQsUUEwREEsT0FyREFXLEVBQUFNLEVBQUFGLEVBR0FKLEVBQUFPLEVBQUFSLEVBR0FDLEVBQUFR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UCxLQUFBaUssSUFBQSxDQUdBakssS0FBQTBSLG1CQUNBLElBQ0ExUixLQUFBaUssSUFBQTJELE1BQUFwQixFQUFBQyxHQUNBek0sS0FBQXdQLGFBQUEsSUFBQWpELEVBQUFDLEVBQUFDLEVBQUF6TSxPQUVBLE1BQUEwSCxPQUlBNkYsRUFBQXBMLFVBQUE2TSxZQUFBLFdBQ0FoUCxLQUFBeU8sT0FBQSxlQUNBek8sS0FBQTZOLFlBQUEsR0FFQU4sRUFBQXBMLFVBQUFnTixtQkFBQSxTQUFBWCxFQUFBVSxHQUNBLGdCQUFBQSxFQUVBQSxFQUFBNEMsWUFBQXRELEdBSUFVLEVBQUFWLElBR0FqQixFQUFBcEwsVUFBQXVQLGlCQUFBLFdBQ0ExUixLQUFBaUssTUFHQWpLLEtBQUF5TyxPQUFBLG1CQUNBek8sS0FBQWlLLElBQUEwRyxvQkFBQSxPQUFBM1EsS0FBQXVPLGFBQ0F2TyxLQUFBaUssSUFBQTBHLG9CQUFBLFFBQUEzUSxLQUFBd1AsY0FDQXhQLEtBQUFpSyxJQUFBMEcsb0JBQUEsVUFBQTNRLEtBQUFvUCxnQkFFQXBQLEtBQUFpSyxJQUFBMEcsb0JBQUEsUUFBQTNRLEtBQUFxUCxnQkFFQTlCLEVBQUFwTCxVQUFBeVAsY0FBQSxXQUNBNVIsS0FBQWlLLE1BR0FqSyxLQUFBeU8sT0FBQSxnQkFDQXpPLEtBQUFpSyxJQUFBUyxpQkFBQSxPQUFBMUssS0FBQXVPLGFBQ0F2TyxLQUFBaUssSUFBQVMsaUJBQUEsUUFBQTFLLEtBQUF3UCxjQUNBeFAsS0FBQWlLLElBQUFTLGlCQUFBLFVBQUExSyxLQUFBb1AsZ0JBRUFwUCxLQUFBaUssSUFBQVMsaUJBQUEsUUFBQTFLLEtBQUFxUCxnQkFFQTlCLEVBQUFwTCxVQUFBc04sZUFBQSxXQUNBYixhQUFBNU8sS0FBQTZPLGlCQUNBRCxhQUFBNU8sS0FBQThPLGlCQUVBdkIsRUFuYkEsR0FzYmUvQixFQUFBIiwiZmlsZSI6Imd1bi1yZWNlaXZlci5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gd2VicGFja1VuaXZlcnNhbE1vZHVsZURlZmluaXRpb24ocm9vdCwgZmFjdG9yeSkge1xuXHRpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG1vZHVsZSA9PT0gJ29iamVjdCcpXG5cdFx0bW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KHJlcXVpcmUoXCJyYW1kYVwiKSwgcmVxdWlyZShcInV1aWRcIiksIHJlcXVpcmUoXCJ3c1wiKSk7XG5cdGVsc2UgaWYodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKVxuXHRcdGRlZmluZShcImd1bi1yZWNlaXZlclwiLCBbXCJyYW1kYVwiLCBcInV1aWRcIiwgXCJ3c1wiXSwgZmFjdG9yeSk7XG5cdGVsc2UgaWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnKVxuXHRcdGV4cG9ydHNbXCJndW4tcmVjZWl2ZXJcIl0gPSBmYWN0b3J5KHJlcXVpcmUoXCJyYW1kYVwiKSwgcmVxdWlyZShcInV1aWRcIiksIHJlcXVpcmUoXCJ3c1wiKSk7XG5cdGVsc2Vcblx0XHRyb290W1wiZ3VuLXJlY2VpdmVyXCJdID0gZmFjdG9yeShyb290W1wicmFtZGFcIl0sIHJvb3RbXCJ1dWlkXCJdLCByb290W1wid3NcIl0pO1xufSkodHlwZW9mIHNlbGYgIT09ICd1bmRlZmluZWQnID8gc2VsZiA6IHRoaXMsIGZ1bmN0aW9uKF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfXzBfXywgX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV9fNV9fLCBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFX18xMF9fKSB7XG5yZXR1cm4gIiwiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDEpO1xuIiwibW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFX18wX187IiwiZXhwb3J0IHsgZGVmYXVsdCBhcyBjaGFpbkludGVyZmFjZSB9IGZyb20gXCIuL2NoYWluXCI7XG5leHBvcnQgeyBkZWZhdWx0IGFzIHByZXZlbnRDb25mbGljdHMgfSBmcm9tIFwiLi9jb25mbGljdHNcIjtcbmV4cG9ydCB7IGRlZmF1bHQgYXMgUmVjZWl2ZXIgfSBmcm9tIFwiLi9jb3JlXCI7XG5leHBvcnQgeyBkZWZhdWx0IGFzIGRlZHVwbGljYXRlTWVzc2FnZXMgfSBmcm9tIFwiLi9kZWR1cFwiO1xuZXhwb3J0IHsgZGVmYXVsdCBhcyBhbGxvd0xlZWNoIH0gZnJvbSBcIi4vbGVlY2hcIjtcbmV4cG9ydCB7IGRlZmF1bHQgYXMgcmVsYXlNZXNzYWdlcyB9IGZyb20gXCIuL3JlbGF5XCI7XG5pbXBvcnQgKiBhcyB3ZWJzb2NrZXQgZnJvbSBcIi4vd2Vic29ja2V0XCI7XG5cbmV4cG9ydCBjb25zdCB3ZWJzb2NrZXRUcmFuc3BvcnQgPSB3ZWJzb2NrZXQ7XG4iLCIvKiBnbG9iYWxzIFByb21pc2UgKi9cbmltcG9ydCB7IGlkZW50aXR5LCBrZXlzLCBwcm9wLCBwYXRoIH0gZnJvbSBcInJhbWRhXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGRiID0+IHtcbiAgY29uc3QgZ2V0UGF0aCA9IChrZXlMaXN0LCBvcHRzID0ge30pID0+IHtcbiAgICBsZXQgdGhpc0NoYWluO1xuICAgIGNvbnN0IG9uID0gZm4gPT4ge1xuICAgICAgbGV0IHZhbHVlLCBnZXRWYWx1ZTtcbiAgICAgIGxldCBoYXNSZXNwb25zZSA9IGZhbHNlO1xuICAgICAgY29uc3QgYm91bmQgPSBmbi5iaW5kKHRoaXNDaGFpbik7XG4gICAgICBjb25zdCByZWNlaXZlZCA9IHZhbCA9PiAoaGFzUmVzcG9uc2UgPSB0cnVlKSAmJiBib3VuZCgodmFsdWUgPSB2YWwpKTtcbiAgICAgIGNvbnN0IHJlcXVlc3RlZCA9IHt9O1xuICAgICAgY29uc3QgZ3JhcGggPSB7fTtcblxuICAgICAgY29uc3QgY29ubmVjdGlvbiA9IGRiLmNvbm5lY3RlZChtc2cgPT4ge1xuICAgICAgICBjb25zdCB7IGpzb24gfSA9IG1zZztcblxuICAgICAgICBrZXlzKHByb3AoXCJwdXRcIiwganNvbikpLmZvckVhY2goc291bCA9PiB7XG4gICAgICAgICAgaWYgKCFyZXF1ZXN0ZWRbc291bF0pIHJldHVybjtcbiAgICAgICAgICBjb25zdCBub2RlID0gcGF0aChbXCJwdXRcIiwgc291bF0sIGpzb24pO1xuXG4gICAgICAgICAgaWYgKCFub2RlICYmICFoYXNSZXNwb25zZSkgcmVjZWl2ZWQoKTtcbiAgICAgICAgICBpZiAobm9kZSkgZ3JhcGhbc291bF0gPSBub2RlO1xuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgbmV4dFZhbHVlID0gZ2V0VmFsdWUoa2V5TGlzdCk7XG5cbiAgICAgICAgaWYgKG5leHRWYWx1ZSAhPT0gdmFsdWUpIHJlY2VpdmVkKG5leHRWYWx1ZSk7XG4gICAgICB9KTtcblxuICAgICAgY29uc3QgZ2V0Tm9kZSA9IHNvdWwgPT4ge1xuICAgICAgICBpZiAocmVxdWVzdGVkW3NvdWxdKSByZXR1cm4gZ3JhcGhbc291bF07XG4gICAgICAgIHJlcXVlc3RlZFtzb3VsXSA9IHRydWU7XG4gICAgICAgIGNvbm5lY3Rpb24ucmVjZWl2ZSh7XG4gICAgICAgICAgLi4ub3B0cyxcbiAgICAgICAgICBqc29uOiB7IGdldDogeyBcIiNcIjogc291bCB9IH0sXG4gICAgICAgICAgc2tpcFZhbGlkYXRpb246IHRydWVcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBncmFwaFtzb3VsXTtcbiAgICAgIH07XG5cbiAgICAgIGdldFZhbHVlID0ga2wgPT4ge1xuICAgICAgICBjb25zdCBsYXN0S2V5ID0ga2xba2wubGVuZ3RoIC0gMV07XG5cbiAgICAgICAgaWYgKGtsLmxlbmd0aCA9PT0gMSkgcmV0dXJuIGdldE5vZGUobGFzdEtleSk7XG4gICAgICAgIGNvbnN0IHBhcmVudFZhbHVlID0gZ2V0VmFsdWUoa2wuc2xpY2UoMCwga2wubGVuZ3RoIC0gMSkpO1xuXG4gICAgICAgIGlmICghcGFyZW50VmFsdWUpIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIGNvbnN0IHZhbHVlID0gcHJvcChsYXN0S2V5LCBwYXJlbnRWYWx1ZSk7XG5cbiAgICAgICAgaWYgKHZhbHVlICYmIHZhbHVlW1wiI1wiXSkgcmV0dXJuIGdldE5vZGUodmFsdWVbXCIjXCJdKTtcbiAgICAgICAgaWYgKGtsID09PSBrZXlMaXN0KSByZWNlaXZlZCh2YWx1ZSk7XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgIH07XG5cbiAgICAgIGNvbm5lY3Rpb24ucmVjZWl2ZSh7IGpzb246IHsgbGVlY2g6IHRydWUgfSB9KTtcbiAgICAgIGdldFZhbHVlKGtleUxpc3QpO1xuICAgICAgcmV0dXJuICgpID0+IGRiLmRpc2Nvbm5lY3RlZChjb25uZWN0aW9uKTtcbiAgICB9O1xuXG4gICAgY29uc3QgdGhlbiA9IChmbiA9IGlkZW50aXR5KSA9PlxuICAgICAgbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XG4gICAgICAgIGNvbnN0IHVuc3Vic2NyaWJlID0gb24odmFsID0+IHtcbiAgICAgICAgICByZXNvbHZlKHZhbCk7XG4gICAgICAgICAgdW5zdWJzY3JpYmUoKTtcbiAgICAgICAgfSk7XG4gICAgICB9KS50aGVuKGZuKTtcblxuICAgIGNvbnN0IG9uY2UgPSBmbiA9PiB0aGVuKGZuLmJpbmQodGhpc0NoYWluKSkgJiYgdGhpc0NoYWluO1xuICAgIGNvbnN0IGdldCA9IChrZXksIG9wdHMgPSB7fSkgPT4gZ2V0UGF0aChbLi4ua2V5TGlzdCwga2V5XSwgb3B0cyk7XG5cbiAgICB0aGlzQ2hhaW4gPSB7IGdldCwgb24sIHRoZW4sIG9uY2UgfTtcbiAgICByZXR1cm4gdGhpc0NoYWluO1xuICB9O1xuXG4gIGRiLmdldCA9IChrZXksIG9wdHMgPSB7fSkgPT4gZ2V0UGF0aChba2V5XSwgb3B0cyk7XG4gIHJldHVybiBkYjtcbn07XG4iLCIvKiBnbG9iYWxzIFByb21pc2UgKi9cbmltcG9ydCB7IGtleXMsIHByb3AsIHBhdGggfSBmcm9tIFwicmFtZGFcIjtcblxuZXhwb3J0IGRlZmF1bHQgZGIgPT4ge1xuICBkYi5vbkluKG1zZyA9PiB7XG4gICAgY29uc3QgeyBqc29uIH0gPSBtc2c7XG4gICAgY29uc3QgdXBkYXRlZFZlY3RvcnMgPSBbXTtcbiAgICBjb25zdCBwdXRLZXlzID0ga2V5cyhwcm9wKFwicHV0XCIsIGpzb24pKTtcblxuICAgIGlmICghcHV0S2V5cy5sZW5ndGgpIHJldHVybiBQcm9taXNlLnJlc29sdmUobXNnKTtcbiAgICByZXR1cm4gUHJvbWlzZS5hbGwoXG4gICAgICBwdXRLZXlzLm1hcChzb3VsID0+IHtcbiAgICAgICAgY29uc3QgcHV0VmVjdG9ycyA9IHBhdGgoW1wicHV0XCIsIHNvdWwsIFwiX1wiLCBcIj5cIl0sIGpzb24pIHx8IHt9O1xuXG4gICAgICAgIHJldHVybiBkYi5nZXQoc291bCwgeyBub1JlbGF5OiB0cnVlIH0pLnRoZW4obm9kZSA9PiB7XG4gICAgICAgICAgY29uc3Qga25vd25WZWN0b3JzID0gcGF0aChbXCJfXCIsIFwiPlwiXSwgbm9kZSkgfHwge307XG5cbiAgICAgICAgICBrZXlzKHB1dFZlY3RvcnMpLmZvckVhY2goa2V5ID0+IHtcbiAgICAgICAgICAgIGlmIChrbm93blZlY3RvcnNba2V5XSAmJiBrbm93blZlY3RvcnNba2V5XSA+IHB1dFZlY3RvcnNba2V5XSkge1xuICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB1cGRhdGVkVmVjdG9ycy5wdXNoKHB1dFZlY3RvcnNba2V5XSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgfSlcbiAgICApLnRoZW4oKCkgPT4gKHVwZGF0ZWRWZWN0b3JzLmxlbmd0aCB8fCBqc29uLmdldCA/IG1zZyA6IG51bGwpKTtcbiAgfSk7XG4gIHJldHVybiBkYjtcbn07XG4iLCIvKiBnbG9iYWxzIFByb21pc2UgKi9cbmltcG9ydCB7IGFzc29jUGF0aCwgcGF0aCwgd2l0aG91dCB9IGZyb20gXCJyYW1kYVwiO1xuaW1wb3J0IHV1aWQgZnJvbSBcInV1aWRcIjtcblxuZnVuY3Rpb24gcHJvY2Vzc1F1ZXVlKCkge1xuICBsZXQgZm5zID0gW107XG4gIGNvbnN0IHF1ZXVlID0gZm4gPT4gZm5zLnB1c2goZm4pO1xuICBjb25zdCBkZXF1ZXVlID0gZm4gPT4gKGZucyA9IHdpdGhvdXQoW2ZuXSwgZm5zKSk7XG5cbiAgZnVuY3Rpb24gZXhlY3V0ZShtc2cpIHtcbiAgICBjb25zdCByZW1haW5pbmdGbnMgPSBmbnMuc2xpY2UoKS5yZXZlcnNlKCk7XG4gICAgY29uc3QgZXhlY3V0ZU5leHQgPSBtc2cgPT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgZm4gPSByZW1haW5pbmdGbnMucG9wKCk7XG5cbiAgICAgICAgaWYgKG1zZyAmJiBmbikgcmV0dXJuIFByb21pc2UucmVzb2x2ZShmbihtc2cpKS50aGVuKGV4ZWN1dGVOZXh0KTtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShtc2cpO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZSk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIHJldHVybiBleGVjdXRlTmV4dChtc2cpO1xuICB9XG5cbiAgcmV0dXJuIFtxdWV1ZSwgZXhlY3V0ZSwgZGVxdWV1ZV07XG59XG5cbmZ1bmN0aW9uIHBpc3RvbENvbm5lY3Rpb24oeyBkYiwgc2VuZDogc2VuZEZuIH0pIHtcbiAgbGV0IGNvbm5lY3Rpb247XG4gIGxldCBzdGF0ZSA9IHt9O1xuICBsZXQgaGFzUmVwb3J0ZWRFcnJvciA9IGZhbHNlO1xuICBjb25zdCBnZXQgPSBwID0+IHBhdGgocCwgc3RhdGUpO1xuICBjb25zdCBzZXQgPSAocCwgdikgPT4gKHN0YXRlID0gYXNzb2NQYXRoKHAsIHYsIHN0YXRlKSk7IC8vICYmIGNvbnNvbGUubG9nKHN0YXRlKTtcbiAgY29uc3QgbXNnSWQgPSAoKSA9PiB1dWlkLnY0KCk7XG4gIGNvbnN0IHNlbmQgPSBtc2cgPT5cbiAgICBkYlxuICAgICAgLnByb2Nlc3NPdXQoeyAuLi5tc2csIHRvOiBjb25uZWN0aW9uIH0pXG4gICAgICAudGhlbihyID0+IHIgJiYgc2VuZEZuKHIpKVxuICAgICAgLmNhdGNoKGVyciA9PiB7XG4gICAgICAgIGlmICghaGFzUmVwb3J0ZWRFcnJvcikge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXG4gICAgICAgICAgICBcIlBJU1RPTCBzZW5kIGVyclwiLFxuICAgICAgICAgICAgSlNPTi5zdHJpbmdpZnkobXNnLCBudWxsLCAyKSxcbiAgICAgICAgICAgIG1zZy5qc29uLnB1dCxcbiAgICAgICAgICAgIGVyclxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgICAgaGFzUmVwb3J0ZWRFcnJvciA9IHRydWU7XG4gICAgICB9KTtcbiAgY29uc3QgcmVjZWl2ZSA9ICh7IGpzb24sIC4uLm9wdHMgfSkgPT4ge1xuICAgIGNvbnN0IHByZXNlcnZlZCA9IEpTT04uc3RyaW5naWZ5KGpzb24sIG51bGwsIDIpO1xuXG4gICAgcmV0dXJuIGRiXG4gICAgICAucHJvY2Vzc0luKHtcbiAgICAgICAgLi4ub3B0cyxcbiAgICAgICAgZGIsXG4gICAgICAgIGpzb246IHsgLi4uanNvbiwgXCIjXCI6IGpzb25bXCIjXCJdIHx8IHV1aWQudjQoKSB9LFxuICAgICAgICBmcm9tOiBjb25uZWN0aW9uXG4gICAgICB9KVxuICAgICAgLmNhdGNoKGVyciA9PiBjb25zb2xlLmVycm9yKFwiUElTVE9MIHJlY2VpdmUgZXJyXCIsIGVyciwgcHJlc2VydmVkKSk7XG4gIH07XG5cbiAgY29ubmVjdGlvbiA9IHsgc2VuZCwgcmVjZWl2ZSwgZ2V0LCBzZXQsIG1zZ0lkIH07XG4gIHJldHVybiBjb25uZWN0aW9uO1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBSZWNlaXZlcigpIHtcbiAgbGV0IHBlZXI7XG4gIGNvbnN0IGNvbm5lY3Rpb25zID0gW107XG4gIGNvbnN0IFtvbkluLCBwcm9jZXNzSW5dID0gcHJvY2Vzc1F1ZXVlKCk7XG4gIGNvbnN0IFtvbk91dCwgcHJvY2Vzc091dF0gPSBwcm9jZXNzUXVldWUoKTtcblxuICBmdW5jdGlvbiBjb25uZWN0ZWQoc2VuZCkge1xuICAgIGNvbnN0IGNvbm5lY3Rpb24gPSBwaXN0b2xDb25uZWN0aW9uKHsgZGI6IHBlZXIsIHNlbmQgfSk7XG5cbiAgICBjb25uZWN0aW9ucy5wdXNoKGNvbm5lY3Rpb24pO1xuICAgIHJldHVybiBjb25uZWN0aW9uO1xuICB9XG5cbiAgZnVuY3Rpb24gZGlzY29ubmVjdGVkKGNvbm5lY3Rpb24pIHtcbiAgICBjb25zdCBjb25uZWN0aW9uSWR4ID0gY29ubmVjdGlvbnMuaW5kZXhPZihjb25uZWN0aW9uKTtcblxuICAgIGlmIChjb25uZWN0aW9uSWR4ICE9PSAtMSkgY29ubmVjdGlvbnMuc3BsaWNlKGNvbm5lY3Rpb25JZHgsIDEpO1xuICB9XG5cbiAgcGVlciA9IHtcbiAgICBjb25uZWN0aW9ucyxcbiAgICBjb25uZWN0ZWQsXG4gICAgZGlzY29ubmVjdGVkLFxuICAgIG9uSW4sXG4gICAgb25PdXQsXG4gICAgcHJvY2Vzc0luLFxuICAgIHByb2Nlc3NPdXRcbiAgfTtcbiAgcmV0dXJuIHBlZXI7XG59XG4iLCJtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfXzVfXzsiLCJpbXBvcnQgeyBwYXRoLCBrZXlzIH0gZnJvbSBcInJhbWRhXCI7XG5jb25zdCBNQVhfTVNHX0lEX0NBQ0hFID0gNTAwMDA7XG5jb25zdCBHQVJCQUdFX0lOVEVSVkFMID0gNjAwMDA7XG5cbmV4cG9ydCBkZWZhdWx0IGRiID0+IHtcbiAgY29uc3QgcmVjZWl2ZWRJZHMgPSB7fTtcblxuICBmdW5jdGlvbiBjb2xsZWN0R2FyYmFnZSgpIHtcbiAgICBsZXQgaWRzID0ga2V5cyhyZWNlaXZlZElkcykucmV2ZXJzZSgpO1xuXG4gICAgd2hpbGUgKGlkcy5sZW5ndGggPiBNQVhfTVNHX0lEX0NBQ0hFKSB7XG4gICAgICBkZWxldGUgcmVjZWl2ZWRJZHNbaWRzLnBvcCgpXTtcbiAgICB9XG4gIH1cblxuICBkYi5vbkluKG1zZyA9PiB7XG4gICAgY29uc3QgaWQgPSBwYXRoKFtcImpzb25cIiwgXCIjXCJdLCBtc2cpO1xuXG4gICAgaWYgKCFpZCB8fCBpZCBpbiByZWNlaXZlZElkcykgcmV0dXJuIG51bGw7XG4gICAgcmVjZWl2ZWRJZHNbaWRdID0gdHJ1ZTtcbiAgICByZXR1cm4gbXNnO1xuICB9KTtcblxuICBzZXRJbnRlcnZhbChjb2xsZWN0R2FyYmFnZSwgR0FSQkFHRV9JTlRFUlZBTCk7XG5cbiAgcmV0dXJuIGRiO1xufTtcbiIsImltcG9ydCB7IHBhdGgsIGtleXMgfSBmcm9tIFwicmFtZGFcIjtcblxuZXhwb3J0IGRlZmF1bHQgZGIgPT4ge1xuICBkYi5vbkluKG1zZyA9PiB7XG4gICAgaWYgKHBhdGgoW1wianNvblwiLCBcImxlZWNoXCJdLCBtc2cpKSB7XG4gICAgICBtc2cuZnJvbS5zZXQoW1wiaXNMZWVjaGluZ1wiXSwgdHJ1ZSk7XG4gICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBjb25zdCBhc2tpbmdGb3IgPSBwYXRoKFtcImpzb25cIiwgXCJnZXRcIiwgXCIjXCJdLCBtc2cpO1xuXG4gICAgW2Fza2luZ0ZvciwgLi4ua2V5cyhwYXRoKFtcImpzb25cIiwgXCJwdXRcIl0sIG1zZykpXS5mb3JFYWNoKFxuICAgICAgc291bCA9PiBzb3VsICYmIG1zZy5mcm9tLnNldChbXCJoYXNBc2tlZEZvclwiLCBzb3VsXSwgdHJ1ZSlcbiAgICApO1xuICAgIHJldHVybiBtc2c7XG4gIH0pO1xuXG4gIGRiLm9uT3V0KG1zZyA9PiB7XG4gICAgY29uc3QgeyB0bywganNvbiwgaWdub3JlTGVlY2hpbmcgfSA9IG1zZztcblxuICAgIGlmICghdG8uZ2V0KFtcImlzTGVlY2hpbmdcIl0pIHx8IGlnbm9yZUxlZWNoaW5nKSByZXR1cm4gbXNnO1xuICAgIGNvbnN0IGFza2VkUHV0cyA9IGtleXMoanNvbi5wdXQpLmZpbHRlcihzb3VsID0+IHtcbiAgICAgIGlmICghdG8uZ2V0KFtcImhhc0Fza2VkRm9yXCIsIHNvdWxdKSkgcmV0dXJuIGZhbHNlO1xuICAgICAgY29uc3Qgc291bERlbHRhcyA9IHBhdGgoW3NvdWwsIFwiX1wiLCBcIj5cIl0sIGpzb24ucHV0KTtcbiAgICAgIGxldCBoYXNVcGRhdGVzID0gZmFsc2U7XG5cbiAgICAgIGlmICgha2V5cyhzb3VsRGVsdGFzKS5sZW5ndGgpIHJldHVybiB0cnVlO1xuXG4gICAgICBrZXlzKHNvdWxEZWx0YXMpLmZvckVhY2goa2V5ID0+IHtcbiAgICAgICAgY29uc3Qga25vd24gPSB0by5nZXQoW1wia25vd25EZWx0YXNcIiwgc291bCwga2V5XSkgfHwgMDtcbiAgICAgICAgY29uc3QgZGVsdGEgPSBwYXJzZUZsb2F0KHNvdWxEZWx0YXNba2V5XSkgfHwgMDtcblxuICAgICAgICBpZiAoa25vd24gJiYgZGVsdGEgPD0ga25vd24pIHJldHVybjtcbiAgICAgICAgdG8uc2V0KFtcImtub3duRGVsdGFzXCIsIHNvdWwsIGtleV0sIGRlbHRhKTtcbiAgICAgICAgaGFzVXBkYXRlcyA9IHRydWU7XG4gICAgICB9KTtcbiAgICAgIHJldHVybiBoYXNVcGRhdGVzO1xuICAgIH0pO1xuXG4gICAgaWYgKGFza2VkUHV0cy5sZW5ndGgpIHJldHVybiBtc2c7XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfSk7XG5cbiAgcmV0dXJuIGRiO1xufTtcbiIsImltcG9ydCB7IHdpdGhvdXQgfSBmcm9tIFwicmFtZGFcIjtcbm1vZHVsZS5leHBvcnRzID0gZGIgPT4ge1xuICBkYi5vbkluKG1zZyA9PiB7XG4gICAgY29uc3QgeyBmcm9tLCBqc29uLCBub1JlbGF5IH0gPSBtc2c7XG5cbiAgICBpZiAobm9SZWxheSkgcmV0dXJuIG1zZztcbiAgICB3aXRob3V0KFtmcm9tXSwgZGIuY29ubmVjdGlvbnMpLmZvckVhY2goYyA9PlxuICAgICAgYy5zZW5kKHsgZnJvbSwganNvbiwgc2tpcFZhbGlkYXRpb246IHRydWUgfSlcbiAgICApO1xuICAgIHJldHVybiBtc2c7XG4gIH0pO1xuICByZXR1cm4gZGI7XG59O1xuIiwiaW1wb3J0IHsgY3VycnkgfSBmcm9tIFwicmFtZGFcIjtcbmltcG9ydCBXUyBmcm9tIFwid3NcIjtcbmltcG9ydCBSZWNvbm5lY3RpbmdXZWJTb2NrZXQgZnJvbSBcInJlY29ubmVjdGluZy13ZWJzb2NrZXRcIjtcblxuY29uc3QgUElORyA9IDYwMDAwO1xuXG5jb25zdCB3c0Nvbm5lY3Rpb24gPSBjdXJyeSgoZGIsIHdzKSA9PiB7XG4gIGxldCBoYXNMb2dnZWRFcnIgPSBmYWxzZTtcbiAgbGV0IGNvbm5lY3RlZCA9IHRydWU7XG5cbiAgY29uc3QgY29ubmVjdGlvbiA9IGRiLmNvbm5lY3RlZChtc2cgPT4ge1xuICAgIGlmICghbXNnIHx8ICFtc2cuanNvbiB8fCAhY29ubmVjdGVkKSByZXR1cm47XG4gICAgd3Muc2VuZChKU09OLnN0cmluZ2lmeShtc2cuanNvbiksIGVyciA9PiB7XG4gICAgICBpZiAoIWVyciB8fCBoYXNMb2dnZWRFcnIpIHJldHVybjtcbiAgICAgIGNvbnNvbGUud2FybihcIndzIHNlbmQgZXJyXCIsIGVycik7XG4gICAgICBoYXNMb2dnZWRFcnIgPSB0cnVlO1xuICAgIH0pO1xuICB9KTtcblxuICBjb25zdCBwaW5nSW50ZXJ2YWwgPSBzZXRJbnRlcnZhbChcbiAgICAoKSA9PiBjb25uZWN0aW9uLnNlbmQoeyBqc29uOiB7IHBpbmc6IHRydWUgfSwgc2tpcFZhbGlkYXRpb246IHRydWUgfSksXG4gICAgUElOR1xuICApO1xuXG4gIGNvbnN0IHJlY2VpdmUgPSBtc2cgPT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBqc29uID0gSlNPTi5wYXJzZShtc2cuZGF0YSB8fCBtc2cpO1xuXG4gICAgICBBcnJheS5pc0FycmF5KGpzb24pXG4gICAgICAgID8ganNvbi5mb3JFYWNoKHJlY2VpdmUpXG4gICAgICAgIDogY29ubmVjdGlvbi5yZWNlaXZlKHsganNvbiB9KTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiUkVDRUlWRVIgaW52YWxpZCB3cyBtc2dcIiwgZSwgbXNnLmRhdGEpO1xuICAgIH1cbiAgfTtcblxuICB3cy5hZGRFdmVudExpc3RlbmVyKFwiY2xvc2VcIiwgKCkgPT4ge1xuICAgIGlmICh3cy5yZWNvbm5lY3QpIHJldHVybjtcbiAgICBjb25uZWN0ZWQgPSBmYWxzZTtcbiAgICBjbGVhckludGVydmFsKHBpbmdJbnRlcnZhbCk7XG4gICAgZGIuZGlzY29ubmVjdGVkKGNvbm5lY3Rpb24pO1xuICB9KTtcblxuICB3cy5hZGRFdmVudExpc3RlbmVyKFwibWVzc2FnZVwiLCByZWNlaXZlKTtcbiAgcmV0dXJuIGNvbm5lY3Rpb247XG59KTtcblxuZXhwb3J0IGNvbnN0IHNlcnZlciA9IGN1cnJ5KCh7IHdlYiwgcG9ydCB9LCBkYikgPT4ge1xuICBuZXcgV1MuU2VydmVyKHsgcG9ydDogIXdlYiA/IHBvcnQgOiB1bmRlZmluZWQsIHNlcnZlcjogd2ViIH0pLm9uKFxuICAgIFwiY29ubmVjdGlvblwiLFxuICAgIHdzQ29ubmVjdGlvbihkYilcbiAgKTtcbiAgcmV0dXJuIGRiO1xufSk7XG5cbmV4cG9ydCBjb25zdCBjbGllbnQgPSBjdXJyeSgodXJsLCBkYikgPT4ge1xuICBjb25zdCB3cyA9IG5ldyBSZWNvbm5lY3RpbmdXZWJTb2NrZXQodXJsLCBbXSwgeyBXZWJTb2NrZXQ6IFdTIH0pO1xuXG4gIHdzLmFkZEV2ZW50TGlzdGVuZXIoXCJvcGVuXCIsICgpID0+IHdzQ29ubmVjdGlvbihkYiwgd3MpKTtcbiAgcmV0dXJuIGRiO1xufSk7XG4iLCJtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfXzEwX187IiwiLyohICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcbkNvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxyXG5MaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpOyB5b3UgbWF5IG5vdCB1c2VcclxudGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGVcclxuTGljZW5zZSBhdCBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuXHJcblRISVMgQ09ERSBJUyBQUk9WSURFRCBPTiBBTiAqQVMgSVMqIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTllcclxuS0lORCwgRUlUSEVSIEVYUFJFU1MgT1IgSU1QTElFRCwgSU5DTFVESU5HIFdJVEhPVVQgTElNSVRBVElPTiBBTlkgSU1QTElFRFxyXG5XQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgVElUTEUsIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLFxyXG5NRVJDSEFOVEFCTElUWSBPUiBOT04tSU5GUklOR0VNRU5ULlxyXG5cclxuU2VlIHRoZSBBcGFjaGUgVmVyc2lvbiAyLjAgTGljZW5zZSBmb3Igc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zXHJcbmFuZCBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiogKi9cclxuLyogZ2xvYmFsIFJlZmxlY3QsIFByb21pc2UgKi9cclxuXHJcbnZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24oZCwgYikge1xyXG4gICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxyXG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcclxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcclxuICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xyXG59O1xyXG5cclxuZnVuY3Rpb24gX19leHRlbmRzKGQsIGIpIHtcclxuICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XHJcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cclxuICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcclxufVxuXG52YXIgRXZlbnQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBFdmVudCh0eXBlLCB0YXJnZXQpIHtcclxuICAgICAgICB0aGlzLnRhcmdldCA9IHRhcmdldDtcclxuICAgICAgICB0aGlzLnR5cGUgPSB0eXBlO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIEV2ZW50O1xyXG59KCkpO1xyXG52YXIgRXJyb3JFdmVudCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcclxuICAgIF9fZXh0ZW5kcyhFcnJvckV2ZW50LCBfc3VwZXIpO1xyXG4gICAgZnVuY3Rpb24gRXJyb3JFdmVudChlcnJvciwgdGFyZ2V0KSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgJ2Vycm9yJywgdGFyZ2V0KSB8fCB0aGlzO1xyXG4gICAgICAgIF90aGlzLm1lc3NhZ2UgPSBlcnJvci5tZXNzYWdlO1xyXG4gICAgICAgIF90aGlzLmVycm9yID0gZXJyb3I7XHJcbiAgICAgICAgcmV0dXJuIF90aGlzO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIEVycm9yRXZlbnQ7XHJcbn0oRXZlbnQpKTtcclxudmFyIENsb3NlRXZlbnQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XHJcbiAgICBfX2V4dGVuZHMoQ2xvc2VFdmVudCwgX3N1cGVyKTtcclxuICAgIGZ1bmN0aW9uIENsb3NlRXZlbnQoY29kZSwgcmVhc29uLCB0YXJnZXQpIHtcclxuICAgICAgICBpZiAoY29kZSA9PT0gdm9pZCAwKSB7IGNvZGUgPSAxMDAwOyB9XHJcbiAgICAgICAgaWYgKHJlYXNvbiA9PT0gdm9pZCAwKSB7IHJlYXNvbiA9ICcnOyB9XHJcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgJ2Nsb3NlJywgdGFyZ2V0KSB8fCB0aGlzO1xyXG4gICAgICAgIF90aGlzLndhc0NsZWFuID0gdHJ1ZTtcclxuICAgICAgICBfdGhpcy5jb2RlID0gY29kZTtcclxuICAgICAgICBfdGhpcy5yZWFzb24gPSByZWFzb247XHJcbiAgICAgICAgcmV0dXJuIF90aGlzO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIENsb3NlRXZlbnQ7XHJcbn0oRXZlbnQpKTtcblxuLyohXHJcbiAqIFJlY29ubmVjdGluZyBXZWJTb2NrZXRcclxuICogYnkgUGVkcm8gTGFkYXJpYSA8cGVkcm8ubGFkYXJpYUBnbWFpbC5jb20+XHJcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9wbGFkYXJpYS9yZWNvbm5lY3Rpbmctd2Vic29ja2V0XHJcbiAqIExpY2Vuc2UgTUlUXHJcbiAqL1xyXG52YXIgZ2V0R2xvYmFsV2ViU29ja2V0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgaWYgKHR5cGVvZiBXZWJTb2NrZXQgIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgICAgIHJldHVybiBXZWJTb2NrZXQ7XHJcbiAgICB9XHJcbn07XHJcbi8qKlxyXG4gKiBSZXR1cm5zIHRydWUgaWYgZ2l2ZW4gYXJndW1lbnQgbG9va3MgbGlrZSBhIFdlYlNvY2tldCBjbGFzc1xyXG4gKi9cclxudmFyIGlzV2ViU29ja2V0ID0gZnVuY3Rpb24gKHcpIHsgcmV0dXJuIHR5cGVvZiB3ID09PSAnZnVuY3Rpb24nICYmIHcuQ0xPU0lORyA9PT0gMjsgfTtcclxudmFyIERFRkFVTFQgPSB7XHJcbiAgICBtYXhSZWNvbm5lY3Rpb25EZWxheTogMTAwMDAsXHJcbiAgICBtaW5SZWNvbm5lY3Rpb25EZWxheTogMTAwMCArIE1hdGgucmFuZG9tKCkgKiA0MDAwLFxyXG4gICAgbWluVXB0aW1lOiA1MDAwLFxyXG4gICAgcmVjb25uZWN0aW9uRGVsYXlHcm93RmFjdG9yOiAxLjMsXHJcbiAgICBjb25uZWN0aW9uVGltZW91dDogNDAwMCxcclxuICAgIG1heFJldHJpZXM6IEluZmluaXR5LFxyXG4gICAgZGVidWc6IGZhbHNlLFxyXG59O1xyXG52YXIgUmVjb25uZWN0aW5nV2ViU29ja2V0ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gUmVjb25uZWN0aW5nV2ViU29ja2V0KHVybCwgcHJvdG9jb2xzLCBvcHRpb25zKSB7XHJcbiAgICAgICAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkgeyBvcHRpb25zID0ge307IH1cclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHRoaXMuX2xpc3RlbmVycyA9IHtcclxuICAgICAgICAgICAgZXJyb3I6IFtdLFxyXG4gICAgICAgICAgICBtZXNzYWdlOiBbXSxcclxuICAgICAgICAgICAgb3BlbjogW10sXHJcbiAgICAgICAgICAgIGNsb3NlOiBbXSxcclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMuX3JldHJ5Q291bnQgPSAtMTtcclxuICAgICAgICB0aGlzLl9zaG91bGRSZWNvbm5lY3QgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuX2Nvbm5lY3RMb2NrID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5fYmluYXJ5VHlwZSA9ICdibG9iJztcclxuICAgICAgICB0aGlzLl9jbG9zZUNhbGxlZCA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuX21lc3NhZ2VRdWV1ZSA9IFtdO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEFuIGV2ZW50IGxpc3RlbmVyIHRvIGJlIGNhbGxlZCB3aGVuIHRoZSBXZWJTb2NrZXQgY29ubmVjdGlvbidzIHJlYWR5U3RhdGUgY2hhbmdlcyB0byBDTE9TRURcclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLm9uY2xvc2UgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQW4gZXZlbnQgbGlzdGVuZXIgdG8gYmUgY2FsbGVkIHdoZW4gYW4gZXJyb3Igb2NjdXJzXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5vbmVycm9yID0gdW5kZWZpbmVkO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEFuIGV2ZW50IGxpc3RlbmVyIHRvIGJlIGNhbGxlZCB3aGVuIGEgbWVzc2FnZSBpcyByZWNlaXZlZCBmcm9tIHRoZSBzZXJ2ZXJcclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLm9ubWVzc2FnZSA9IHVuZGVmaW5lZDtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBBbiBldmVudCBsaXN0ZW5lciB0byBiZSBjYWxsZWQgd2hlbiB0aGUgV2ViU29ja2V0IGNvbm5lY3Rpb24ncyByZWFkeVN0YXRlIGNoYW5nZXMgdG8gT1BFTjtcclxuICAgICAgICAgKiB0aGlzIGluZGljYXRlcyB0aGF0IHRoZSBjb25uZWN0aW9uIGlzIHJlYWR5IHRvIHNlbmQgYW5kIHJlY2VpdmUgZGF0YVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMub25vcGVuID0gdW5kZWZpbmVkO1xyXG4gICAgICAgIHRoaXMuX2hhbmRsZU9wZW4gPSBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgX3RoaXMuX2RlYnVnKCdvcGVuIGV2ZW50Jyk7XHJcbiAgICAgICAgICAgIHZhciBfYSA9IF90aGlzLl9vcHRpb25zLm1pblVwdGltZSwgbWluVXB0aW1lID0gX2EgPT09IHZvaWQgMCA/IERFRkFVTFQubWluVXB0aW1lIDogX2E7XHJcbiAgICAgICAgICAgIGNsZWFyVGltZW91dChfdGhpcy5fY29ubmVjdFRpbWVvdXQpO1xyXG4gICAgICAgICAgICBfdGhpcy5fdXB0aW1lVGltZW91dCA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgeyByZXR1cm4gX3RoaXMuX2FjY2VwdE9wZW4oKTsgfSwgbWluVXB0aW1lKTtcclxuICAgICAgICAgICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgICAgICAgICBfdGhpcy5fd3MuYmluYXJ5VHlwZSA9IF90aGlzLl9iaW5hcnlUeXBlO1xyXG4gICAgICAgICAgICAvLyBzZW5kIGVucXVldWVkIG1lc3NhZ2VzIChtZXNzYWdlcyBzZW50IGJlZm9yZSB3ZWJzb2NrZXQgb3BlbiBldmVudClcclxuICAgICAgICAgICAgX3RoaXMuX21lc3NhZ2VRdWV1ZS5mb3JFYWNoKGZ1bmN0aW9uIChtZXNzYWdlKSB7IHJldHVybiBfdGhpcy5fd3Muc2VuZChtZXNzYWdlKTsgfSk7XHJcbiAgICAgICAgICAgIF90aGlzLl9tZXNzYWdlUXVldWUgPSBbXTtcclxuICAgICAgICAgICAgaWYgKF90aGlzLm9ub3Blbikge1xyXG4gICAgICAgICAgICAgICAgX3RoaXMub25vcGVuKGV2ZW50KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBfdGhpcy5fbGlzdGVuZXJzLm9wZW4uZm9yRWFjaChmdW5jdGlvbiAobGlzdGVuZXIpIHsgcmV0dXJuIF90aGlzLl9jYWxsRXZlbnRMaXN0ZW5lcihldmVudCwgbGlzdGVuZXIpOyB9KTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMuX2hhbmRsZU1lc3NhZ2UgPSBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgX3RoaXMuX2RlYnVnKCdtZXNzYWdlIGV2ZW50Jyk7XHJcbiAgICAgICAgICAgIGlmIChfdGhpcy5vbm1lc3NhZ2UpIHtcclxuICAgICAgICAgICAgICAgIF90aGlzLm9ubWVzc2FnZShldmVudCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgX3RoaXMuX2xpc3RlbmVycy5tZXNzYWdlLmZvckVhY2goZnVuY3Rpb24gKGxpc3RlbmVyKSB7IHJldHVybiBfdGhpcy5fY2FsbEV2ZW50TGlzdGVuZXIoZXZlbnQsIGxpc3RlbmVyKTsgfSk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLl9oYW5kbGVFcnJvciA9IGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgICAgICBfdGhpcy5fZGVidWcoJ2Vycm9yIGV2ZW50JywgZXZlbnQubWVzc2FnZSk7XHJcbiAgICAgICAgICAgIF90aGlzLl9kaXNjb25uZWN0KHVuZGVmaW5lZCwgZXZlbnQubWVzc2FnZSA9PT0gJ1RJTUVPVVQnID8gJ3RpbWVvdXQnIDogdW5kZWZpbmVkKTtcclxuICAgICAgICAgICAgaWYgKF90aGlzLm9uZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgIF90aGlzLm9uZXJyb3IoZXZlbnQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIF90aGlzLl9kZWJ1ZygnZXhlYyBlcnJvciBsaXN0ZW5lcnMnKTtcclxuICAgICAgICAgICAgX3RoaXMuX2xpc3RlbmVycy5lcnJvci5mb3JFYWNoKGZ1bmN0aW9uIChsaXN0ZW5lcikgeyByZXR1cm4gX3RoaXMuX2NhbGxFdmVudExpc3RlbmVyKGV2ZW50LCBsaXN0ZW5lcik7IH0pO1xyXG4gICAgICAgICAgICBfdGhpcy5fY29ubmVjdCgpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy5faGFuZGxlQ2xvc2UgPSBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgX3RoaXMuX2RlYnVnKCdjbG9zZSBldmVudCcpO1xyXG4gICAgICAgICAgICBfdGhpcy5fY2xlYXJUaW1lb3V0cygpO1xyXG4gICAgICAgICAgICBpZiAoX3RoaXMuX3Nob3VsZFJlY29ubmVjdCkge1xyXG4gICAgICAgICAgICAgICAgX3RoaXMuX2Nvbm5lY3QoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoX3RoaXMub25jbG9zZSkge1xyXG4gICAgICAgICAgICAgICAgX3RoaXMub25jbG9zZShldmVudCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgX3RoaXMuX2xpc3RlbmVycy5jbG9zZS5mb3JFYWNoKGZ1bmN0aW9uIChsaXN0ZW5lcikgeyByZXR1cm4gX3RoaXMuX2NhbGxFdmVudExpc3RlbmVyKGV2ZW50LCBsaXN0ZW5lcik7IH0pO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy5fdXJsID0gdXJsO1xyXG4gICAgICAgIHRoaXMuX3Byb3RvY29scyA9IHByb3RvY29scztcclxuICAgICAgICB0aGlzLl9vcHRpb25zID0gb3B0aW9ucztcclxuICAgICAgICB0aGlzLl9jb25uZWN0KCk7XHJcbiAgICB9XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoUmVjb25uZWN0aW5nV2ViU29ja2V0LCBcIkNPTk5FQ1RJTkdcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gMDtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShSZWNvbm5lY3RpbmdXZWJTb2NrZXQsIFwiT1BFTlwiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAxO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFJlY29ubmVjdGluZ1dlYlNvY2tldCwgXCJDTE9TSU5HXCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIDI7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoUmVjb25uZWN0aW5nV2ViU29ja2V0LCBcIkNMT1NFRFwiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAzO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFJlY29ubmVjdGluZ1dlYlNvY2tldC5wcm90b3R5cGUsIFwiQ09OTkVDVElOR1wiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBSZWNvbm5lY3RpbmdXZWJTb2NrZXQuQ09OTkVDVElORztcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShSZWNvbm5lY3RpbmdXZWJTb2NrZXQucHJvdG90eXBlLCBcIk9QRU5cIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gUmVjb25uZWN0aW5nV2ViU29ja2V0Lk9QRU47XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoUmVjb25uZWN0aW5nV2ViU29ja2V0LnByb3RvdHlwZSwgXCJDTE9TSU5HXCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIFJlY29ubmVjdGluZ1dlYlNvY2tldC5DTE9TSU5HO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFJlY29ubmVjdGluZ1dlYlNvY2tldC5wcm90b3R5cGUsIFwiQ0xPU0VEXCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIFJlY29ubmVjdGluZ1dlYlNvY2tldC5DTE9TRUQ7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoUmVjb25uZWN0aW5nV2ViU29ja2V0LnByb3RvdHlwZSwgXCJiaW5hcnlUeXBlXCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3dzID8gdGhpcy5fd3MuYmluYXJ5VHlwZSA6IHRoaXMuX2JpbmFyeVR5cGU7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xyXG4gICAgICAgICAgICB0aGlzLl9iaW5hcnlUeXBlID0gdmFsdWU7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLl93cykge1xyXG4gICAgICAgICAgICAgICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgICAgICAgICAgICAgdGhpcy5fd3MuYmluYXJ5VHlwZSA9IHZhbHVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoUmVjb25uZWN0aW5nV2ViU29ja2V0LnByb3RvdHlwZSwgXCJyZXRyeUNvdW50XCIsIHtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBSZXR1cm5zIHRoZSBudW1iZXIgb3IgY29ubmVjdGlvbiByZXRyaWVzXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBNYXRoLm1heCh0aGlzLl9yZXRyeUNvdW50LCAwKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShSZWNvbm5lY3RpbmdXZWJTb2NrZXQucHJvdG90eXBlLCBcImJ1ZmZlcmVkQW1vdW50XCIsIHtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBUaGUgbnVtYmVyIG9mIGJ5dGVzIG9mIGRhdGEgdGhhdCBoYXZlIGJlZW4gcXVldWVkIHVzaW5nIGNhbGxzIHRvIHNlbmQoKSBidXQgbm90IHlldFxyXG4gICAgICAgICAqIHRyYW5zbWl0dGVkIHRvIHRoZSBuZXR3b3JrLiBUaGlzIHZhbHVlIHJlc2V0cyB0byB6ZXJvIG9uY2UgYWxsIHF1ZXVlZCBkYXRhIGhhcyBiZWVuIHNlbnQuXHJcbiAgICAgICAgICogVGhpcyB2YWx1ZSBkb2VzIG5vdCByZXNldCB0byB6ZXJvIHdoZW4gdGhlIGNvbm5lY3Rpb24gaXMgY2xvc2VkOyBpZiB5b3Uga2VlcCBjYWxsaW5nIHNlbmQoKSxcclxuICAgICAgICAgKiB0aGlzIHdpbGwgY29udGludWUgdG8gY2xpbWIuIFJlYWQgb25seVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgYnl0ZXMgPSB0aGlzLl9tZXNzYWdlUXVldWUucmVkdWNlKGZ1bmN0aW9uIChhY2MsIG1lc3NhZ2UpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgbWVzc2FnZSA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgICAgICAgICAgICAgICBhY2MgKz0gbWVzc2FnZS5sZW5ndGg7IC8vIG5vdCBieXRlIHNpemVcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKG1lc3NhZ2UgaW5zdGFuY2VvZiBCbG9iKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYWNjICs9IG1lc3NhZ2Uuc2l6ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGFjYyArPSBtZXNzYWdlLmJ5dGVMZW5ndGg7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gYWNjO1xyXG4gICAgICAgICAgICB9LCAwKTtcclxuICAgICAgICAgICAgcmV0dXJuIGJ5dGVzICsgKHRoaXMuX3dzID8gdGhpcy5fd3MuYnVmZmVyZWRBbW91bnQgOiAwKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShSZWNvbm5lY3RpbmdXZWJTb2NrZXQucHJvdG90eXBlLCBcImV4dGVuc2lvbnNcIiwge1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFRoZSBleHRlbnNpb25zIHNlbGVjdGVkIGJ5IHRoZSBzZXJ2ZXIuIFRoaXMgaXMgY3VycmVudGx5IG9ubHkgdGhlIGVtcHR5IHN0cmluZyBvciBhIGxpc3Qgb2ZcclxuICAgICAgICAgKiBleHRlbnNpb25zIGFzIG5lZ290aWF0ZWQgYnkgdGhlIGNvbm5lY3Rpb25cclxuICAgICAgICAgKi9cclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3dzID8gdGhpcy5fd3MuZXh0ZW5zaW9ucyA6ICcnO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFJlY29ubmVjdGluZ1dlYlNvY2tldC5wcm90b3R5cGUsIFwicHJvdG9jb2xcIiwge1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEEgc3RyaW5nIGluZGljYXRpbmcgdGhlIG5hbWUgb2YgdGhlIHN1Yi1wcm90b2NvbCB0aGUgc2VydmVyIHNlbGVjdGVkO1xyXG4gICAgICAgICAqIHRoaXMgd2lsbCBiZSBvbmUgb2YgdGhlIHN0cmluZ3Mgc3BlY2lmaWVkIGluIHRoZSBwcm90b2NvbHMgcGFyYW1ldGVyIHdoZW4gY3JlYXRpbmcgdGhlXHJcbiAgICAgICAgICogV2ViU29ja2V0IG9iamVjdFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fd3MgPyB0aGlzLl93cy5wcm90b2NvbCA6ICcnO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFJlY29ubmVjdGluZ1dlYlNvY2tldC5wcm90b3R5cGUsIFwicmVhZHlTdGF0ZVwiLCB7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogVGhlIGN1cnJlbnQgc3RhdGUgb2YgdGhlIGNvbm5lY3Rpb247IHRoaXMgaXMgb25lIG9mIHRoZSBSZWFkeSBzdGF0ZSBjb25zdGFudHNcclxuICAgICAgICAgKi9cclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3dzID8gdGhpcy5fd3MucmVhZHlTdGF0ZSA6IFJlY29ubmVjdGluZ1dlYlNvY2tldC5DT05ORUNUSU5HO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFJlY29ubmVjdGluZ1dlYlNvY2tldC5wcm90b3R5cGUsIFwidXJsXCIsIHtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBUaGUgVVJMIGFzIHJlc29sdmVkIGJ5IHRoZSBjb25zdHJ1Y3RvclxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fd3MgPyB0aGlzLl93cy51cmwgOiAnJztcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIC8qKlxyXG4gICAgICogQ2xvc2VzIHRoZSBXZWJTb2NrZXQgY29ubmVjdGlvbiBvciBjb25uZWN0aW9uIGF0dGVtcHQsIGlmIGFueS4gSWYgdGhlIGNvbm5lY3Rpb24gaXMgYWxyZWFkeVxyXG4gICAgICogQ0xPU0VELCB0aGlzIG1ldGhvZCBkb2VzIG5vdGhpbmdcclxuICAgICAqL1xyXG4gICAgUmVjb25uZWN0aW5nV2ViU29ja2V0LnByb3RvdHlwZS5jbG9zZSA9IGZ1bmN0aW9uIChjb2RlLCByZWFzb24pIHtcclxuICAgICAgICBpZiAoY29kZSA9PT0gdm9pZCAwKSB7IGNvZGUgPSAxMDAwOyB9XHJcbiAgICAgICAgdGhpcy5fY2xvc2VDYWxsZWQgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuX3Nob3VsZFJlY29ubmVjdCA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuX2NsZWFyVGltZW91dHMoKTtcclxuICAgICAgICBpZiAoIXRoaXMuX3dzKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2RlYnVnKCdjbG9zZSBlbnF1ZXVlZDogbm8gd3MgaW5zdGFuY2UnKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5fd3MucmVhZHlTdGF0ZSA9PT0gdGhpcy5DTE9TRUQpIHtcclxuICAgICAgICAgICAgdGhpcy5fZGVidWcoJ2Nsb3NlOiBhbHJlYWR5IGNsb3NlZCcpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuX3dzLmNsb3NlKGNvZGUsIHJlYXNvbik7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBDbG9zZXMgdGhlIFdlYlNvY2tldCBjb25uZWN0aW9uIG9yIGNvbm5lY3Rpb24gYXR0ZW1wdCBhbmQgY29ubmVjdHMgYWdhaW4uXHJcbiAgICAgKiBSZXNldHMgcmV0cnkgY291bnRlcjtcclxuICAgICAqL1xyXG4gICAgUmVjb25uZWN0aW5nV2ViU29ja2V0LnByb3RvdHlwZS5yZWNvbm5lY3QgPSBmdW5jdGlvbiAoY29kZSwgcmVhc29uKSB7XHJcbiAgICAgICAgdGhpcy5fc2hvdWxkUmVjb25uZWN0ID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLl9jbG9zZUNhbGxlZCA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuX3JldHJ5Q291bnQgPSAtMTtcclxuICAgICAgICBpZiAoIXRoaXMuX3dzIHx8IHRoaXMuX3dzLnJlYWR5U3RhdGUgPT09IHRoaXMuQ0xPU0VEKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2Nvbm5lY3QoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2Rpc2Nvbm5lY3QoY29kZSwgcmVhc29uKTtcclxuICAgICAgICAgICAgdGhpcy5fY29ubmVjdCgpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEVucXVldWUgc3BlY2lmaWVkIGRhdGEgdG8gYmUgdHJhbnNtaXR0ZWQgdG8gdGhlIHNlcnZlciBvdmVyIHRoZSBXZWJTb2NrZXQgY29ubmVjdGlvblxyXG4gICAgICovXHJcbiAgICBSZWNvbm5lY3RpbmdXZWJTb2NrZXQucHJvdG90eXBlLnNlbmQgPSBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgIGlmICh0aGlzLl93cyAmJiB0aGlzLl93cy5yZWFkeVN0YXRlID09PSB0aGlzLk9QRU4pIHtcclxuICAgICAgICAgICAgdGhpcy5fZGVidWcoJ3NlbmQnLCBkYXRhKTtcclxuICAgICAgICAgICAgdGhpcy5fd3Muc2VuZChkYXRhKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2RlYnVnKCdlbnF1ZXVlJywgZGF0YSk7XHJcbiAgICAgICAgICAgIHRoaXMuX21lc3NhZ2VRdWV1ZS5wdXNoKGRhdGEpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFJlZ2lzdGVyIGFuIGV2ZW50IGhhbmRsZXIgb2YgYSBzcGVjaWZpYyBldmVudCB0eXBlXHJcbiAgICAgKi9cclxuICAgIFJlY29ubmVjdGluZ1dlYlNvY2tldC5wcm90b3R5cGUuYWRkRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uICh0eXBlLCBsaXN0ZW5lcikge1xyXG4gICAgICAgIGlmICh0aGlzLl9saXN0ZW5lcnNbdHlwZV0pIHtcclxuICAgICAgICAgICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgICAgICAgICB0aGlzLl9saXN0ZW5lcnNbdHlwZV0ucHVzaChsaXN0ZW5lcik7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogUmVtb3ZlcyBhbiBldmVudCBsaXN0ZW5lclxyXG4gICAgICovXHJcbiAgICBSZWNvbm5lY3RpbmdXZWJTb2NrZXQucHJvdG90eXBlLnJlbW92ZUV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbiAodHlwZSwgbGlzdGVuZXIpIHtcclxuICAgICAgICBpZiAodGhpcy5fbGlzdGVuZXJzW3R5cGVdKSB7XHJcbiAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcclxuICAgICAgICAgICAgdGhpcy5fbGlzdGVuZXJzW3R5cGVdID0gdGhpcy5fbGlzdGVuZXJzW3R5cGVdLmZpbHRlcihmdW5jdGlvbiAobCkgeyByZXR1cm4gbCAhPT0gbGlzdGVuZXI7IH0pO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBSZWNvbm5lY3RpbmdXZWJTb2NrZXQucHJvdG90eXBlLl9kZWJ1ZyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgYXJncyA9IFtdO1xyXG4gICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgIGFyZ3NbX2ldID0gYXJndW1lbnRzW19pXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuX29wdGlvbnMuZGVidWcpIHtcclxuICAgICAgICAgICAgLy8gbm90IHVzaW5nIHNwcmVhZCBiZWNhdXNlIGNvbXBpbGVkIHZlcnNpb24gdXNlcyBTeW1ib2xzXHJcbiAgICAgICAgICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZVxyXG4gICAgICAgICAgICBjb25zb2xlLmxvZy5hcHBseShjb25zb2xlLCBbJ1JXUz4nXS5jb25jYXQoYXJncykpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBSZWNvbm5lY3RpbmdXZWJTb2NrZXQucHJvdG90eXBlLl9nZXROZXh0RGVsYXkgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIF9hID0gdGhpcy5fb3B0aW9ucywgX2IgPSBfYS5yZWNvbm5lY3Rpb25EZWxheUdyb3dGYWN0b3IsIHJlY29ubmVjdGlvbkRlbGF5R3Jvd0ZhY3RvciA9IF9iID09PSB2b2lkIDAgPyBERUZBVUxULnJlY29ubmVjdGlvbkRlbGF5R3Jvd0ZhY3RvciA6IF9iLCBfYyA9IF9hLm1pblJlY29ubmVjdGlvbkRlbGF5LCBtaW5SZWNvbm5lY3Rpb25EZWxheSA9IF9jID09PSB2b2lkIDAgPyBERUZBVUxULm1pblJlY29ubmVjdGlvbkRlbGF5IDogX2MsIF9kID0gX2EubWF4UmVjb25uZWN0aW9uRGVsYXksIG1heFJlY29ubmVjdGlvbkRlbGF5ID0gX2QgPT09IHZvaWQgMCA/IERFRkFVTFQubWF4UmVjb25uZWN0aW9uRGVsYXkgOiBfZDtcclxuICAgICAgICB2YXIgZGVsYXkgPSBtaW5SZWNvbm5lY3Rpb25EZWxheTtcclxuICAgICAgICBpZiAodGhpcy5fcmV0cnlDb3VudCA+IDApIHtcclxuICAgICAgICAgICAgZGVsYXkgPVxyXG4gICAgICAgICAgICAgICAgbWluUmVjb25uZWN0aW9uRGVsYXkgKiBNYXRoLnBvdyhyZWNvbm5lY3Rpb25EZWxheUdyb3dGYWN0b3IsIHRoaXMuX3JldHJ5Q291bnQgLSAxKTtcclxuICAgICAgICAgICAgaWYgKGRlbGF5ID4gbWF4UmVjb25uZWN0aW9uRGVsYXkpIHtcclxuICAgICAgICAgICAgICAgIGRlbGF5ID0gbWF4UmVjb25uZWN0aW9uRGVsYXk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5fZGVidWcoJ25leHQgZGVsYXknLCBkZWxheSk7XHJcbiAgICAgICAgcmV0dXJuIGRlbGF5O1xyXG4gICAgfTtcclxuICAgIFJlY29ubmVjdGluZ1dlYlNvY2tldC5wcm90b3R5cGUuX3dhaXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHtcclxuICAgICAgICAgICAgc2V0VGltZW91dChyZXNvbHZlLCBfdGhpcy5fZ2V0TmV4dERlbGF5KCkpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIFJlY29ubmVjdGluZ1dlYlNvY2tldC5wcm90b3R5cGUuX2dldE5leHRVcmwgPSBmdW5jdGlvbiAodXJsUHJvdmlkZXIpIHtcclxuICAgICAgICBpZiAodHlwZW9mIHVybFByb3ZpZGVyID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHVybFByb3ZpZGVyKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHR5cGVvZiB1cmxQcm92aWRlciA9PT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgICAgICB2YXIgdXJsID0gdXJsUHJvdmlkZXIoKTtcclxuICAgICAgICAgICAgaWYgKHR5cGVvZiB1cmwgPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHVybCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHVybC50aGVuKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdXJsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRocm93IEVycm9yKCdJbnZhbGlkIFVSTCcpO1xyXG4gICAgfTtcclxuICAgIFJlY29ubmVjdGluZ1dlYlNvY2tldC5wcm90b3R5cGUuX2Nvbm5lY3QgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICBpZiAodGhpcy5fY29ubmVjdExvY2sgfHwgIXRoaXMuX3Nob3VsZFJlY29ubmVjdCkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuX2Nvbm5lY3RMb2NrID0gdHJ1ZTtcclxuICAgICAgICB2YXIgX2EgPSB0aGlzLl9vcHRpb25zLCBfYiA9IF9hLm1heFJldHJpZXMsIG1heFJldHJpZXMgPSBfYiA9PT0gdm9pZCAwID8gREVGQVVMVC5tYXhSZXRyaWVzIDogX2IsIF9jID0gX2EuY29ubmVjdGlvblRpbWVvdXQsIGNvbm5lY3Rpb25UaW1lb3V0ID0gX2MgPT09IHZvaWQgMCA/IERFRkFVTFQuY29ubmVjdGlvblRpbWVvdXQgOiBfYywgX2QgPSBfYS5XZWJTb2NrZXQsIFdlYlNvY2tldCA9IF9kID09PSB2b2lkIDAgPyBnZXRHbG9iYWxXZWJTb2NrZXQoKSA6IF9kO1xyXG4gICAgICAgIGlmICh0aGlzLl9yZXRyeUNvdW50ID49IG1heFJldHJpZXMpIHtcclxuICAgICAgICAgICAgdGhpcy5fZGVidWcoJ21heCByZXRyaWVzIHJlYWNoZWQnLCB0aGlzLl9yZXRyeUNvdW50LCAnPj0nLCBtYXhSZXRyaWVzKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLl9yZXRyeUNvdW50Kys7XHJcbiAgICAgICAgdGhpcy5fZGVidWcoJ2Nvbm5lY3QnLCB0aGlzLl9yZXRyeUNvdW50KTtcclxuICAgICAgICB0aGlzLl9yZW1vdmVMaXN0ZW5lcnMoKTtcclxuICAgICAgICBpZiAoIWlzV2ViU29ja2V0KFdlYlNvY2tldCkpIHtcclxuICAgICAgICAgICAgdGhyb3cgRXJyb3IoJ05vIHZhbGlkIFdlYlNvY2tldCBjbGFzcyBwcm92aWRlZCcpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLl93YWl0KClcclxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKCkgeyByZXR1cm4gX3RoaXMuX2dldE5leHRVcmwoX3RoaXMuX3VybCk7IH0pXHJcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uICh1cmwpIHtcclxuICAgICAgICAgICAgLy8gY2xvc2UgY291bGQgYmUgY2FsbGVkIGJlZm9yZSBjcmVhdGluZyB0aGUgd3NcclxuICAgICAgICAgICAgaWYgKF90aGlzLl9jbG9zZUNhbGxlZCkge1xyXG4gICAgICAgICAgICAgICAgX3RoaXMuX2Nvbm5lY3RMb2NrID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgX3RoaXMuX2RlYnVnKCdjb25uZWN0JywgeyB1cmw6IHVybCwgcHJvdG9jb2xzOiBfdGhpcy5fcHJvdG9jb2xzIH0pO1xyXG4gICAgICAgICAgICBfdGhpcy5fd3MgPSBfdGhpcy5fcHJvdG9jb2xzXHJcbiAgICAgICAgICAgICAgICA/IG5ldyBXZWJTb2NrZXQodXJsLCBfdGhpcy5fcHJvdG9jb2xzKVxyXG4gICAgICAgICAgICAgICAgOiBuZXcgV2ViU29ja2V0KHVybCk7XHJcbiAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcclxuICAgICAgICAgICAgX3RoaXMuX3dzLmJpbmFyeVR5cGUgPSBfdGhpcy5fYmluYXJ5VHlwZTtcclxuICAgICAgICAgICAgX3RoaXMuX2Nvbm5lY3RMb2NrID0gZmFsc2U7XHJcbiAgICAgICAgICAgIF90aGlzLl9hZGRMaXN0ZW5lcnMoKTtcclxuICAgICAgICAgICAgX3RoaXMuX2Nvbm5lY3RUaW1lb3V0ID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7IHJldHVybiBfdGhpcy5faGFuZGxlVGltZW91dCgpOyB9LCBjb25uZWN0aW9uVGltZW91dCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgUmVjb25uZWN0aW5nV2ViU29ja2V0LnByb3RvdHlwZS5faGFuZGxlVGltZW91dCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLl9kZWJ1ZygndGltZW91dCBldmVudCcpO1xyXG4gICAgICAgIHRoaXMuX2hhbmRsZUVycm9yKG5ldyBFcnJvckV2ZW50KEVycm9yKCdUSU1FT1VUJyksIHRoaXMpKTtcclxuICAgIH07XHJcbiAgICBSZWNvbm5lY3RpbmdXZWJTb2NrZXQucHJvdG90eXBlLl9kaXNjb25uZWN0ID0gZnVuY3Rpb24gKGNvZGUsIHJlYXNvbikge1xyXG4gICAgICAgIGlmIChjb2RlID09PSB2b2lkIDApIHsgY29kZSA9IDEwMDA7IH1cclxuICAgICAgICB0aGlzLl9jbGVhclRpbWVvdXRzKCk7XHJcbiAgICAgICAgaWYgKCF0aGlzLl93cykge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuX3JlbW92ZUxpc3RlbmVycygpO1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3dzLmNsb3NlKGNvZGUsIHJlYXNvbik7XHJcbiAgICAgICAgICAgIHRoaXMuX2hhbmRsZUNsb3NlKG5ldyBDbG9zZUV2ZW50KGNvZGUsIHJlYXNvbiwgdGhpcykpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgLy8gaWdub3JlXHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIFJlY29ubmVjdGluZ1dlYlNvY2tldC5wcm90b3R5cGUuX2FjY2VwdE9wZW4gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5fZGVidWcoJ2FjY2VwdCBvcGVuJyk7XHJcbiAgICAgICAgdGhpcy5fcmV0cnlDb3VudCA9IDA7XHJcbiAgICB9O1xyXG4gICAgUmVjb25uZWN0aW5nV2ViU29ja2V0LnByb3RvdHlwZS5fY2FsbEV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbiAoZXZlbnQsIGxpc3RlbmVyKSB7XHJcbiAgICAgICAgaWYgKCdoYW5kbGVFdmVudCcgaW4gbGlzdGVuZXIpIHtcclxuICAgICAgICAgICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgICAgICAgICBsaXN0ZW5lci5oYW5kbGVFdmVudChldmVudCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgICAgICAgIGxpc3RlbmVyKGV2ZW50KTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgUmVjb25uZWN0aW5nV2ViU29ja2V0LnByb3RvdHlwZS5fcmVtb3ZlTGlzdGVuZXJzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICghdGhpcy5fd3MpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLl9kZWJ1ZygncmVtb3ZlTGlzdGVuZXJzJyk7XHJcbiAgICAgICAgdGhpcy5fd3MucmVtb3ZlRXZlbnRMaXN0ZW5lcignb3BlbicsIHRoaXMuX2hhbmRsZU9wZW4pO1xyXG4gICAgICAgIHRoaXMuX3dzLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2Nsb3NlJywgdGhpcy5faGFuZGxlQ2xvc2UpO1xyXG4gICAgICAgIHRoaXMuX3dzLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCB0aGlzLl9oYW5kbGVNZXNzYWdlKTtcclxuICAgICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgICAgdGhpcy5fd3MucmVtb3ZlRXZlbnRMaXN0ZW5lcignZXJyb3InLCB0aGlzLl9oYW5kbGVFcnJvcik7XHJcbiAgICB9O1xyXG4gICAgUmVjb25uZWN0aW5nV2ViU29ja2V0LnByb3RvdHlwZS5fYWRkTGlzdGVuZXJzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICghdGhpcy5fd3MpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLl9kZWJ1ZygnYWRkTGlzdGVuZXJzJyk7XHJcbiAgICAgICAgdGhpcy5fd3MuYWRkRXZlbnRMaXN0ZW5lcignb3BlbicsIHRoaXMuX2hhbmRsZU9wZW4pO1xyXG4gICAgICAgIHRoaXMuX3dzLmFkZEV2ZW50TGlzdGVuZXIoJ2Nsb3NlJywgdGhpcy5faGFuZGxlQ2xvc2UpO1xyXG4gICAgICAgIHRoaXMuX3dzLmFkZEV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCB0aGlzLl9oYW5kbGVNZXNzYWdlKTtcclxuICAgICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgICAgdGhpcy5fd3MuYWRkRXZlbnRMaXN0ZW5lcignZXJyb3InLCB0aGlzLl9oYW5kbGVFcnJvcik7XHJcbiAgICB9O1xyXG4gICAgUmVjb25uZWN0aW5nV2ViU29ja2V0LnByb3RvdHlwZS5fY2xlYXJUaW1lb3V0cyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5fY29ubmVjdFRpbWVvdXQpO1xyXG4gICAgICAgIGNsZWFyVGltZW91dCh0aGlzLl91cHRpbWVUaW1lb3V0KTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gUmVjb25uZWN0aW5nV2ViU29ja2V0O1xyXG59KCkpO1xuXG5leHBvcnQgZGVmYXVsdCBSZWNvbm5lY3RpbmdXZWJTb2NrZXQ7XG4iXSwic291cmNlUm9vdCI6IiJ9