!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("ramda"),require("uuid"),require("pm2"),require("ws")):"function"==typeof define&&define.amd?define("gun-receiver",["ramda","uuid","pm2","ws"],t):"object"==typeof exports?exports["gun-receiver"]=t(require("ramda"),require("uuid"),require("pm2"),require("ws")):e["gun-receiver"]=t(e.ramda,e.uuid,e.pm2,e.ws)}("undefined"!=typeof self?self:this,function(e,t,n,r){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=2)}([function(t,n){t.exports=e},function(e,n){e.exports=t},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"chainInterface",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(t,"Receiver",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"deduplicateMessages",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"allowLeech",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(t,"relayMessages",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"cluster",{enumerable:!0,get:function(){return c.default}}),t.websocketTransport=void 0;var r=a(n(3)),o=a(n(4)),i=a(n(6)),u=a(n(7)),s=a(n(8)),c=a(n(9));function a(e){return e&&e.__esModule?e:{default:e}}var f=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(11));t.websocketTransport=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(0)),i=(r=n(1))&&r.__esModule?r:{default:r};function u(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}t.default=function(e){return e.get=function(t){return function t(n){var r,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c=function(t){var u,c,a=!1,f=t.bind(r),l=function(e){return(a=!0)&&f(u=e)},p={},d={},h={},y=e.connected(function(e){var t=e.json,r=o.prop("@",t),i=d[r],s=o.keys(o.prop("put",t));if(i&&s.push(i),s.length){o.uniq(s).forEach(function(e){if(p[e]){var n=o.path(["put",e],t);n||a||l(),n&&(h[e]=o.mergeDeepLeft(n,h[e]||{}))}});var f=c(n);f!==u&&l(f)}}),_=function(e){if(p[e])return h[e];var t=i.default.v4();return p[e]=t,d[t]=e,y.receive({...s,json:{"#":t,get:{"#":e}},skipValidation:!0}),h[e]};return c=function(e){var t=e[e.length-1];if(1===e.length)return _(t);var r=c(e.slice(0,e.length-1));if(r){var i=o.prop(t,r);return i&&i["#"]?_(i["#"]):(e===n&&l(i),i)}},y.receive({json:{leech:!0}}),c(n),function(){return e.disconnected(y)}},a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o.identity;return new Promise(function(e){var t=c(function(n){e(n),t()})}).then(e)};return r={get:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t([].concat(u(n),[e]),r)},on:c,then:a,once:function(e){return a(e.bind(r))&&r}}}([t],arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})},e.getDiff=function(t){var n=o.keys(t),r={};return n.length?Promise.all(n.map(function(n){return e.get(n,{noRelay:!0}).then(function(o){var i=e.diffNode(o,t[n]);i&&(r[n]=i)})})).then(function(){return o.keys(r).length?r:null}):Promise.resolve({})},e},e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e,t=[],n=s(c(),2),r=n[0],a=n[1],f=s(c(),2),l=f[0],p=f[1];return e={connections:t,connected:function(n){var r=function(e){var t,n=e.db,r=e.send,u={},s=!1,c=function(){return i.default.v4()};return t={send:function(e){return n.processOut({...e,to:t}).then(function(e){return e&&r(e)}).catch(function(t){s||console.error("PISTOL send err",JSON.stringify(e,null,2),e.json.put,t),s=!0})},receive:function(e){var r=e.json,o=e.raw,i=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,["json","raw"]),u=o||JSON.stringify(r,null,2);return n.processIn({...i,db:n,json:{...r,"#":r["#"]||c()},from:t}).catch(function(e){return console.error("PISTOL receive err",e,u)})},get:function(e){return(0,o.path)(e,u)},set:function(e,t){return u=(0,o.assocPath)(e,t,u)},msgId:c}}({db:e,send:n});return t.push(r),r},disconnected:function(e){var n=t.indexOf(e);-1!==n&&t.splice(n,1)},onIn:r,onOut:l,processIn:a,processOut:p,diffNode:u.diffNode}};var r,o=n(0),i=(r=n(1))&&r.__esModule?r:{default:r},u=n(5);function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var u,s=e[Symbol.iterator]();!(r=(u=s.next()).done)&&(n.push(u.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function c(){var e=[];return[function(t){return e.push(t)},function(t){var n=e.slice().reverse();return function e(t){try{var r=n.pop();return t&&r?Promise.resolve(r(t)).then(e):Promise.resolve(t)}catch(e){return Promise.reject(e)}}(t)},function(t){return e=(0,o.without)([t],e)}]}e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.diffNode=void 0;var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(0));var o=JSON.stringify;t.diffNode=function(e,t){var n=((arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)||(new Date).getTime())+6e5,i=r.path(["_",">"],e)||{},u=r.path(["_",">"],t)||{};return r.compose(function(e){var n=r.keys(e);return n.length?r.assoc("_",r.assoc(">",r.pick(n,u),t._),e):null},r.reduce(function(s,c){var a=i[c],f=u[c];if(f>n||!f)return s;if(a&&a>=f)return s;if(a===f){var l=r.prop(c,e),p=r.prop(c,t);if(o(p)<=o(l))return t}return s[c]=t[c],s},{}),r.keys)(u)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(0),o=5e4;t.default=function(e){var t={};return e.onIn(function(e){var n=(0,r.path)(["json","#"],e);return!n||t[n]?null:(t[n]=!0,e)}),setInterval(function(){for(var e=(0,r.keys)(t).reverse();e.length>o;)delete t[e.pop()]},6e4),e},e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(0);function o(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}t.default=function(e){return e.onIn(function(e){return e.from&&e.from.set?(0,r.path)(["json","leech"],e)?void e.from.set(["isLeeching"],!0):([(0,r.path)(["json","get","#"],e)].concat(o((0,r.keys)((0,r.path)(["json","put"],e)))).forEach(function(t){return t&&e.from.set(["hasAskedFor",t],!0)}),e):e}),e.onOut(function(e){var t=e.to,n=e.json,o=e.ignoreLeeching;return!t.get(["isLeeching"])||o?e:(0,r.keys)(n.put).filter(function(e){if(!t.get(["hasAskedFor",e]))return!1;var o=(0,r.path)([e,"_",">"],n.put),i=!1;return!(0,r.keys)(o).length||((0,r.keys)(o).forEach(function(n){var r=t.get(["knownDeltas",e,n])||0,u=parseFloat(o[n])||0;r&&u<=r||(t.set(["knownDeltas",e,n],u),i=!0)}),i)}).length?e:void 0}),e},e.exports=t.default},function(e,t,n){"use strict";var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(0));e.exports=function(e){return e.onIn(function(t){var n=t.from;return t.noRelay?t:(r.without([n],e.connections).forEach(function(e){return e.send(r.assoc("skipValidation",!0,t))}),t)}),e}},function(e,t,n){"use strict";var r,o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(0)),i=(r=n(1))&&r.__esModule?r:{default:r};e.exports=function(e){var t=n(10),r=i.default.v4();return t.launchBus(function(t,n){t&&console.err(t),n.on("process:msg",function(t){t.raw.msg.fromCluster!==r&&"gun:msg"===t.raw.topic&&e.processIn(o.assoc("db",e,t.raw.msg)).catch(function(e){return console.error("PISTOL cluster err",e)})})}),e.onIn(function(e){var t=e.fromCluster;return e.noRelay||t?e:(process.send&&process.send({topic:"gun:msg",msg:o.mergeLeft({fromCluster:r,skipValidation:!0},e)}),e)}),e}},function(e,t){e.exports=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.client=t.server=void 0;var r=n(0),o=u(n(12)),i=u(n(13));function u(e){return e&&e.__esModule?e:{default:e}}var s=(0,r.curry)(function(e,t){var n=!1,r=!0,o=e.connected(function(e){if(e&&(e.json||e.raw)&&r){var o=e.raw||JSON.stringify(e.json);t.send(o,function(e){e&&!n&&(console.warn("ws send err",e),n=!0)})}}),i=setInterval(function(){return o.send({json:{ping:!0},skipValidation:!0})},6e4);return t.addEventListener("close",function(){t.reconnect||(r=!1,clearInterval(i),e.disconnected(o))}),t.addEventListener("message",function e(t){try{var n=t.data||t,r=JSON.parse(n);Array.isArray(r)?r.forEach(e):o.receive({json:r,raw:n})}catch(e){console.error("RECEIVER invalid ws msg",e,t.data)}}),o}),c=(0,r.curry)(function(e,t){var n=e.web,r=e.port;return new o.default.Server({port:n?void 0:r,server:n}).on("connection",s(t)),t});t.server=c;var a=(0,r.curry)(function(e,t){var n=new i.default(e,[],{WebSocket:o.default});return n.addEventListener("open",function(){return s(t,n)}),t});t.client=a},function(e,t){e.exports=r},function(e,t,n){"use strict";n.r(t);
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function o(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var i=function(){return function(e,t){this.target=t,this.type=e}}(),u=function(e){function t(t,n){var r=e.call(this,"error",n)||this;return r.message=t.message,r.error=t,r}return o(t,e),t}(i),s=function(e){function t(t,n,r){void 0===t&&(t=1e3),void 0===n&&(n="");var o=e.call(this,"close",r)||this;return o.wasClean=!0,o.code=t,o.reason=n,o}return o(t,e),t}(i),c=function(){if("undefined"!=typeof WebSocket)return WebSocket},a={maxReconnectionDelay:1e4,minReconnectionDelay:1e3+4e3*Math.random(),minUptime:5e3,reconnectionDelayGrowFactor:1.3,connectionTimeout:4e3,maxRetries:1/0,debug:!1},f=function(){function e(e,t,n){void 0===n&&(n={});var r=this;this._listeners={error:[],message:[],open:[],close:[]},this._retryCount=-1,this._shouldReconnect=!0,this._connectLock=!1,this._binaryType="blob",this._closeCalled=!1,this._messageQueue=[],this.onclose=void 0,this.onerror=void 0,this.onmessage=void 0,this.onopen=void 0,this._handleOpen=function(e){r._debug("open event");var t=r._options.minUptime,n=void 0===t?a.minUptime:t;clearTimeout(r._connectTimeout),r._uptimeTimeout=setTimeout(function(){return r._acceptOpen()},n),r._ws.binaryType=r._binaryType,r._messageQueue.forEach(function(e){return r._ws.send(e)}),r._messageQueue=[],r.onopen&&r.onopen(e),r._listeners.open.forEach(function(t){return r._callEventListener(e,t)})},this._handleMessage=function(e){r._debug("message event"),r.onmessage&&r.onmessage(e),r._listeners.message.forEach(function(t){return r._callEventListener(e,t)})},this._handleError=function(e){r._debug("error event",e.message),r._disconnect(void 0,"TIMEOUT"===e.message?"timeout":void 0),r.onerror&&r.onerror(e),r._debug("exec error listeners"),r._listeners.error.forEach(function(t){return r._callEventListener(e,t)}),r._connect()},this._handleClose=function(e){r._debug("close event"),r._clearTimeouts(),r._shouldReconnect&&r._connect(),r.onclose&&r.onclose(e),r._listeners.close.forEach(function(t){return r._callEventListener(e,t)})},this._url=e,this._protocols=t,this._options=n,this._connect()}return Object.defineProperty(e,"CONNECTING",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(e,"OPEN",{get:function(){return 1},enumerable:!0,configurable:!0}),Object.defineProperty(e,"CLOSING",{get:function(){return 2},enumerable:!0,configurable:!0}),Object.defineProperty(e,"CLOSED",{get:function(){return 3},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"CONNECTING",{get:function(){return e.CONNECTING},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"OPEN",{get:function(){return e.OPEN},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"CLOSING",{get:function(){return e.CLOSING},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"CLOSED",{get:function(){return e.CLOSED},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"binaryType",{get:function(){return this._ws?this._ws.binaryType:this._binaryType},set:function(e){this._binaryType=e,this._ws&&(this._ws.binaryType=e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"retryCount",{get:function(){return Math.max(this._retryCount,0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bufferedAmount",{get:function(){return this._messageQueue.reduce(function(e,t){return"string"==typeof t?e+=t.length:t instanceof Blob?e+=t.size:e+=t.byteLength,e},0)+(this._ws?this._ws.bufferedAmount:0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"extensions",{get:function(){return this._ws?this._ws.extensions:""},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"protocol",{get:function(){return this._ws?this._ws.protocol:""},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"readyState",{get:function(){return this._ws?this._ws.readyState:e.CONNECTING},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"url",{get:function(){return this._ws?this._ws.url:""},enumerable:!0,configurable:!0}),e.prototype.close=function(e,t){void 0===e&&(e=1e3),this._closeCalled=!0,this._shouldReconnect=!1,this._clearTimeouts(),this._ws?this._ws.readyState!==this.CLOSED?this._ws.close(e,t):this._debug("close: already closed"):this._debug("close enqueued: no ws instance")},e.prototype.reconnect=function(e,t){this._shouldReconnect=!0,this._closeCalled=!1,this._retryCount=-1,this._ws&&this._ws.readyState!==this.CLOSED?(this._disconnect(e,t),this._connect()):this._connect()},e.prototype.send=function(e){this._ws&&this._ws.readyState===this.OPEN?(this._debug("send",e),this._ws.send(e)):(this._debug("enqueue",e),this._messageQueue.push(e))},e.prototype.addEventListener=function(e,t){this._listeners[e]&&this._listeners[e].push(t)},e.prototype.removeEventListener=function(e,t){this._listeners[e]&&(this._listeners[e]=this._listeners[e].filter(function(e){return e!==t}))},e.prototype._debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._options.debug&&console.log.apply(console,["RWS>"].concat(e))},e.prototype._getNextDelay=function(){var e=this._options,t=e.reconnectionDelayGrowFactor,n=void 0===t?a.reconnectionDelayGrowFactor:t,r=e.minReconnectionDelay,o=void 0===r?a.minReconnectionDelay:r,i=e.maxReconnectionDelay,u=void 0===i?a.maxReconnectionDelay:i,s=o;return this._retryCount>0&&(s=o*Math.pow(n,this._retryCount-1))>u&&(s=u),this._debug("next delay",s),s},e.prototype._wait=function(){var e=this;return new Promise(function(t){setTimeout(t,e._getNextDelay())})},e.prototype._getNextUrl=function(e){if("string"==typeof e)return Promise.resolve(e);if("function"==typeof e){var t=e();if("string"==typeof t)return Promise.resolve(t);if(t.then)return t}throw Error("Invalid URL")},e.prototype._connect=function(){var e=this;if(!this._connectLock&&this._shouldReconnect){this._connectLock=!0;var t=this._options,n=t.maxRetries,r=void 0===n?a.maxRetries:n,o=t.connectionTimeout,i=void 0===o?a.connectionTimeout:o,u=t.WebSocket,s=void 0===u?c():u;if(this._retryCount>=r)this._debug("max retries reached",this._retryCount,">=",r);else{if(this._retryCount++,this._debug("connect",this._retryCount),this._removeListeners(),"function"!=typeof(f=s)||2!==f.CLOSING)throw Error("No valid WebSocket class provided");var f;this._wait().then(function(){return e._getNextUrl(e._url)}).then(function(t){e._closeCalled?e._connectLock=!1:(e._debug("connect",{url:t,protocols:e._protocols}),e._ws=e._protocols?new s(t,e._protocols):new s(t),e._ws.binaryType=e._binaryType,e._connectLock=!1,e._addListeners(),e._connectTimeout=setTimeout(function(){return e._handleTimeout()},i))})}}},e.prototype._handleTimeout=function(){this._debug("timeout event"),this._handleError(new u(Error("TIMEOUT"),this))},e.prototype._disconnect=function(e,t){if(void 0===e&&(e=1e3),this._clearTimeouts(),this._ws){this._removeListeners();try{this._ws.close(e,t),this._handleClose(new s(e,t,this))}catch(e){}}},e.prototype._acceptOpen=function(){this._debug("accept open"),this._retryCount=0},e.prototype._callEventListener=function(e,t){"handleEvent"in t?t.handleEvent(e):t(e)},e.prototype._removeListeners=function(){this._ws&&(this._debug("removeListeners"),this._ws.removeEventListener("open",this._handleOpen),this._ws.removeEventListener("close",this._handleClose),this._ws.removeEventListener("message",this._handleMessage),this._ws.removeEventListener("error",this._handleError))},e.prototype._addListeners=function(){this._ws&&(this._debug("addListeners"),this._ws.addEventListener("open",this._handleOpen),this._ws.addEventListener("close",this._handleClose),this._ws.addEventListener("message",this._handleMessage),this._ws.addEventListener("error",this._handleError))},e.prototype._clearTimeouts=function(){clearTimeout(this._connectTimeout),clearTimeout(this._uptimeTimeout)},e}();t.default=f}])});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ndW4tcmVjZWl2ZXIvd2VicGFjay91bml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uIiwid2VicGFjazovL2d1bi1yZWNlaXZlci93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9ndW4tcmVjZWl2ZXIvZXh0ZXJuYWwgXCJyYW1kYVwiIiwid2VicGFjazovL2d1bi1yZWNlaXZlci9leHRlcm5hbCBcInV1aWRcIiIsIndlYnBhY2s6Ly9ndW4tcmVjZWl2ZXIvLi9zcmMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vZ3VuLXJlY2VpdmVyLy4vc3JjL2NoYWluLmpzIiwid2VicGFjazovL2d1bi1yZWNlaXZlci8uL3NyYy9jb3JlLmpzIiwid2VicGFjazovL2d1bi1yZWNlaXZlci8uL3NyYy9kaWZmLmpzIiwid2VicGFjazovL2d1bi1yZWNlaXZlci8uL3NyYy9kZWR1cC5qcyIsIndlYnBhY2s6Ly9ndW4tcmVjZWl2ZXIvLi9zcmMvbGVlY2guanMiLCJ3ZWJwYWNrOi8vZ3VuLXJlY2VpdmVyLy4vc3JjL3JlbGF5LmpzIiwid2VicGFjazovL2d1bi1yZWNlaXZlci8uL3NyYy9jbHVzdGVyLmpzIiwid2VicGFjazovL2d1bi1yZWNlaXZlci9leHRlcm5hbCBcInBtMlwiIiwid2VicGFjazovL2d1bi1yZWNlaXZlci8uL3NyYy93ZWJzb2NrZXQuanMiLCJ3ZWJwYWNrOi8vZ3VuLXJlY2VpdmVyL2V4dGVybmFsIFwid3NcIiIsIndlYnBhY2s6Ly9ndW4tcmVjZWl2ZXIvLi9ub2RlX21vZHVsZXMvcmVjb25uZWN0aW5nLXdlYnNvY2tldC9kaXN0L3JlY29ubmVjdGluZy13ZWJzb2NrZXQubWpzIl0sIm5hbWVzIjpbInJvb3QiLCJmYWN0b3J5IiwiZXhwb3J0cyIsIm1vZHVsZSIsInJlcXVpcmUiLCJkZWZpbmUiLCJhbWQiLCJzZWxmIiwidGhpcyIsIl9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfXzBfXyIsIl9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfXzFfXyIsIl9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfXzEwX18iLCJfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFX18xMl9fIiwiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImkiLCJsIiwibW9kdWxlcyIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwidCIsIm1vZGUiLCJfX2VzTW9kdWxlIiwibnMiLCJjcmVhdGUiLCJrZXkiLCJiaW5kIiwibiIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsIl9jaGFpbiIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJfY29yZSIsIl9kZWR1cCIsIl9sZWVjaCIsIl9yZWxheSIsIl9jbHVzdGVyIiwid2Vic29ja2V0VHJhbnNwb3J0IiwiX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQiLCJSIiwiX3V1aWQiLCJkYiIsImdldFBhdGgiLCJrZXlMaXN0IiwidGhpc0NoYWluIiwib3B0cyIsImFyZ3VtZW50cyIsImxlbmd0aCIsInVuZGVmaW5lZCIsIm9uIiwiZm4iLCJnZXRWYWx1ZSIsImhhc1Jlc3BvbnNlIiwiYm91bmQiLCJyZWNlaXZlZCIsInZhbCIsInJlcXVlc3RlZCIsInJlcXVlc3RzIiwiZ3JhcGgiLCJjb25uZWN0aW9uIiwiY29ubmVjdGVkIiwibXNnIiwianNvbiIsImF0IiwicHJvcCIsImF0U291bCIsInNvdWxzIiwia2V5cyIsInB1c2giLCJ1bmlxIiwiZm9yRWFjaCIsInNvdWwiLCJub2RlIiwicGF0aCIsIm1lcmdlRGVlcExlZnQiLCJuZXh0VmFsdWUiLCJnZXROb2RlIiwiaWQiLCJkZWZhdWx0IiwidjQiLCJyZWNlaXZlIiwiIyIsInNraXBWYWxpZGF0aW9uIiwia2wiLCJsYXN0S2V5IiwicGFyZW50VmFsdWUiLCJzbGljZSIsImxlZWNoIiwiZGlzY29ubmVjdGVkIiwidGhlbiIsImlkZW50aXR5IiwiUHJvbWlzZSIsInJlc29sdmUiLCJ1bnN1YnNjcmliZSIsImNvbmNhdCIsIl90b0NvbnN1bWFibGVBcnJheSIsIm9uY2UiLCJnZXREaWZmIiwicHV0IiwiZGlmZnMiLCJhbGwiLCJtYXAiLCJub1JlbGF5IiwiZXhpc3RpbmciLCJkaWZmIiwiZGlmZk5vZGUiLCJwZWVyIiwiY29ubmVjdGlvbnMiLCJfcHJvY2Vzc1F1ZXVlMiIsIl9zbGljZWRUb0FycmF5IiwicHJvY2Vzc1F1ZXVlIiwib25JbiIsInByb2Nlc3NJbiIsIl9wcm9jZXNzUXVldWU0Iiwib25PdXQiLCJwcm9jZXNzT3V0Iiwic2VuZCIsIl9yZWYiLCJzZW5kRm4iLCJzdGF0ZSIsImhhc1JlcG9ydGVkRXJyb3IiLCJtc2dJZCIsInRvIiwiY2F0Y2giLCJlcnIiLCJjb25zb2xlIiwiZXJyb3IiLCJKU09OIiwic3RyaW5naWZ5IiwiX3JlZjIiLCJyYXciLCJfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMiLCJwcmVzZXJ2ZWQiLCJmcm9tIiwiX3JhbWRhIiwic2V0IiwidiIsImFzc29jUGF0aCIsInBpc3RvbENvbm5lY3Rpb24iLCJjb25uZWN0aW9uSWR4IiwiaW5kZXhPZiIsInNwbGljZSIsIl9kaWZmIiwiZm5zIiwicmVtYWluaW5nRm5zIiwicmV2ZXJzZSIsImV4ZWN1dGVOZXh0IiwicG9wIiwiZSIsInJlamVjdCIsIndpdGhvdXQiLCJMZXhpY2FsIiwidXBkYXRlZCIsIm1heFN0YXRlIiwiRGF0ZSIsImdldFRpbWUiLCJleGlzdGluZ1N0YXRlIiwidXBkYXRlZFN0YXRlIiwiY29tcG9zZSIsInZhbHMiLCJhc3NvYyIsInBpY2siLCJfIiwicmVkdWNlIiwidXBkYXRlcyIsImV4aXN0aW5nS2V5U3RhdGUiLCJ1cGRhdGVkS2V5U3RhdGUiLCJleGlzdGluZ1ZhbCIsInVwZGF0ZWRWYWwiLCJNQVhfTVNHX0lEX0NBQ0hFIiwicmVjZWl2ZWRJZHMiLCJzZXRJbnRlcnZhbCIsImlkcyIsImlnbm9yZUxlZWNoaW5nIiwiZmlsdGVyIiwic291bERlbHRhcyIsImhhc1VwZGF0ZXMiLCJrbm93biIsImRlbHRhIiwicGFyc2VGbG9hdCIsInBtMiIsImxhdW5jaEJ1cyIsImJ1cyIsInBhY2tldCIsImZyb21DbHVzdGVyIiwidG9waWMiLCJwcm9jZXNzIiwibWVyZ2VMZWZ0IiwiX3dzIiwiX3JlY29ubmVjdGluZ1dlYnNvY2tldCIsIndzQ29ubmVjdGlvbiIsImN1cnJ5Iiwid3MiLCJoYXNMb2dnZWRFcnIiLCJ3YXJuIiwicGluZ0ludGVydmFsIiwicGluZyIsImFkZEV2ZW50TGlzdGVuZXIiLCJyZWNvbm5lY3QiLCJjbGVhckludGVydmFsIiwiZGF0YSIsInBhcnNlIiwiQXJyYXkiLCJpc0FycmF5Iiwic2VydmVyIiwid2ViIiwicG9ydCIsIlNlcnZlciIsImNsaWVudCIsInVybCIsIldlYlNvY2tldCIsIl9fd2VicGFja19leHBvcnRzX18iLCJleHRlbmRTdGF0aWNzIiwiYiIsInNldFByb3RvdHlwZU9mIiwiX19wcm90b19fIiwiX19leHRlbmRzIiwiX18iLCJjb25zdHJ1Y3RvciIsIkV2ZW50IiwidHlwZSIsInRhcmdldCIsIkVycm9yRXZlbnQiLCJfc3VwZXIiLCJfdGhpcyIsIm1lc3NhZ2UiLCJDbG9zZUV2ZW50IiwiY29kZSIsInJlYXNvbiIsIndhc0NsZWFuIiwiZ2V0R2xvYmFsV2ViU29ja2V0IiwiREVGQVVMVCIsIm1heFJlY29ubmVjdGlvbkRlbGF5IiwibWluUmVjb25uZWN0aW9uRGVsYXkiLCJNYXRoIiwicmFuZG9tIiwibWluVXB0aW1lIiwicmVjb25uZWN0aW9uRGVsYXlHcm93RmFjdG9yIiwiY29ubmVjdGlvblRpbWVvdXQiLCJtYXhSZXRyaWVzIiwiSW5maW5pdHkiLCJkZWJ1ZyIsIlJlY29ubmVjdGluZ1dlYlNvY2tldCIsInByb3RvY29scyIsIm9wdGlvbnMiLCJfbGlzdGVuZXJzIiwib3BlbiIsImNsb3NlIiwiX3JldHJ5Q291bnQiLCJfc2hvdWxkUmVjb25uZWN0IiwiX2Nvbm5lY3RMb2NrIiwiX2JpbmFyeVR5cGUiLCJfY2xvc2VDYWxsZWQiLCJfbWVzc2FnZVF1ZXVlIiwib25jbG9zZSIsIm9uZXJyb3IiLCJvbm1lc3NhZ2UiLCJvbm9wZW4iLCJfaGFuZGxlT3BlbiIsImV2ZW50IiwiX2RlYnVnIiwiX2EiLCJfb3B0aW9ucyIsImNsZWFyVGltZW91dCIsIl9jb25uZWN0VGltZW91dCIsIl91cHRpbWVUaW1lb3V0Iiwic2V0VGltZW91dCIsIl9hY2NlcHRPcGVuIiwiYmluYXJ5VHlwZSIsImxpc3RlbmVyIiwiX2NhbGxFdmVudExpc3RlbmVyIiwiX2hhbmRsZU1lc3NhZ2UiLCJfaGFuZGxlRXJyb3IiLCJfZGlzY29ubmVjdCIsIl9jb25uZWN0IiwiX2hhbmRsZUNsb3NlIiwiX2NsZWFyVGltZW91dHMiLCJfdXJsIiwiX3Byb3RvY29scyIsImNvbmZpZ3VyYWJsZSIsIkNPTk5FQ1RJTkciLCJPUEVOIiwiQ0xPU0lORyIsIkNMT1NFRCIsIm1heCIsImFjYyIsIkJsb2IiLCJzaXplIiwiYnl0ZUxlbmd0aCIsImJ1ZmZlcmVkQW1vdW50IiwiZXh0ZW5zaW9ucyIsInByb3RvY29sIiwicmVhZHlTdGF0ZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJhcmdzIiwiX2kiLCJsb2ciLCJhcHBseSIsIl9nZXROZXh0RGVsYXkiLCJfYiIsIl9jIiwiX2QiLCJkZWxheSIsInBvdyIsIl93YWl0IiwiX2dldE5leHRVcmwiLCJ1cmxQcm92aWRlciIsIkVycm9yIiwiX3JlbW92ZUxpc3RlbmVycyIsInciLCJfYWRkTGlzdGVuZXJzIiwiX2hhbmRsZVRpbWVvdXQiLCJoYW5kbGVFdmVudCJdLCJtYXBwaW5ncyI6IkNBQUEsU0FBQUEsRUFBQUMsR0FDQSxpQkFBQUMsU0FBQSxpQkFBQUMsT0FDQUEsT0FBQUQsUUFBQUQsRUFBQUcsUUFBQSxTQUFBQSxRQUFBLFFBQUFBLFFBQUEsT0FBQUEsUUFBQSxPQUNBLG1CQUFBQyxlQUFBQyxJ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S0FBQXNNLElBQUFTLGlCQUFBLFFBQUEvTSxLQUFBNlIsY0FDQTdSLEtBQUFzTSxJQUFBUyxpQkFBQSxVQUFBL00sS0FBQXlSLGdCQUVBelIsS0FBQXNNLElBQUFTLGlCQUFBLFFBQUEvTSxLQUFBMFIsZ0JBRUE5QixFQUFBeE4sVUFBQTBQLGVBQUEsV0FDQWIsYUFBQWpSLEtBQUFrUixpQkFDQUQsYUFBQWpSLEtBQUFtUixpQkFFQXZCLEVBbmJBLEdBc2JlL0IsRUFBQSIsImZpbGUiOiJndW4tcmVjZWl2ZXIubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIHdlYnBhY2tVbml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uKHJvb3QsIGZhY3RvcnkpIHtcblx0aWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnICYmIHR5cGVvZiBtb2R1bGUgPT09ICdvYmplY3QnKVxuXHRcdG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeShyZXF1aXJlKFwicmFtZGFcIiksIHJlcXVpcmUoXCJ1dWlkXCIpLCByZXF1aXJlKFwicG0yXCIpLCByZXF1aXJlKFwid3NcIikpO1xuXHRlbHNlIGlmKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZClcblx0XHRkZWZpbmUoXCJndW4tcmVjZWl2ZXJcIiwgW1wicmFtZGFcIiwgXCJ1dWlkXCIsIFwicG0yXCIsIFwid3NcIl0sIGZhY3RvcnkpO1xuXHRlbHNlIGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0Jylcblx0XHRleHBvcnRzW1wiZ3VuLXJlY2VpdmVyXCJdID0gZmFjdG9yeShyZXF1aXJlKFwicmFtZGFcIiksIHJlcXVpcmUoXCJ1dWlkXCIpLCByZXF1aXJlKFwicG0yXCIpLCByZXF1aXJlKFwid3NcIikpO1xuXHRlbHNlXG5cdFx0cm9vdFtcImd1bi1yZWNlaXZlclwiXSA9IGZhY3Rvcnkocm9vdFtcInJhbWRhXCJdLCByb290W1widXVpZFwiXSwgcm9vdFtcInBtMlwiXSwgcm9vdFtcIndzXCJdKTtcbn0pKHR5cGVvZiBzZWxmICE9PSAndW5kZWZpbmVkJyA/IHNlbGYgOiB0aGlzLCBmdW5jdGlvbihfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFX18wX18sIF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfXzFfXywgX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV9fMTBfXywgX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV9fMTJfXykge1xucmV0dXJuICIsIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAyKTtcbiIsIm1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV9fMF9fOyIsIm1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV9fMV9fOyIsImV4cG9ydCB7IGRlZmF1bHQgYXMgY2hhaW5JbnRlcmZhY2UgfSBmcm9tIFwiLi9jaGFpblwiO1xuZXhwb3J0IHsgZGVmYXVsdCBhcyBSZWNlaXZlciB9IGZyb20gXCIuL2NvcmVcIjtcbmV4cG9ydCB7IGRlZmF1bHQgYXMgZGVkdXBsaWNhdGVNZXNzYWdlcyB9IGZyb20gXCIuL2RlZHVwXCI7XG5leHBvcnQgeyBkZWZhdWx0IGFzIGFsbG93TGVlY2ggfSBmcm9tIFwiLi9sZWVjaFwiO1xuZXhwb3J0IHsgZGVmYXVsdCBhcyByZWxheU1lc3NhZ2VzIH0gZnJvbSBcIi4vcmVsYXlcIjtcbmV4cG9ydCB7IGRlZmF1bHQgYXMgY2x1c3RlciB9IGZyb20gXCIuL2NsdXN0ZXJcIjtcbmltcG9ydCAqIGFzIHdlYnNvY2tldCBmcm9tIFwiLi93ZWJzb2NrZXRcIjtcblxuZXhwb3J0IGNvbnN0IHdlYnNvY2tldFRyYW5zcG9ydCA9IHdlYnNvY2tldDtcbiIsIi8qIGdsb2JhbHMgUHJvbWlzZSAqL1xuaW1wb3J0ICogYXMgUiBmcm9tIFwicmFtZGFcIjtcbmltcG9ydCB1dWlkIGZyb20gXCJ1dWlkXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGRiID0+IHtcbiAgY29uc3QgZ2V0UGF0aCA9IChrZXlMaXN0LCBvcHRzID0ge30pID0+IHtcbiAgICBsZXQgdGhpc0NoYWluO1xuICAgIGNvbnN0IG9uID0gZm4gPT4ge1xuICAgICAgbGV0IHZhbHVlLCBnZXRWYWx1ZTtcbiAgICAgIGxldCBoYXNSZXNwb25zZSA9IGZhbHNlO1xuICAgICAgY29uc3QgYm91bmQgPSBmbi5iaW5kKHRoaXNDaGFpbik7XG4gICAgICBjb25zdCByZWNlaXZlZCA9IHZhbCA9PiAoaGFzUmVzcG9uc2UgPSB0cnVlKSAmJiBib3VuZCgodmFsdWUgPSB2YWwpKTtcbiAgICAgIGNvbnN0IHJlcXVlc3RlZCA9IHt9O1xuICAgICAgY29uc3QgcmVxdWVzdHMgPSB7fTtcbiAgICAgIGNvbnN0IGdyYXBoID0ge307XG5cbiAgICAgIGNvbnN0IGNvbm5lY3Rpb24gPSBkYi5jb25uZWN0ZWQobXNnID0+IHtcbiAgICAgICAgY29uc3QgeyBqc29uIH0gPSBtc2c7XG4gICAgICAgIGNvbnN0IGF0ID0gUi5wcm9wKFwiQFwiLCBqc29uKTtcbiAgICAgICAgY29uc3QgYXRTb3VsID0gcmVxdWVzdHNbYXRdO1xuICAgICAgICBjb25zdCBzb3VscyA9IFIua2V5cyhSLnByb3AoXCJwdXRcIiwganNvbikpO1xuXG4gICAgICAgIGlmIChhdFNvdWwpIHNvdWxzLnB1c2goYXRTb3VsKTtcbiAgICAgICAgaWYgKCFzb3Vscy5sZW5ndGgpIHJldHVybjtcbiAgICAgICAgUi51bmlxKHNvdWxzKS5mb3JFYWNoKHNvdWwgPT4ge1xuICAgICAgICAgIGlmICghcmVxdWVzdGVkW3NvdWxdKSByZXR1cm47XG4gICAgICAgICAgY29uc3Qgbm9kZSA9IFIucGF0aChbXCJwdXRcIiwgc291bF0sIGpzb24pO1xuXG4gICAgICAgICAgaWYgKCFub2RlICYmICFoYXNSZXNwb25zZSkgcmVjZWl2ZWQoKTtcbiAgICAgICAgICBpZiAobm9kZSkgZ3JhcGhbc291bF0gPSBSLm1lcmdlRGVlcExlZnQobm9kZSwgZ3JhcGhbc291bF0gfHwge30pO1xuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgbmV4dFZhbHVlID0gZ2V0VmFsdWUoa2V5TGlzdCk7XG5cbiAgICAgICAgaWYgKG5leHRWYWx1ZSAhPT0gdmFsdWUpIHJlY2VpdmVkKG5leHRWYWx1ZSk7XG4gICAgICB9KTtcblxuICAgICAgY29uc3QgZ2V0Tm9kZSA9IHNvdWwgPT4ge1xuICAgICAgICBpZiAocmVxdWVzdGVkW3NvdWxdKSByZXR1cm4gZ3JhcGhbc291bF07XG4gICAgICAgIGNvbnN0IGlkID0gdXVpZC52NCgpO1xuXG4gICAgICAgIHJlcXVlc3RlZFtzb3VsXSA9IGlkO1xuICAgICAgICByZXF1ZXN0c1tpZF0gPSBzb3VsO1xuICAgICAgICBjb25uZWN0aW9uLnJlY2VpdmUoe1xuICAgICAgICAgIC4uLm9wdHMsXG4gICAgICAgICAganNvbjogeyBcIiNcIjogaWQsIGdldDogeyBcIiNcIjogc291bCB9IH0sXG4gICAgICAgICAgc2tpcFZhbGlkYXRpb246IHRydWVcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBncmFwaFtzb3VsXTtcbiAgICAgIH07XG5cbiAgICAgIGdldFZhbHVlID0ga2wgPT4ge1xuICAgICAgICBjb25zdCBsYXN0S2V5ID0ga2xba2wubGVuZ3RoIC0gMV07XG5cbiAgICAgICAgaWYgKGtsLmxlbmd0aCA9PT0gMSkgcmV0dXJuIGdldE5vZGUobGFzdEtleSk7XG4gICAgICAgIGNvbnN0IHBhcmVudFZhbHVlID0gZ2V0VmFsdWUoa2wuc2xpY2UoMCwga2wubGVuZ3RoIC0gMSkpO1xuXG4gICAgICAgIGlmICghcGFyZW50VmFsdWUpIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIGNvbnN0IHZhbHVlID0gUi5wcm9wKGxhc3RLZXksIHBhcmVudFZhbHVlKTtcblxuICAgICAgICBpZiAodmFsdWUgJiYgdmFsdWVbXCIjXCJdKSByZXR1cm4gZ2V0Tm9kZSh2YWx1ZVtcIiNcIl0pO1xuICAgICAgICBpZiAoa2wgPT09IGtleUxpc3QpIHJlY2VpdmVkKHZhbHVlKTtcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgfTtcblxuICAgICAgY29ubmVjdGlvbi5yZWNlaXZlKHsganNvbjogeyBsZWVjaDogdHJ1ZSB9IH0pO1xuICAgICAgZ2V0VmFsdWUoa2V5TGlzdCk7XG4gICAgICByZXR1cm4gKCkgPT4gZGIuZGlzY29ubmVjdGVkKGNvbm5lY3Rpb24pO1xuICAgIH07XG5cbiAgICBjb25zdCB0aGVuID0gKGZuID0gUi5pZGVudGl0eSkgPT5cbiAgICAgIG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xuICAgICAgICBjb25zdCB1bnN1YnNjcmliZSA9IG9uKHZhbCA9PiB7XG4gICAgICAgICAgcmVzb2x2ZSh2YWwpO1xuICAgICAgICAgIHVuc3Vic2NyaWJlKCk7XG4gICAgICAgIH0pO1xuICAgICAgfSkudGhlbihmbik7XG5cbiAgICBjb25zdCBvbmNlID0gZm4gPT4gdGhlbihmbi5iaW5kKHRoaXNDaGFpbikpICYmIHRoaXNDaGFpbjtcbiAgICBjb25zdCBnZXQgPSAoa2V5LCBvcHRzID0ge30pID0+IGdldFBhdGgoWy4uLmtleUxpc3QsIGtleV0sIG9wdHMpO1xuXG4gICAgdGhpc0NoYWluID0geyBnZXQsIG9uLCB0aGVuLCBvbmNlIH07XG4gICAgcmV0dXJuIHRoaXNDaGFpbjtcbiAgfTtcblxuICBjb25zdCBnZXREaWZmID0gcHV0ID0+IHtcbiAgICBjb25zdCBzb3VscyA9IFIua2V5cyhwdXQpO1xuICAgIGNvbnN0IGRpZmZzID0ge307XG5cbiAgICBpZiAoIXNvdWxzLmxlbmd0aCkgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh7fSk7XG4gICAgcmV0dXJuIFByb21pc2UuYWxsKFxuICAgICAgc291bHMubWFwKHNvdWwgPT5cbiAgICAgICAgZGIuZ2V0KHNvdWwsIHsgbm9SZWxheTogdHJ1ZSB9KS50aGVuKGV4aXN0aW5nID0+IHtcbiAgICAgICAgICBjb25zdCBkaWZmID0gZGIuZGlmZk5vZGUoZXhpc3RpbmcsIHB1dFtzb3VsXSk7XG5cbiAgICAgICAgICBpZiAoZGlmZikgZGlmZnNbc291bF0gPSBkaWZmO1xuICAgICAgICB9KVxuICAgICAgKVxuICAgICkudGhlbigoKSA9PiB7XG4gICAgICBpZiAoIVIua2V5cyhkaWZmcykubGVuZ3RoKSByZXR1cm4gbnVsbDtcbiAgICAgIHJldHVybiBkaWZmcztcbiAgICB9KTtcbiAgfTtcblxuICBkYi5nZXQgPSAoa2V5LCBvcHRzID0ge30pID0+IGdldFBhdGgoW2tleV0sIG9wdHMpO1xuICBkYi5nZXREaWZmID0gZ2V0RGlmZjtcbiAgcmV0dXJuIGRiO1xufTtcbiIsIi8qIGdsb2JhbHMgUHJvbWlzZSAqL1xuaW1wb3J0IHsgYXNzb2NQYXRoLCBwYXRoLCB3aXRob3V0IH0gZnJvbSBcInJhbWRhXCI7XG5pbXBvcnQgdXVpZCBmcm9tIFwidXVpZFwiO1xuaW1wb3J0IHsgZGlmZk5vZGUgfSBmcm9tIFwiLi9kaWZmXCI7XG5cbmZ1bmN0aW9uIHByb2Nlc3NRdWV1ZSgpIHtcbiAgbGV0IGZucyA9IFtdO1xuICBjb25zdCBxdWV1ZSA9IGZuID0+IGZucy5wdXNoKGZuKTtcbiAgY29uc3QgZGVxdWV1ZSA9IGZuID0+IChmbnMgPSB3aXRob3V0KFtmbl0sIGZucykpO1xuXG4gIGZ1bmN0aW9uIGV4ZWN1dGUobXNnKSB7XG4gICAgY29uc3QgcmVtYWluaW5nRm5zID0gZm5zLnNsaWNlKCkucmV2ZXJzZSgpO1xuICAgIGNvbnN0IGV4ZWN1dGVOZXh0ID0gbXNnID0+IHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGZuID0gcmVtYWluaW5nRm5zLnBvcCgpO1xuXG4gICAgICAgIGlmIChtc2cgJiYgZm4pIHJldHVybiBQcm9taXNlLnJlc29sdmUoZm4obXNnKSkudGhlbihleGVjdXRlTmV4dCk7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUobXNnKTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGUpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICByZXR1cm4gZXhlY3V0ZU5leHQobXNnKTtcbiAgfVxuXG4gIHJldHVybiBbcXVldWUsIGV4ZWN1dGUsIGRlcXVldWVdO1xufVxuXG5mdW5jdGlvbiBwaXN0b2xDb25uZWN0aW9uKHsgZGIsIHNlbmQ6IHNlbmRGbiB9KSB7XG4gIGxldCBjb25uZWN0aW9uO1xuICBsZXQgc3RhdGUgPSB7fTtcbiAgbGV0IGhhc1JlcG9ydGVkRXJyb3IgPSBmYWxzZTtcbiAgY29uc3QgZ2V0ID0gcCA9PiBwYXRoKHAsIHN0YXRlKTtcbiAgY29uc3Qgc2V0ID0gKHAsIHYpID0+IChzdGF0ZSA9IGFzc29jUGF0aChwLCB2LCBzdGF0ZSkpOyAvLyAmJiBjb25zb2xlLmxvZyhzdGF0ZSk7XG4gIGNvbnN0IG1zZ0lkID0gKCkgPT4gdXVpZC52NCgpO1xuICBjb25zdCBzZW5kID0gbXNnID0+XG4gICAgZGJcbiAgICAgIC5wcm9jZXNzT3V0KHsgLi4ubXNnLCB0bzogY29ubmVjdGlvbiB9KVxuICAgICAgLnRoZW4ociA9PiByICYmIHNlbmRGbihyKSlcbiAgICAgIC5jYXRjaChlcnIgPT4ge1xuICAgICAgICBpZiAoIWhhc1JlcG9ydGVkRXJyb3IpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKFxuICAgICAgICAgICAgXCJQSVNUT0wgc2VuZCBlcnJcIixcbiAgICAgICAgICAgIEpTT04uc3RyaW5naWZ5KG1zZywgbnVsbCwgMiksXG4gICAgICAgICAgICBtc2cuanNvbi5wdXQsXG4gICAgICAgICAgICBlcnJcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICAgIGhhc1JlcG9ydGVkRXJyb3IgPSB0cnVlO1xuICAgICAgfSk7XG4gIGNvbnN0IHJlY2VpdmUgPSAoeyBqc29uLCByYXcsIC4uLm9wdHMgfSkgPT4ge1xuICAgIGNvbnN0IHByZXNlcnZlZCA9IHJhdyB8fCBKU09OLnN0cmluZ2lmeShqc29uLCBudWxsLCAyKTtcblxuICAgIHJldHVybiBkYlxuICAgICAgLnByb2Nlc3NJbih7XG4gICAgICAgIC4uLm9wdHMsXG4gICAgICAgIGRiLFxuICAgICAgICBqc29uOiB7IC4uLmpzb24sIFwiI1wiOiBqc29uW1wiI1wiXSB8fCBtc2dJZCgpIH0sXG4gICAgICAgIGZyb206IGNvbm5lY3Rpb25cbiAgICAgIH0pXG4gICAgICAuY2F0Y2goZXJyID0+IGNvbnNvbGUuZXJyb3IoXCJQSVNUT0wgcmVjZWl2ZSBlcnJcIiwgZXJyLCBwcmVzZXJ2ZWQpKTtcbiAgfTtcblxuICBjb25uZWN0aW9uID0geyBzZW5kLCByZWNlaXZlLCBnZXQsIHNldCwgbXNnSWQgfTtcbiAgcmV0dXJuIGNvbm5lY3Rpb247XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIFJlY2VpdmVyKCkge1xuICBsZXQgcGVlcjtcbiAgY29uc3QgY29ubmVjdGlvbnMgPSBbXTtcbiAgY29uc3QgW29uSW4sIHByb2Nlc3NJbl0gPSBwcm9jZXNzUXVldWUoKTtcbiAgY29uc3QgW29uT3V0LCBwcm9jZXNzT3V0XSA9IHByb2Nlc3NRdWV1ZSgpO1xuXG4gIGZ1bmN0aW9uIGNvbm5lY3RlZChzZW5kKSB7XG4gICAgY29uc3QgY29ubmVjdGlvbiA9IHBpc3RvbENvbm5lY3Rpb24oeyBkYjogcGVlciwgc2VuZCB9KTtcblxuICAgIGNvbm5lY3Rpb25zLnB1c2goY29ubmVjdGlvbik7XG4gICAgcmV0dXJuIGNvbm5lY3Rpb247XG4gIH1cblxuICBmdW5jdGlvbiBkaXNjb25uZWN0ZWQoY29ubmVjdGlvbikge1xuICAgIGNvbnN0IGNvbm5lY3Rpb25JZHggPSBjb25uZWN0aW9ucy5pbmRleE9mKGNvbm5lY3Rpb24pO1xuXG4gICAgaWYgKGNvbm5lY3Rpb25JZHggIT09IC0xKSBjb25uZWN0aW9ucy5zcGxpY2UoY29ubmVjdGlvbklkeCwgMSk7XG4gIH1cblxuICBwZWVyID0ge1xuICAgIGNvbm5lY3Rpb25zLFxuICAgIGNvbm5lY3RlZCxcbiAgICBkaXNjb25uZWN0ZWQsXG4gICAgb25JbixcbiAgICBvbk91dCxcbiAgICBwcm9jZXNzSW4sXG4gICAgcHJvY2Vzc091dCxcbiAgICBkaWZmTm9kZVxuICB9O1xuICByZXR1cm4gcGVlcjtcbn1cbiIsImltcG9ydCAqIGFzIFIgZnJvbSBcInJhbWRhXCI7XG5cbmNvbnN0IEdSQUNFID0gMTAgKiA2MCAqIDEwMDA7IC8vIEhvdyBmYXIgYWhlYWQgY2xvY2sgY2FuIGJlLCB1bmxpa2UgZ3VuIHdlIGp1c3QgZGlzY2FyZCBub3QgZGVmZXJcbmNvbnN0IExleGljYWwgPSBKU09OLnN0cmluZ2lmeTsgLy8gVGhpcyBpcyB3aGF0IEd1biB1c2VzXG5cbmV4cG9ydCBjb25zdCBkaWZmTm9kZSA9IChleGlzdGluZywgdXBkYXRlZCwgbWFjaGluZVN0YXRlID0gbnVsbCkgPT4ge1xuICBsZXQgbWF4U3RhdGUgPSAobWFjaGluZVN0YXRlIHx8IG5ldyBEYXRlKCkuZ2V0VGltZSgpKSArIEdSQUNFOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lXG4gIGNvbnN0IGV4aXN0aW5nU3RhdGUgPSBSLnBhdGgoW1wiX1wiLCBcIj5cIl0sIGV4aXN0aW5nKSB8fCB7fTtcbiAgY29uc3QgdXBkYXRlZFN0YXRlID0gUi5wYXRoKFtcIl9cIiwgXCI+XCJdLCB1cGRhdGVkKSB8fCB7fTtcblxuICByZXR1cm4gUi5jb21wb3NlKFxuICAgIHZhbHMgPT4ge1xuICAgICAgY29uc3Qga2V5cyA9IFIua2V5cyh2YWxzKTtcblxuICAgICAgaWYgKCFrZXlzLmxlbmd0aCkgcmV0dXJuIG51bGw7XG4gICAgICByZXR1cm4gUi5hc3NvYyhcbiAgICAgICAgXCJfXCIsXG4gICAgICAgIFIuYXNzb2MoXCI+XCIsIFIucGljayhrZXlzLCB1cGRhdGVkU3RhdGUpLCB1cGRhdGVkLl8pLFxuICAgICAgICB2YWxzXG4gICAgICApO1xuICAgIH0sXG4gICAgUi5yZWR1Y2UoKHVwZGF0ZXMsIGtleSkgPT4ge1xuICAgICAgY29uc3QgZXhpc3RpbmdLZXlTdGF0ZSA9IGV4aXN0aW5nU3RhdGVba2V5XTtcbiAgICAgIGNvbnN0IHVwZGF0ZWRLZXlTdGF0ZSA9IHVwZGF0ZWRTdGF0ZVtrZXldO1xuXG4gICAgICBpZiAodXBkYXRlZEtleVN0YXRlID4gbWF4U3RhdGUgfHwgIXVwZGF0ZWRLZXlTdGF0ZSkgcmV0dXJuIHVwZGF0ZXM7XG4gICAgICBpZiAoZXhpc3RpbmdLZXlTdGF0ZSAmJiBleGlzdGluZ0tleVN0YXRlID49IHVwZGF0ZWRLZXlTdGF0ZSlcbiAgICAgICAgcmV0dXJuIHVwZGF0ZXM7XG5cbiAgICAgIGlmIChleGlzdGluZ0tleVN0YXRlID09PSB1cGRhdGVkS2V5U3RhdGUpIHtcbiAgICAgICAgY29uc3QgZXhpc3RpbmdWYWwgPSBSLnByb3Aoa2V5LCBleGlzdGluZyk7XG4gICAgICAgIGNvbnN0IHVwZGF0ZWRWYWwgPSBSLnByb3Aoa2V5LCB1cGRhdGVkKTtcblxuICAgICAgICAvLyBUaGlzIGlzIGJhc2VkIG9uIEd1bidzIGxvZ2ljXG4gICAgICAgIGlmIChMZXhpY2FsKHVwZGF0ZWRWYWwpIDw9IExleGljYWwoZXhpc3RpbmdWYWwpKSByZXR1cm4gdXBkYXRlZDtcbiAgICAgIH1cbiAgICAgIHVwZGF0ZXNba2V5XSA9IHVwZGF0ZWRba2V5XTtcbiAgICAgIHJldHVybiB1cGRhdGVzO1xuICAgIH0sIHt9KSxcbiAgICBSLmtleXNcbiAgKSh1cGRhdGVkU3RhdGUpO1xufTtcbiIsImltcG9ydCB7IHBhdGgsIGtleXMgfSBmcm9tIFwicmFtZGFcIjtcbmNvbnN0IE1BWF9NU0dfSURfQ0FDSEUgPSA1MDAwMDtcbmNvbnN0IEdBUkJBR0VfSU5URVJWQUwgPSA2MDAwMDtcblxuZXhwb3J0IGRlZmF1bHQgZGIgPT4ge1xuICBjb25zdCByZWNlaXZlZElkcyA9IHt9O1xuXG4gIGZ1bmN0aW9uIGNvbGxlY3RHYXJiYWdlKCkge1xuICAgIGxldCBpZHMgPSBrZXlzKHJlY2VpdmVkSWRzKS5yZXZlcnNlKCk7XG5cbiAgICB3aGlsZSAoaWRzLmxlbmd0aCA+IE1BWF9NU0dfSURfQ0FDSEUpIHtcbiAgICAgIGRlbGV0ZSByZWNlaXZlZElkc1tpZHMucG9wKCldO1xuICAgIH1cbiAgfVxuXG4gIGRiLm9uSW4obXNnID0+IHtcbiAgICBjb25zdCBpZCA9IHBhdGgoW1wianNvblwiLCBcIiNcIl0sIG1zZyk7XG5cbiAgICBpZiAoIWlkIHx8IHJlY2VpdmVkSWRzW2lkXSkgcmV0dXJuIG51bGw7XG4gICAgcmVjZWl2ZWRJZHNbaWRdID0gdHJ1ZTtcbiAgICByZXR1cm4gbXNnO1xuICB9KTtcblxuICBzZXRJbnRlcnZhbChjb2xsZWN0R2FyYmFnZSwgR0FSQkFHRV9JTlRFUlZBTCk7XG5cbiAgcmV0dXJuIGRiO1xufTtcbiIsImltcG9ydCB7IHBhdGgsIGtleXMgfSBmcm9tIFwicmFtZGFcIjtcblxuZXhwb3J0IGRlZmF1bHQgZGIgPT4ge1xuICBkYi5vbkluKG1zZyA9PiB7XG4gICAgaWYgKCFtc2cuZnJvbSB8fCAhbXNnLmZyb20uc2V0KSByZXR1cm4gbXNnO1xuICAgIGlmIChwYXRoKFtcImpzb25cIiwgXCJsZWVjaFwiXSwgbXNnKSkge1xuICAgICAgbXNnLmZyb20uc2V0KFtcImlzTGVlY2hpbmdcIl0sIHRydWUpO1xuICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG4gICAgY29uc3QgYXNraW5nRm9yID0gcGF0aChbXCJqc29uXCIsIFwiZ2V0XCIsIFwiI1wiXSwgbXNnKTtcblxuICAgIFthc2tpbmdGb3IsIC4uLmtleXMocGF0aChbXCJqc29uXCIsIFwicHV0XCJdLCBtc2cpKV0uZm9yRWFjaChcbiAgICAgIHNvdWwgPT4gc291bCAmJiBtc2cuZnJvbS5zZXQoW1wiaGFzQXNrZWRGb3JcIiwgc291bF0sIHRydWUpXG4gICAgKTtcbiAgICByZXR1cm4gbXNnO1xuICB9KTtcblxuICBkYi5vbk91dChtc2cgPT4ge1xuICAgIGNvbnN0IHsgdG8sIGpzb24sIGlnbm9yZUxlZWNoaW5nIH0gPSBtc2c7XG5cbiAgICBpZiAoIXRvLmdldChbXCJpc0xlZWNoaW5nXCJdKSB8fCBpZ25vcmVMZWVjaGluZykgcmV0dXJuIG1zZztcbiAgICBjb25zdCBhc2tlZFB1dHMgPSBrZXlzKGpzb24ucHV0KS5maWx0ZXIoc291bCA9PiB7XG4gICAgICBpZiAoIXRvLmdldChbXCJoYXNBc2tlZEZvclwiLCBzb3VsXSkpIHJldHVybiBmYWxzZTtcbiAgICAgIGNvbnN0IHNvdWxEZWx0YXMgPSBwYXRoKFtzb3VsLCBcIl9cIiwgXCI+XCJdLCBqc29uLnB1dCk7XG4gICAgICBsZXQgaGFzVXBkYXRlcyA9IGZhbHNlO1xuXG4gICAgICBpZiAoIWtleXMoc291bERlbHRhcykubGVuZ3RoKSByZXR1cm4gdHJ1ZTtcblxuICAgICAga2V5cyhzb3VsRGVsdGFzKS5mb3JFYWNoKGtleSA9PiB7XG4gICAgICAgIGNvbnN0IGtub3duID0gdG8uZ2V0KFtcImtub3duRGVsdGFzXCIsIHNvdWwsIGtleV0pIHx8IDA7XG4gICAgICAgIGNvbnN0IGRlbHRhID0gcGFyc2VGbG9hdChzb3VsRGVsdGFzW2tleV0pIHx8IDA7XG5cbiAgICAgICAgaWYgKGtub3duICYmIGRlbHRhIDw9IGtub3duKSByZXR1cm47XG4gICAgICAgIHRvLnNldChbXCJrbm93bkRlbHRhc1wiLCBzb3VsLCBrZXldLCBkZWx0YSk7XG4gICAgICAgIGhhc1VwZGF0ZXMgPSB0cnVlO1xuICAgICAgfSk7XG4gICAgICByZXR1cm4gaGFzVXBkYXRlcztcbiAgICB9KTtcblxuICAgIGlmIChhc2tlZFB1dHMubGVuZ3RoKSByZXR1cm4gbXNnO1xuICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH0pO1xuXG4gIHJldHVybiBkYjtcbn07XG4iLCJpbXBvcnQgKiBhcyBSIGZyb20gXCJyYW1kYVwiO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGRiID0+IHtcbiAgZGIub25Jbihtc2cgPT4ge1xuICAgIGNvbnN0IHsgZnJvbSwgbm9SZWxheSB9ID0gbXNnO1xuXG4gICAgaWYgKG5vUmVsYXkpIHJldHVybiBtc2c7XG4gICAgUi53aXRob3V0KFtmcm9tXSwgZGIuY29ubmVjdGlvbnMpLmZvckVhY2goYyA9PlxuICAgICAgYy5zZW5kKFIuYXNzb2MoXCJza2lwVmFsaWRhdGlvblwiLCB0cnVlLCBtc2cpKVxuICAgICk7XG4gICAgcmV0dXJuIG1zZztcbiAgfSk7XG4gIHJldHVybiBkYjtcbn07XG4iLCJpbXBvcnQgKiBhcyBSIGZyb20gXCJyYW1kYVwiO1xuaW1wb3J0IHV1aWQgZnJvbSBcInV1aWRcIjtcblxuY29uc3QgTVNHX1RPUElDID0gXCJndW46bXNnXCI7XG5cbm1vZHVsZS5leHBvcnRzID0gZGIgPT4ge1xuICBjb25zdCBwbTIgPSByZXF1aXJlKFwicG0yXCIpO1xuICBjb25zdCBpZCA9IHV1aWQudjQoKTtcblxuICBwbTIubGF1bmNoQnVzKChlcnIsIGJ1cykgPT4ge1xuICAgIGlmIChlcnIpIGNvbnNvbGUuZXJyKGVycik7XG4gICAgYnVzLm9uKFwicHJvY2Vzczptc2dcIiwgcGFja2V0ID0+IHtcbiAgICAgIGlmIChwYWNrZXQucmF3Lm1zZy5mcm9tQ2x1c3RlciA9PT0gaWQpIHJldHVybjtcbiAgICAgIGlmIChwYWNrZXQucmF3LnRvcGljID09PSBNU0dfVE9QSUMpIHtcbiAgICAgICAgZGIucHJvY2Vzc0luKFIuYXNzb2MoXCJkYlwiLCBkYiwgcGFja2V0LnJhdy5tc2cpKS5jYXRjaChlcnIgPT5cbiAgICAgICAgICBjb25zb2xlLmVycm9yKFwiUElTVE9MIGNsdXN0ZXIgZXJyXCIsIGVycilcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSk7XG5cbiAgZGIub25Jbihtc2cgPT4ge1xuICAgIGNvbnN0IHsgZnJvbUNsdXN0ZXIsIG5vUmVsYXkgfSA9IG1zZztcblxuICAgIGlmIChub1JlbGF5IHx8IGZyb21DbHVzdGVyKSByZXR1cm4gbXNnO1xuICAgIGlmIChwcm9jZXNzLnNlbmQpIHtcbiAgICAgIHByb2Nlc3Muc2VuZCh7XG4gICAgICAgIHRvcGljOiBNU0dfVE9QSUMsXG4gICAgICAgIG1zZzogUi5tZXJnZUxlZnQoeyBmcm9tQ2x1c3RlcjogaWQsIHNraXBWYWxpZGF0aW9uOiB0cnVlIH0sIG1zZylcbiAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gbXNnO1xuICB9KTtcblxuICByZXR1cm4gZGI7XG59O1xuIiwibW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFX18xMF9fOyIsImltcG9ydCB7IGN1cnJ5IH0gZnJvbSBcInJhbWRhXCI7XG5pbXBvcnQgV1MgZnJvbSBcIndzXCI7XG5pbXBvcnQgUmVjb25uZWN0aW5nV2ViU29ja2V0IGZyb20gXCJyZWNvbm5lY3Rpbmctd2Vic29ja2V0XCI7XG5cbmNvbnN0IFBJTkcgPSA2MDAwMDtcblxuY29uc3Qgd3NDb25uZWN0aW9uID0gY3VycnkoKGRiLCB3cykgPT4ge1xuICBsZXQgaGFzTG9nZ2VkRXJyID0gZmFsc2U7XG4gIGxldCBjb25uZWN0ZWQgPSB0cnVlO1xuXG4gIGNvbnN0IGNvbm5lY3Rpb24gPSBkYi5jb25uZWN0ZWQobXNnID0+IHtcbiAgICBpZiAoIW1zZyB8fCAhKG1zZy5qc29uIHx8IG1zZy5yYXcpIHx8ICFjb25uZWN0ZWQpIHJldHVybjtcbiAgICBjb25zdCByYXcgPSBtc2cucmF3IHx8IEpTT04uc3RyaW5naWZ5KG1zZy5qc29uKTtcblxuICAgIHdzLnNlbmQocmF3LCBlcnIgPT4ge1xuICAgICAgaWYgKCFlcnIgfHwgaGFzTG9nZ2VkRXJyKSByZXR1cm47XG4gICAgICBjb25zb2xlLndhcm4oXCJ3cyBzZW5kIGVyclwiLCBlcnIpO1xuICAgICAgaGFzTG9nZ2VkRXJyID0gdHJ1ZTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgY29uc3QgcGluZ0ludGVydmFsID0gc2V0SW50ZXJ2YWwoXG4gICAgKCkgPT4gY29ubmVjdGlvbi5zZW5kKHsganNvbjogeyBwaW5nOiB0cnVlIH0sIHNraXBWYWxpZGF0aW9uOiB0cnVlIH0pLFxuICAgIFBJTkdcbiAgKTtcblxuICBjb25zdCByZWNlaXZlID0gbXNnID0+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcmF3ID0gbXNnLmRhdGEgfHwgbXNnO1xuICAgICAgY29uc3QganNvbiA9IEpTT04ucGFyc2UocmF3KTtcblxuICAgICAgQXJyYXkuaXNBcnJheShqc29uKVxuICAgICAgICA/IGpzb24uZm9yRWFjaChyZWNlaXZlKVxuICAgICAgICA6IGNvbm5lY3Rpb24ucmVjZWl2ZSh7IGpzb24sIHJhdyB9KTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiUkVDRUlWRVIgaW52YWxpZCB3cyBtc2dcIiwgZSwgbXNnLmRhdGEpO1xuICAgIH1cbiAgfTtcblxuICB3cy5hZGRFdmVudExpc3RlbmVyKFwiY2xvc2VcIiwgKCkgPT4ge1xuICAgIGlmICh3cy5yZWNvbm5lY3QpIHJldHVybjtcbiAgICBjb25uZWN0ZWQgPSBmYWxzZTtcbiAgICBjbGVhckludGVydmFsKHBpbmdJbnRlcnZhbCk7XG4gICAgZGIuZGlzY29ubmVjdGVkKGNvbm5lY3Rpb24pO1xuICB9KTtcblxuICB3cy5hZGRFdmVudExpc3RlbmVyKFwibWVzc2FnZVwiLCByZWNlaXZlKTtcbiAgcmV0dXJuIGNvbm5lY3Rpb247XG59KTtcblxuZXhwb3J0IGNvbnN0IHNlcnZlciA9IGN1cnJ5KCh7IHdlYiwgcG9ydCB9LCBkYikgPT4ge1xuICBuZXcgV1MuU2VydmVyKHsgcG9ydDogIXdlYiA/IHBvcnQgOiB1bmRlZmluZWQsIHNlcnZlcjogd2ViIH0pLm9uKFxuICAgIFwiY29ubmVjdGlvblwiLFxuICAgIHdzQ29ubmVjdGlvbihkYilcbiAgKTtcbiAgcmV0dXJuIGRiO1xufSk7XG5cbmV4cG9ydCBjb25zdCBjbGllbnQgPSBjdXJyeSgodXJsLCBkYikgPT4ge1xuICBjb25zdCB3cyA9IG5ldyBSZWNvbm5lY3RpbmdXZWJTb2NrZXQodXJsLCBbXSwgeyBXZWJTb2NrZXQ6IFdTIH0pO1xuXG4gIHdzLmFkZEV2ZW50TGlzdGVuZXIoXCJvcGVuXCIsICgpID0+IHdzQ29ubmVjdGlvbihkYiwgd3MpKTtcbiAgcmV0dXJuIGRiO1xufSk7XG4iLCJtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfXzEyX187IiwiLyohICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcbkNvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxyXG5MaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpOyB5b3UgbWF5IG5vdCB1c2VcclxudGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGVcclxuTGljZW5zZSBhdCBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuXHJcblRISVMgQ09ERSBJUyBQUk9WSURFRCBPTiBBTiAqQVMgSVMqIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTllcclxuS0lORCwgRUlUSEVSIEVYUFJFU1MgT1IgSU1QTElFRCwgSU5DTFVESU5HIFdJVEhPVVQgTElNSVRBVElPTiBBTlkgSU1QTElFRFxyXG5XQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgVElUTEUsIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLFxyXG5NRVJDSEFOVEFCTElUWSBPUiBOT04tSU5GUklOR0VNRU5ULlxyXG5cclxuU2VlIHRoZSBBcGFjaGUgVmVyc2lvbiAyLjAgTGljZW5zZSBmb3Igc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zXHJcbmFuZCBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiogKi9cclxuLyogZ2xvYmFsIFJlZmxlY3QsIFByb21pc2UgKi9cclxuXHJcbnZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24oZCwgYikge1xyXG4gICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxyXG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcclxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcclxuICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xyXG59O1xyXG5cclxuZnVuY3Rpb24gX19leHRlbmRzKGQsIGIpIHtcclxuICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XHJcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cclxuICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcclxufVxuXG52YXIgRXZlbnQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBFdmVudCh0eXBlLCB0YXJnZXQpIHtcclxuICAgICAgICB0aGlzLnRhcmdldCA9IHRhcmdldDtcclxuICAgICAgICB0aGlzLnR5cGUgPSB0eXBlO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIEV2ZW50O1xyXG59KCkpO1xyXG52YXIgRXJyb3JFdmVudCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcclxuICAgIF9fZXh0ZW5kcyhFcnJvckV2ZW50LCBfc3VwZXIpO1xyXG4gICAgZnVuY3Rpb24gRXJyb3JFdmVudChlcnJvciwgdGFyZ2V0KSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgJ2Vycm9yJywgdGFyZ2V0KSB8fCB0aGlzO1xyXG4gICAgICAgIF90aGlzLm1lc3NhZ2UgPSBlcnJvci5tZXNzYWdlO1xyXG4gICAgICAgIF90aGlzLmVycm9yID0gZXJyb3I7XHJcbiAgICAgICAgcmV0dXJuIF90aGlzO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIEVycm9yRXZlbnQ7XHJcbn0oRXZlbnQpKTtcclxudmFyIENsb3NlRXZlbnQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XHJcbiAgICBfX2V4dGVuZHMoQ2xvc2VFdmVudCwgX3N1cGVyKTtcclxuICAgIGZ1bmN0aW9uIENsb3NlRXZlbnQoY29kZSwgcmVhc29uLCB0YXJnZXQpIHtcclxuICAgICAgICBpZiAoY29kZSA9PT0gdm9pZCAwKSB7IGNvZGUgPSAxMDAwOyB9XHJcbiAgICAgICAgaWYgKHJlYXNvbiA9PT0gdm9pZCAwKSB7IHJlYXNvbiA9ICcnOyB9XHJcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgJ2Nsb3NlJywgdGFyZ2V0KSB8fCB0aGlzO1xyXG4gICAgICAgIF90aGlzLndhc0NsZWFuID0gdHJ1ZTtcclxuICAgICAgICBfdGhpcy5jb2RlID0gY29kZTtcclxuICAgICAgICBfdGhpcy5yZWFzb24gPSByZWFzb247XHJcbiAgICAgICAgcmV0dXJuIF90aGlzO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIENsb3NlRXZlbnQ7XHJcbn0oRXZlbnQpKTtcblxuLyohXHJcbiAqIFJlY29ubmVjdGluZyBXZWJTb2NrZXRcclxuICogYnkgUGVkcm8gTGFkYXJpYSA8cGVkcm8ubGFkYXJpYUBnbWFpbC5jb20+XHJcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9wbGFkYXJpYS9yZWNvbm5lY3Rpbmctd2Vic29ja2V0XHJcbiAqIExpY2Vuc2UgTUlUXHJcbiAqL1xyXG52YXIgZ2V0R2xvYmFsV2ViU29ja2V0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgaWYgKHR5cGVvZiBXZWJTb2NrZXQgIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgICAgIHJldHVybiBXZWJTb2NrZXQ7XHJcbiAgICB9XHJcbn07XHJcbi8qKlxyXG4gKiBSZXR1cm5zIHRydWUgaWYgZ2l2ZW4gYXJndW1lbnQgbG9va3MgbGlrZSBhIFdlYlNvY2tldCBjbGFzc1xyXG4gKi9cclxudmFyIGlzV2ViU29ja2V0ID0gZnVuY3Rpb24gKHcpIHsgcmV0dXJuIHR5cGVvZiB3ID09PSAnZnVuY3Rpb24nICYmIHcuQ0xPU0lORyA9PT0gMjsgfTtcclxudmFyIERFRkFVTFQgPSB7XHJcbiAgICBtYXhSZWNvbm5lY3Rpb25EZWxheTogMTAwMDAsXHJcbiAgICBtaW5SZWNvbm5lY3Rpb25EZWxheTogMTAwMCArIE1hdGgucmFuZG9tKCkgKiA0MDAwLFxyXG4gICAgbWluVXB0aW1lOiA1MDAwLFxyXG4gICAgcmVjb25uZWN0aW9uRGVsYXlHcm93RmFjdG9yOiAxLjMsXHJcbiAgICBjb25uZWN0aW9uVGltZW91dDogNDAwMCxcclxuICAgIG1heFJldHJpZXM6IEluZmluaXR5LFxyXG4gICAgZGVidWc6IGZhbHNlLFxyXG59O1xyXG52YXIgUmVjb25uZWN0aW5nV2ViU29ja2V0ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gUmVjb25uZWN0aW5nV2ViU29ja2V0KHVybCwgcHJvdG9jb2xzLCBvcHRpb25zKSB7XHJcbiAgICAgICAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkgeyBvcHRpb25zID0ge307IH1cclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHRoaXMuX2xpc3RlbmVycyA9IHtcclxuICAgICAgICAgICAgZXJyb3I6IFtdLFxyXG4gICAgICAgICAgICBtZXNzYWdlOiBbXSxcclxuICAgICAgICAgICAgb3BlbjogW10sXHJcbiAgICAgICAgICAgIGNsb3NlOiBbXSxcclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMuX3JldHJ5Q291bnQgPSAtMTtcclxuICAgICAgICB0aGlzLl9zaG91bGRSZWNvbm5lY3QgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuX2Nvbm5lY3RMb2NrID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5fYmluYXJ5VHlwZSA9ICdibG9iJztcclxuICAgICAgICB0aGlzLl9jbG9zZUNhbGxlZCA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuX21lc3NhZ2VRdWV1ZSA9IFtdO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEFuIGV2ZW50IGxpc3RlbmVyIHRvIGJlIGNhbGxlZCB3aGVuIHRoZSBXZWJTb2NrZXQgY29ubmVjdGlvbidzIHJlYWR5U3RhdGUgY2hhbmdlcyB0byBDTE9TRURcclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLm9uY2xvc2UgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQW4gZXZlbnQgbGlzdGVuZXIgdG8gYmUgY2FsbGVkIHdoZW4gYW4gZXJyb3Igb2NjdXJzXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5vbmVycm9yID0gdW5kZWZpbmVkO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEFuIGV2ZW50IGxpc3RlbmVyIHRvIGJlIGNhbGxlZCB3aGVuIGEgbWVzc2FnZSBpcyByZWNlaXZlZCBmcm9tIHRoZSBzZXJ2ZXJcclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLm9ubWVzc2FnZSA9IHVuZGVmaW5lZDtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBBbiBldmVudCBsaXN0ZW5lciB0byBiZSBjYWxsZWQgd2hlbiB0aGUgV2ViU29ja2V0IGNvbm5lY3Rpb24ncyByZWFkeVN0YXRlIGNoYW5nZXMgdG8gT1BFTjtcclxuICAgICAgICAgKiB0aGlzIGluZGljYXRlcyB0aGF0IHRoZSBjb25uZWN0aW9uIGlzIHJlYWR5IHRvIHNlbmQgYW5kIHJlY2VpdmUgZGF0YVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMub25vcGVuID0gdW5kZWZpbmVkO1xyXG4gICAgICAgIHRoaXMuX2hhbmRsZU9wZW4gPSBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgX3RoaXMuX2RlYnVnKCdvcGVuIGV2ZW50Jyk7XHJcbiAgICAgICAgICAgIHZhciBfYSA9IF90aGlzLl9vcHRpb25zLm1pblVwdGltZSwgbWluVXB0aW1lID0gX2EgPT09IHZvaWQgMCA/IERFRkFVTFQubWluVXB0aW1lIDogX2E7XHJcbiAgICAgICAgICAgIGNsZWFyVGltZW91dChfdGhpcy5fY29ubmVjdFRpbWVvdXQpO1xyXG4gICAgICAgICAgICBfdGhpcy5fdXB0aW1lVGltZW91dCA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgeyByZXR1cm4gX3RoaXMuX2FjY2VwdE9wZW4oKTsgfSwgbWluVXB0aW1lKTtcclxuICAgICAgICAgICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgICAgICAgICBfdGhpcy5fd3MuYmluYXJ5VHlwZSA9IF90aGlzLl9iaW5hcnlUeXBlO1xyXG4gICAgICAgICAgICAvLyBzZW5kIGVucXVldWVkIG1lc3NhZ2VzIChtZXNzYWdlcyBzZW50IGJlZm9yZSB3ZWJzb2NrZXQgb3BlbiBldmVudClcclxuICAgICAgICAgICAgX3RoaXMuX21lc3NhZ2VRdWV1ZS5mb3JFYWNoKGZ1bmN0aW9uIChtZXNzYWdlKSB7IHJldHVybiBfdGhpcy5fd3Muc2VuZChtZXNzYWdlKTsgfSk7XHJcbiAgICAgICAgICAgIF90aGlzLl9tZXNzYWdlUXVldWUgPSBbXTtcclxuICAgICAgICAgICAgaWYgKF90aGlzLm9ub3Blbikge1xyXG4gICAgICAgICAgICAgICAgX3RoaXMub25vcGVuKGV2ZW50KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBfdGhpcy5fbGlzdGVuZXJzLm9wZW4uZm9yRWFjaChmdW5jdGlvbiAobGlzdGVuZXIpIHsgcmV0dXJuIF90aGlzLl9jYWxsRXZlbnRMaXN0ZW5lcihldmVudCwgbGlzdGVuZXIpOyB9KTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMuX2hhbmRsZU1lc3NhZ2UgPSBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgX3RoaXMuX2RlYnVnKCdtZXNzYWdlIGV2ZW50Jyk7XHJcbiAgICAgICAgICAgIGlmIChfdGhpcy5vbm1lc3NhZ2UpIHtcclxuICAgICAgICAgICAgICAgIF90aGlzLm9ubWVzc2FnZShldmVudCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgX3RoaXMuX2xpc3RlbmVycy5tZXNzYWdlLmZvckVhY2goZnVuY3Rpb24gKGxpc3RlbmVyKSB7IHJldHVybiBfdGhpcy5fY2FsbEV2ZW50TGlzdGVuZXIoZXZlbnQsIGxpc3RlbmVyKTsgfSk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLl9oYW5kbGVFcnJvciA9IGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgICAgICBfdGhpcy5fZGVidWcoJ2Vycm9yIGV2ZW50JywgZXZlbnQubWVzc2FnZSk7XHJcbiAgICAgICAgICAgIF90aGlzLl9kaXNjb25uZWN0KHVuZGVmaW5lZCwgZXZlbnQubWVzc2FnZSA9PT0gJ1RJTUVPVVQnID8gJ3RpbWVvdXQnIDogdW5kZWZpbmVkKTtcclxuICAgICAgICAgICAgaWYgKF90aGlzLm9uZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgIF90aGlzLm9uZXJyb3IoZXZlbnQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIF90aGlzLl9kZWJ1ZygnZXhlYyBlcnJvciBsaXN0ZW5lcnMnKTtcclxuICAgICAgICAgICAgX3RoaXMuX2xpc3RlbmVycy5lcnJvci5mb3JFYWNoKGZ1bmN0aW9uIChsaXN0ZW5lcikgeyByZXR1cm4gX3RoaXMuX2NhbGxFdmVudExpc3RlbmVyKGV2ZW50LCBsaXN0ZW5lcik7IH0pO1xyXG4gICAgICAgICAgICBfdGhpcy5fY29ubmVjdCgpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy5faGFuZGxlQ2xvc2UgPSBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgX3RoaXMuX2RlYnVnKCdjbG9zZSBldmVudCcpO1xyXG4gICAgICAgICAgICBfdGhpcy5fY2xlYXJUaW1lb3V0cygpO1xyXG4gICAgICAgICAgICBpZiAoX3RoaXMuX3Nob3VsZFJlY29ubmVjdCkge1xyXG4gICAgICAgICAgICAgICAgX3RoaXMuX2Nvbm5lY3QoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoX3RoaXMub25jbG9zZSkge1xyXG4gICAgICAgICAgICAgICAgX3RoaXMub25jbG9zZShldmVudCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgX3RoaXMuX2xpc3RlbmVycy5jbG9zZS5mb3JFYWNoKGZ1bmN0aW9uIChsaXN0ZW5lcikgeyByZXR1cm4gX3RoaXMuX2NhbGxFdmVudExpc3RlbmVyKGV2ZW50LCBsaXN0ZW5lcik7IH0pO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy5fdXJsID0gdXJsO1xyXG4gICAgICAgIHRoaXMuX3Byb3RvY29scyA9IHByb3RvY29scztcclxuICAgICAgICB0aGlzLl9vcHRpb25zID0gb3B0aW9ucztcclxuICAgICAgICB0aGlzLl9jb25uZWN0KCk7XHJcbiAgICB9XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoUmVjb25uZWN0aW5nV2ViU29ja2V0LCBcIkNPTk5FQ1RJTkdcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gMDtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShSZWNvbm5lY3RpbmdXZWJTb2NrZXQsIFwiT1BFTlwiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAxO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFJlY29ubmVjdGluZ1dlYlNvY2tldCwgXCJDTE9TSU5HXCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIDI7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoUmVjb25uZWN0aW5nV2ViU29ja2V0LCBcIkNMT1NFRFwiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAzO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFJlY29ubmVjdGluZ1dlYlNvY2tldC5wcm90b3R5cGUsIFwiQ09OTkVDVElOR1wiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBSZWNvbm5lY3RpbmdXZWJTb2NrZXQuQ09OTkVDVElORztcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShSZWNvbm5lY3RpbmdXZWJTb2NrZXQucHJvdG90eXBlLCBcIk9QRU5cIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gUmVjb25uZWN0aW5nV2ViU29ja2V0Lk9QRU47XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoUmVjb25uZWN0aW5nV2ViU29ja2V0LnByb3RvdHlwZSwgXCJDTE9TSU5HXCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIFJlY29ubmVjdGluZ1dlYlNvY2tldC5DTE9TSU5HO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFJlY29ubmVjdGluZ1dlYlNvY2tldC5wcm90b3R5cGUsIFwiQ0xPU0VEXCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIFJlY29ubmVjdGluZ1dlYlNvY2tldC5DTE9TRUQ7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoUmVjb25uZWN0aW5nV2ViU29ja2V0LnByb3RvdHlwZSwgXCJiaW5hcnlUeXBlXCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3dzID8gdGhpcy5fd3MuYmluYXJ5VHlwZSA6IHRoaXMuX2JpbmFyeVR5cGU7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xyXG4gICAgICAgICAgICB0aGlzLl9iaW5hcnlUeXBlID0gdmFsdWU7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLl93cykge1xyXG4gICAgICAgICAgICAgICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgICAgICAgICAgICAgdGhpcy5fd3MuYmluYXJ5VHlwZSA9IHZhbHVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoUmVjb25uZWN0aW5nV2ViU29ja2V0LnByb3RvdHlwZSwgXCJyZXRyeUNvdW50XCIsIHtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBSZXR1cm5zIHRoZSBudW1iZXIgb3IgY29ubmVjdGlvbiByZXRyaWVzXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBNYXRoLm1heCh0aGlzLl9yZXRyeUNvdW50LCAwKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShSZWNvbm5lY3RpbmdXZWJTb2NrZXQucHJvdG90eXBlLCBcImJ1ZmZlcmVkQW1vdW50XCIsIHtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBUaGUgbnVtYmVyIG9mIGJ5dGVzIG9mIGRhdGEgdGhhdCBoYXZlIGJlZW4gcXVldWVkIHVzaW5nIGNhbGxzIHRvIHNlbmQoKSBidXQgbm90IHlldFxyXG4gICAgICAgICAqIHRyYW5zbWl0dGVkIHRvIHRoZSBuZXR3b3JrLiBUaGlzIHZhbHVlIHJlc2V0cyB0byB6ZXJvIG9uY2UgYWxsIHF1ZXVlZCBkYXRhIGhhcyBiZWVuIHNlbnQuXHJcbiAgICAgICAgICogVGhpcyB2YWx1ZSBkb2VzIG5vdCByZXNldCB0byB6ZXJvIHdoZW4gdGhlIGNvbm5lY3Rpb24gaXMgY2xvc2VkOyBpZiB5b3Uga2VlcCBjYWxsaW5nIHNlbmQoKSxcclxuICAgICAgICAgKiB0aGlzIHdpbGwgY29udGludWUgdG8gY2xpbWIuIFJlYWQgb25seVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgYnl0ZXMgPSB0aGlzLl9tZXNzYWdlUXVldWUucmVkdWNlKGZ1bmN0aW9uIChhY2MsIG1lc3NhZ2UpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgbWVzc2FnZSA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgICAgICAgICAgICAgICBhY2MgKz0gbWVzc2FnZS5sZW5ndGg7IC8vIG5vdCBieXRlIHNpemVcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKG1lc3NhZ2UgaW5zdGFuY2VvZiBCbG9iKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYWNjICs9IG1lc3NhZ2Uuc2l6ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGFjYyArPSBtZXNzYWdlLmJ5dGVMZW5ndGg7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gYWNjO1xyXG4gICAgICAgICAgICB9LCAwKTtcclxuICAgICAgICAgICAgcmV0dXJuIGJ5dGVzICsgKHRoaXMuX3dzID8gdGhpcy5fd3MuYnVmZmVyZWRBbW91bnQgOiAwKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShSZWNvbm5lY3RpbmdXZWJTb2NrZXQucHJvdG90eXBlLCBcImV4dGVuc2lvbnNcIiwge1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFRoZSBleHRlbnNpb25zIHNlbGVjdGVkIGJ5IHRoZSBzZXJ2ZXIuIFRoaXMgaXMgY3VycmVudGx5IG9ubHkgdGhlIGVtcHR5IHN0cmluZyBvciBhIGxpc3Qgb2ZcclxuICAgICAgICAgKiBleHRlbnNpb25zIGFzIG5lZ290aWF0ZWQgYnkgdGhlIGNvbm5lY3Rpb25cclxuICAgICAgICAgKi9cclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3dzID8gdGhpcy5fd3MuZXh0ZW5zaW9ucyA6ICcnO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFJlY29ubmVjdGluZ1dlYlNvY2tldC5wcm90b3R5cGUsIFwicHJvdG9jb2xcIiwge1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEEgc3RyaW5nIGluZGljYXRpbmcgdGhlIG5hbWUgb2YgdGhlIHN1Yi1wcm90b2NvbCB0aGUgc2VydmVyIHNlbGVjdGVkO1xyXG4gICAgICAgICAqIHRoaXMgd2lsbCBiZSBvbmUgb2YgdGhlIHN0cmluZ3Mgc3BlY2lmaWVkIGluIHRoZSBwcm90b2NvbHMgcGFyYW1ldGVyIHdoZW4gY3JlYXRpbmcgdGhlXHJcbiAgICAgICAgICogV2ViU29ja2V0IG9iamVjdFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fd3MgPyB0aGlzLl93cy5wcm90b2NvbCA6ICcnO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFJlY29ubmVjdGluZ1dlYlNvY2tldC5wcm90b3R5cGUsIFwicmVhZHlTdGF0ZVwiLCB7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogVGhlIGN1cnJlbnQgc3RhdGUgb2YgdGhlIGNvbm5lY3Rpb247IHRoaXMgaXMgb25lIG9mIHRoZSBSZWFkeSBzdGF0ZSBjb25zdGFudHNcclxuICAgICAgICAgKi9cclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3dzID8gdGhpcy5fd3MucmVhZHlTdGF0ZSA6IFJlY29ubmVjdGluZ1dlYlNvY2tldC5DT05ORUNUSU5HO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFJlY29ubmVjdGluZ1dlYlNvY2tldC5wcm90b3R5cGUsIFwidXJsXCIsIHtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBUaGUgVVJMIGFzIHJlc29sdmVkIGJ5IHRoZSBjb25zdHJ1Y3RvclxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fd3MgPyB0aGlzLl93cy51cmwgOiAnJztcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIC8qKlxyXG4gICAgICogQ2xvc2VzIHRoZSBXZWJTb2NrZXQgY29ubmVjdGlvbiBvciBjb25uZWN0aW9uIGF0dGVtcHQsIGlmIGFueS4gSWYgdGhlIGNvbm5lY3Rpb24gaXMgYWxyZWFkeVxyXG4gICAgICogQ0xPU0VELCB0aGlzIG1ldGhvZCBkb2VzIG5vdGhpbmdcclxuICAgICAqL1xyXG4gICAgUmVjb25uZWN0aW5nV2ViU29ja2V0LnByb3RvdHlwZS5jbG9zZSA9IGZ1bmN0aW9uIChjb2RlLCByZWFzb24pIHtcclxuICAgICAgICBpZiAoY29kZSA9PT0gdm9pZCAwKSB7IGNvZGUgPSAxMDAwOyB9XHJcbiAgICAgICAgdGhpcy5fY2xvc2VDYWxsZWQgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuX3Nob3VsZFJlY29ubmVjdCA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuX2NsZWFyVGltZW91dHMoKTtcclxuICAgICAgICBpZiAoIXRoaXMuX3dzKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2RlYnVnKCdjbG9zZSBlbnF1ZXVlZDogbm8gd3MgaW5zdGFuY2UnKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5fd3MucmVhZHlTdGF0ZSA9PT0gdGhpcy5DTE9TRUQpIHtcclxuICAgICAgICAgICAgdGhpcy5fZGVidWcoJ2Nsb3NlOiBhbHJlYWR5IGNsb3NlZCcpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuX3dzLmNsb3NlKGNvZGUsIHJlYXNvbik7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBDbG9zZXMgdGhlIFdlYlNvY2tldCBjb25uZWN0aW9uIG9yIGNvbm5lY3Rpb24gYXR0ZW1wdCBhbmQgY29ubmVjdHMgYWdhaW4uXHJcbiAgICAgKiBSZXNldHMgcmV0cnkgY291bnRlcjtcclxuICAgICAqL1xyXG4gICAgUmVjb25uZWN0aW5nV2ViU29ja2V0LnByb3RvdHlwZS5yZWNvbm5lY3QgPSBmdW5jdGlvbiAoY29kZSwgcmVhc29uKSB7XHJcbiAgICAgICAgdGhpcy5fc2hvdWxkUmVjb25uZWN0ID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLl9jbG9zZUNhbGxlZCA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuX3JldHJ5Q291bnQgPSAtMTtcclxuICAgICAgICBpZiAoIXRoaXMuX3dzIHx8IHRoaXMuX3dzLnJlYWR5U3RhdGUgPT09IHRoaXMuQ0xPU0VEKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2Nvbm5lY3QoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2Rpc2Nvbm5lY3QoY29kZSwgcmVhc29uKTtcclxuICAgICAgICAgICAgdGhpcy5fY29ubmVjdCgpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEVucXVldWUgc3BlY2lmaWVkIGRhdGEgdG8gYmUgdHJhbnNtaXR0ZWQgdG8gdGhlIHNlcnZlciBvdmVyIHRoZSBXZWJTb2NrZXQgY29ubmVjdGlvblxyXG4gICAgICovXHJcbiAgICBSZWNvbm5lY3RpbmdXZWJTb2NrZXQucHJvdG90eXBlLnNlbmQgPSBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgIGlmICh0aGlzLl93cyAmJiB0aGlzLl93cy5yZWFkeVN0YXRlID09PSB0aGlzLk9QRU4pIHtcclxuICAgICAgICAgICAgdGhpcy5fZGVidWcoJ3NlbmQnLCBkYXRhKTtcclxuICAgICAgICAgICAgdGhpcy5fd3Muc2VuZChkYXRhKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2RlYnVnKCdlbnF1ZXVlJywgZGF0YSk7XHJcbiAgICAgICAgICAgIHRoaXMuX21lc3NhZ2VRdWV1ZS5wdXNoKGRhdGEpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFJlZ2lzdGVyIGFuIGV2ZW50IGhhbmRsZXIgb2YgYSBzcGVjaWZpYyBldmVudCB0eXBlXHJcbiAgICAgKi9cclxuICAgIFJlY29ubmVjdGluZ1dlYlNvY2tldC5wcm90b3R5cGUuYWRkRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uICh0eXBlLCBsaXN0ZW5lcikge1xyXG4gICAgICAgIGlmICh0aGlzLl9saXN0ZW5lcnNbdHlwZV0pIHtcclxuICAgICAgICAgICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgICAgICAgICB0aGlzLl9saXN0ZW5lcnNbdHlwZV0ucHVzaChsaXN0ZW5lcik7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogUmVtb3ZlcyBhbiBldmVudCBsaXN0ZW5lclxyXG4gICAgICovXHJcbiAgICBSZWNvbm5lY3RpbmdXZWJTb2NrZXQucHJvdG90eXBlLnJlbW92ZUV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbiAodHlwZSwgbGlzdGVuZXIpIHtcclxuICAgICAgICBpZiAodGhpcy5fbGlzdGVuZXJzW3R5cGVdKSB7XHJcbiAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcclxuICAgICAgICAgICAgdGhpcy5fbGlzdGVuZXJzW3R5cGVdID0gdGhpcy5fbGlzdGVuZXJzW3R5cGVdLmZpbHRlcihmdW5jdGlvbiAobCkgeyByZXR1cm4gbCAhPT0gbGlzdGVuZXI7IH0pO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBSZWNvbm5lY3RpbmdXZWJTb2NrZXQucHJvdG90eXBlLl9kZWJ1ZyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgYXJncyA9IFtdO1xyXG4gICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgIGFyZ3NbX2ldID0gYXJndW1lbnRzW19pXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuX29wdGlvbnMuZGVidWcpIHtcclxuICAgICAgICAgICAgLy8gbm90IHVzaW5nIHNwcmVhZCBiZWNhdXNlIGNvbXBpbGVkIHZlcnNpb24gdXNlcyBTeW1ib2xzXHJcbiAgICAgICAgICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZVxyXG4gICAgICAgICAgICBjb25zb2xlLmxvZy5hcHBseShjb25zb2xlLCBbJ1JXUz4nXS5jb25jYXQoYXJncykpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBSZWNvbm5lY3RpbmdXZWJTb2NrZXQucHJvdG90eXBlLl9nZXROZXh0RGVsYXkgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIF9hID0gdGhpcy5fb3B0aW9ucywgX2IgPSBfYS5yZWNvbm5lY3Rpb25EZWxheUdyb3dGYWN0b3IsIHJlY29ubmVjdGlvbkRlbGF5R3Jvd0ZhY3RvciA9IF9iID09PSB2b2lkIDAgPyBERUZBVUxULnJlY29ubmVjdGlvbkRlbGF5R3Jvd0ZhY3RvciA6IF9iLCBfYyA9IF9hLm1pblJlY29ubmVjdGlvbkRlbGF5LCBtaW5SZWNvbm5lY3Rpb25EZWxheSA9IF9jID09PSB2b2lkIDAgPyBERUZBVUxULm1pblJlY29ubmVjdGlvbkRlbGF5IDogX2MsIF9kID0gX2EubWF4UmVjb25uZWN0aW9uRGVsYXksIG1heFJlY29ubmVjdGlvbkRlbGF5ID0gX2QgPT09IHZvaWQgMCA/IERFRkFVTFQubWF4UmVjb25uZWN0aW9uRGVsYXkgOiBfZDtcclxuICAgICAgICB2YXIgZGVsYXkgPSBtaW5SZWNvbm5lY3Rpb25EZWxheTtcclxuICAgICAgICBpZiAodGhpcy5fcmV0cnlDb3VudCA+IDApIHtcclxuICAgICAgICAgICAgZGVsYXkgPVxyXG4gICAgICAgICAgICAgICAgbWluUmVjb25uZWN0aW9uRGVsYXkgKiBNYXRoLnBvdyhyZWNvbm5lY3Rpb25EZWxheUdyb3dGYWN0b3IsIHRoaXMuX3JldHJ5Q291bnQgLSAxKTtcclxuICAgICAgICAgICAgaWYgKGRlbGF5ID4gbWF4UmVjb25uZWN0aW9uRGVsYXkpIHtcclxuICAgICAgICAgICAgICAgIGRlbGF5ID0gbWF4UmVjb25uZWN0aW9uRGVsYXk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5fZGVidWcoJ25leHQgZGVsYXknLCBkZWxheSk7XHJcbiAgICAgICAgcmV0dXJuIGRlbGF5O1xyXG4gICAgfTtcclxuICAgIFJlY29ubmVjdGluZ1dlYlNvY2tldC5wcm90b3R5cGUuX3dhaXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHtcclxuICAgICAgICAgICAgc2V0VGltZW91dChyZXNvbHZlLCBfdGhpcy5fZ2V0TmV4dERlbGF5KCkpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIFJlY29ubmVjdGluZ1dlYlNvY2tldC5wcm90b3R5cGUuX2dldE5leHRVcmwgPSBmdW5jdGlvbiAodXJsUHJvdmlkZXIpIHtcclxuICAgICAgICBpZiAodHlwZW9mIHVybFByb3ZpZGVyID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHVybFByb3ZpZGVyKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHR5cGVvZiB1cmxQcm92aWRlciA9PT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgICAgICB2YXIgdXJsID0gdXJsUHJvdmlkZXIoKTtcclxuICAgICAgICAgICAgaWYgKHR5cGVvZiB1cmwgPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHVybCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHVybC50aGVuKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdXJsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRocm93IEVycm9yKCdJbnZhbGlkIFVSTCcpO1xyXG4gICAgfTtcclxuICAgIFJlY29ubmVjdGluZ1dlYlNvY2tldC5wcm90b3R5cGUuX2Nvbm5lY3QgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICBpZiAodGhpcy5fY29ubmVjdExvY2sgfHwgIXRoaXMuX3Nob3VsZFJlY29ubmVjdCkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuX2Nvbm5lY3RMb2NrID0gdHJ1ZTtcclxuICAgICAgICB2YXIgX2EgPSB0aGlzLl9vcHRpb25zLCBfYiA9IF9hLm1heFJldHJpZXMsIG1heFJldHJpZXMgPSBfYiA9PT0gdm9pZCAwID8gREVGQVVMVC5tYXhSZXRyaWVzIDogX2IsIF9jID0gX2EuY29ubmVjdGlvblRpbWVvdXQsIGNvbm5lY3Rpb25UaW1lb3V0ID0gX2MgPT09IHZvaWQgMCA/IERFRkFVTFQuY29ubmVjdGlvblRpbWVvdXQgOiBfYywgX2QgPSBfYS5XZWJTb2NrZXQsIFdlYlNvY2tldCA9IF9kID09PSB2b2lkIDAgPyBnZXRHbG9iYWxXZWJTb2NrZXQoKSA6IF9kO1xyXG4gICAgICAgIGlmICh0aGlzLl9yZXRyeUNvdW50ID49IG1heFJldHJpZXMpIHtcclxuICAgICAgICAgICAgdGhpcy5fZGVidWcoJ21heCByZXRyaWVzIHJlYWNoZWQnLCB0aGlzLl9yZXRyeUNvdW50LCAnPj0nLCBtYXhSZXRyaWVzKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLl9yZXRyeUNvdW50Kys7XHJcbiAgICAgICAgdGhpcy5fZGVidWcoJ2Nvbm5lY3QnLCB0aGlzLl9yZXRyeUNvdW50KTtcclxuICAgICAgICB0aGlzLl9yZW1vdmVMaXN0ZW5lcnMoKTtcclxuICAgICAgICBpZiAoIWlzV2ViU29ja2V0KFdlYlNvY2tldCkpIHtcclxuICAgICAgICAgICAgdGhyb3cgRXJyb3IoJ05vIHZhbGlkIFdlYlNvY2tldCBjbGFzcyBwcm92aWRlZCcpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLl93YWl0KClcclxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKCkgeyByZXR1cm4gX3RoaXMuX2dldE5leHRVcmwoX3RoaXMuX3VybCk7IH0pXHJcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uICh1cmwpIHtcclxuICAgICAgICAgICAgLy8gY2xvc2UgY291bGQgYmUgY2FsbGVkIGJlZm9yZSBjcmVhdGluZyB0aGUgd3NcclxuICAgICAgICAgICAgaWYgKF90aGlzLl9jbG9zZUNhbGxlZCkge1xyXG4gICAgICAgICAgICAgICAgX3RoaXMuX2Nvbm5lY3RMb2NrID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgX3RoaXMuX2RlYnVnKCdjb25uZWN0JywgeyB1cmw6IHVybCwgcHJvdG9jb2xzOiBfdGhpcy5fcHJvdG9jb2xzIH0pO1xyXG4gICAgICAgICAgICBfdGhpcy5fd3MgPSBfdGhpcy5fcHJvdG9jb2xzXHJcbiAgICAgICAgICAgICAgICA/IG5ldyBXZWJTb2NrZXQodXJsLCBfdGhpcy5fcHJvdG9jb2xzKVxyXG4gICAgICAgICAgICAgICAgOiBuZXcgV2ViU29ja2V0KHVybCk7XHJcbiAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcclxuICAgICAgICAgICAgX3RoaXMuX3dzLmJpbmFyeVR5cGUgPSBfdGhpcy5fYmluYXJ5VHlwZTtcclxuICAgICAgICAgICAgX3RoaXMuX2Nvbm5lY3RMb2NrID0gZmFsc2U7XHJcbiAgICAgICAgICAgIF90aGlzLl9hZGRMaXN0ZW5lcnMoKTtcclxuICAgICAgICAgICAgX3RoaXMuX2Nvbm5lY3RUaW1lb3V0ID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7IHJldHVybiBfdGhpcy5faGFuZGxlVGltZW91dCgpOyB9LCBjb25uZWN0aW9uVGltZW91dCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgUmVjb25uZWN0aW5nV2ViU29ja2V0LnByb3RvdHlwZS5faGFuZGxlVGltZW91dCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLl9kZWJ1ZygndGltZW91dCBldmVudCcpO1xyXG4gICAgICAgIHRoaXMuX2hhbmRsZUVycm9yKG5ldyBFcnJvckV2ZW50KEVycm9yKCdUSU1FT1VUJyksIHRoaXMpKTtcclxuICAgIH07XHJcbiAgICBSZWNvbm5lY3RpbmdXZWJTb2NrZXQucHJvdG90eXBlLl9kaXNjb25uZWN0ID0gZnVuY3Rpb24gKGNvZGUsIHJlYXNvbikge1xyXG4gICAgICAgIGlmIChjb2RlID09PSB2b2lkIDApIHsgY29kZSA9IDEwMDA7IH1cclxuICAgICAgICB0aGlzLl9jbGVhclRpbWVvdXRzKCk7XHJcbiAgICAgICAgaWYgKCF0aGlzLl93cykge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuX3JlbW92ZUxpc3RlbmVycygpO1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3dzLmNsb3NlKGNvZGUsIHJlYXNvbik7XHJcbiAgICAgICAgICAgIHRoaXMuX2hhbmRsZUNsb3NlKG5ldyBDbG9zZUV2ZW50KGNvZGUsIHJlYXNvbiwgdGhpcykpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgLy8gaWdub3JlXHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIFJlY29ubmVjdGluZ1dlYlNvY2tldC5wcm90b3R5cGUuX2FjY2VwdE9wZW4gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5fZGVidWcoJ2FjY2VwdCBvcGVuJyk7XHJcbiAgICAgICAgdGhpcy5fcmV0cnlDb3VudCA9IDA7XHJcbiAgICB9O1xyXG4gICAgUmVjb25uZWN0aW5nV2ViU29ja2V0LnByb3RvdHlwZS5fY2FsbEV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbiAoZXZlbnQsIGxpc3RlbmVyKSB7XHJcbiAgICAgICAgaWYgKCdoYW5kbGVFdmVudCcgaW4gbGlzdGVuZXIpIHtcclxuICAgICAgICAgICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgICAgICAgICBsaXN0ZW5lci5oYW5kbGVFdmVudChldmVudCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgICAgICAgIGxpc3RlbmVyKGV2ZW50KTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgUmVjb25uZWN0aW5nV2ViU29ja2V0LnByb3RvdHlwZS5fcmVtb3ZlTGlzdGVuZXJzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICghdGhpcy5fd3MpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLl9kZWJ1ZygncmVtb3ZlTGlzdGVuZXJzJyk7XHJcbiAgICAgICAgdGhpcy5fd3MucmVtb3ZlRXZlbnRMaXN0ZW5lcignb3BlbicsIHRoaXMuX2hhbmRsZU9wZW4pO1xyXG4gICAgICAgIHRoaXMuX3dzLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2Nsb3NlJywgdGhpcy5faGFuZGxlQ2xvc2UpO1xyXG4gICAgICAgIHRoaXMuX3dzLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCB0aGlzLl9oYW5kbGVNZXNzYWdlKTtcclxuICAgICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgICAgdGhpcy5fd3MucmVtb3ZlRXZlbnRMaXN0ZW5lcignZXJyb3InLCB0aGlzLl9oYW5kbGVFcnJvcik7XHJcbiAgICB9O1xyXG4gICAgUmVjb25uZWN0aW5nV2ViU29ja2V0LnByb3RvdHlwZS5fYWRkTGlzdGVuZXJzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICghdGhpcy5fd3MpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLl9kZWJ1ZygnYWRkTGlzdGVuZXJzJyk7XHJcbiAgICAgICAgdGhpcy5fd3MuYWRkRXZlbnRMaXN0ZW5lcignb3BlbicsIHRoaXMuX2hhbmRsZU9wZW4pO1xyXG4gICAgICAgIHRoaXMuX3dzLmFkZEV2ZW50TGlzdGVuZXIoJ2Nsb3NlJywgdGhpcy5faGFuZGxlQ2xvc2UpO1xyXG4gICAgICAgIHRoaXMuX3dzLmFkZEV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCB0aGlzLl9oYW5kbGVNZXNzYWdlKTtcclxuICAgICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgICAgdGhpcy5fd3MuYWRkRXZlbnRMaXN0ZW5lcignZXJyb3InLCB0aGlzLl9oYW5kbGVFcnJvcik7XHJcbiAgICB9O1xyXG4gICAgUmVjb25uZWN0aW5nV2ViU29ja2V0LnByb3RvdHlwZS5fY2xlYXJUaW1lb3V0cyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5fY29ubmVjdFRpbWVvdXQpO1xyXG4gICAgICAgIGNsZWFyVGltZW91dCh0aGlzLl91cHRpbWVUaW1lb3V0KTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gUmVjb25uZWN0aW5nV2ViU29ja2V0O1xyXG59KCkpO1xuXG5leHBvcnQgZGVmYXVsdCBSZWNvbm5lY3RpbmdXZWJTb2NrZXQ7XG4iXSwic291cmNlUm9vdCI6IiJ9