!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("ramda"),require("uuid"),require("pm2"),require("ws")):"function"==typeof define&&define.amd?define("gun-receiver",["ramda","uuid","pm2","ws"],t):"object"==typeof exports?exports["gun-receiver"]=t(require("ramda"),require("uuid"),require("pm2"),require("ws")):e["gun-receiver"]=t(e.ramda,e.uuid,e.pm2,e.ws)}("undefined"!=typeof self?self:this,function(e,t,n,r){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=2)}([function(t,n){t.exports=e},function(e,n){e.exports=t},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"chainInterface",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(t,"Receiver",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"deduplicateMessages",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"allowLeech",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(t,"relayMessages",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"cluster",{enumerable:!0,get:function(){return c.default}}),t.websocketTransport=void 0;var r=a(n(3)),o=a(n(4)),i=a(n(6)),u=a(n(7)),s=a(n(8)),c=a(n(9));function a(e){return e&&e.__esModule?e:{default:e}}var f=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(11));t.websocketTransport=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(0)),i=(r=n(1))&&r.__esModule?r:{default:r};function u(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}t.default=function(e){return e.get=function(t){return function t(n){var r,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c=function(t){var u,c,a=!1,f=t.bind(r),l=function(e){return(a=!0)&&f(u=e)},p={},d={},h={},y=e.connected(function(e){var t=e.json,r=o.prop("@",t),i=d[r],s=o.keys(o.prop("put",t));if(i&&s.push(i),s.length){o.uniq(s).forEach(function(e){if(p[e]){var n=o.path(["put",e],t);n||a||l(),n&&(h[e]=o.mergeDeepLeft(n,h[e]||{}))}});var f=c(n);f!==u&&l(f)}}),_=function(e){if(p[e])return h[e];var t=i.default.v4();return p[e]=t,d[t]=e,y.receive({...s,json:{"#":t,get:{"#":e}},skipValidation:!0}),h[e]};return c=function(e){var t=e[e.length-1];if(1===e.length)return _(t);var r=c(e.slice(0,e.length-1));if(r){var i=o.prop(t,r);return i&&i["#"]?_(i["#"]):(e===n&&l(i),i)}},y.receive({json:{leech:!0}}),c(n),function(){return e.disconnected(y)}},a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o.identity;return new Promise(function(e){var t=c(function(n){e(n),t()})}).then(e)};return r={get:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t([].concat(u(n),[e]),r)},on:c,then:a,once:function(e){return a(e.bind(r))&&r}}}([t],arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})},e.getDiff=function(t){var n=o.keys(t),r={};return n.length?Promise.all(n.map(function(n){return e.get(n,{noRelay:!0}).then(function(o){var i=e.diffNode(o,t[n]);i&&(r[n]=i)})})).then(function(){return o.keys(r).length?r:null}):Promise.resolve({})},e},e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e,t=[],n=s(c(),2),r=n[0],a=n[1],f=s(c(),2),l=f[0],p=f[1],d=JSON.stringify;return e={connections:t,connected:function(n){var r=function(e){var t,n=e.db,r=e.send,i={},u=!1,s=n.msgId;return t={send:function(e){return n.processOut({...e,to:t}).then(function(e){return e&&r(e)}).catch(function(t){u||console.error("PISTOL send err",JSON.stringify(e,null,2),e.json.put,t),u=!0})},receive:function(e){var r=e.json,o=e.raw,i=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,["json","raw"]);return n.processIn({...i,db:n,json:{...r,"#":r["#"]||s()},from:t}).catch(function(e){return console.error("PISTOL receive err",e,o||r)})},get:function(e){return(0,o.path)(e,i)},set:function(e,t){return i=(0,o.assocPath)(e,t,i)},msgId:s}}({db:e,send:n});return t.push(r),r},disconnected:function(e){var n=t.indexOf(e);-1!==n&&t.splice(n,1)},msgId:function(){return i.default.v4()},onIn:r,onOut:l,processIn:a,processOut:p,stringify:d,diffNode:u.diffNode}};var r,o=n(0),i=(r=n(1))&&r.__esModule?r:{default:r},u=n(5);function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var u,s=e[Symbol.iterator]();!(r=(u=s.next()).done)&&(n.push(u.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function c(){var e=[];return[function(t){return e.push(t)},function(t){var n=e.slice().reverse();return function e(t){try{var r=n.pop();return t&&r?Promise.resolve(r(t)).then(e):Promise.resolve(t)}catch(e){return Promise.reject(e)}}(t)},function(t){return e=(0,o.without)([t],e)}]}e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.diffNode=void 0;var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(0));var o=JSON.stringify;t.diffNode=function(e,t){var n=((arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)||(new Date).getTime())+6e5,i=r.path(["_",">"],e)||{},u=r.path(["_",">"],t)||{};return r.compose(function(e){var n=r.keys(e);return n.length?r.assoc("_",r.assoc(">",r.pick(n,u),t._),e):null},r.reduce(function(s,c){var a=i[c],f=u[c];if(f>n||!f)return s;if(a&&a>=f)return s;if(a===f){var l=r.prop(c,e),p=r.prop(c,t);if(o(p)<=o(l))return t}return s[c]=t[c],s},{}),r.keys)(u)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(0),o=5e4;t.default=function(e){var t={};return e.onIn(function(e){var n=(0,r.path)(["json","#"],e);return!n||t[n]?null:(t[n]=!0,e)}),setInterval(function(){for(var e=(0,r.keys)(t).reverse();e.length>o;)delete t[e.pop()]},6e4),e},e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(0);function o(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}t.default=function(e){return e.onIn(function(e){return e.from&&e.from.set?(0,r.path)(["json","leech"],e)?void e.from.set(["isLeeching"],!0):([(0,r.path)(["json","get","#"],e)].concat(o((0,r.keys)((0,r.path)(["json","put"],e)))).forEach(function(t){return t&&e.from.set(["hasAskedFor",t],!0)}),e):e}),e.onOut(function(e){var t=e.to,n=e.json,o=e.ignoreLeeching;return!t.get(["isLeeching"])||o?e:(0,r.keys)(n.put).filter(function(e){if(!t.get(["hasAskedFor",e]))return!1;var o=(0,r.path)([e,"_",">"],n.put),i=!1;return!(0,r.keys)(o).length||((0,r.keys)(o).forEach(function(n){var r=t.get(["knownDeltas",e,n])||0,u=parseFloat(o[n])||0;r&&u<=r||(t.set(["knownDeltas",e,n],u),i=!0)}),i)}).length?e:void 0}),e},e.exports=t.default},function(e,t,n){"use strict";var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(0));e.exports=function(e){return e.onIn(function(t){var n=t.from;return t.noRelay?t:(r.without([n],e.connections).forEach(function(e){return e.send(r.assoc("skipValidation",!0,t))}),t)}),e}},function(e,t,n){"use strict";var r,o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(0)),i=(r=n(1))&&r.__esModule?r:{default:r};e.exports=function(e){var t=n(10),r=i.default.v4();return t.launchBus(function(t,n){t&&console.err(t),n.on("process:msg",function(t){t.raw.msg.fromCluster!==r&&"gun:msg"===t.raw.topic&&e.processIn(o.assoc("db",e,t.raw.msg)).catch(function(e){return console.error("PISTOL cluster err",e)})})}),e.onIn(function(e){var t=e.fromCluster;return e.noRelay||t?e:(process.send&&process.send({topic:"gun:msg",msg:o.mergeLeft({fromCluster:r,skipValidation:!0},e)}),e)}),e}},function(e,t){e.exports=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.client=t.server=void 0;var r=n(0),o=u(n(12)),i=u(n(13));function u(e){return e&&e.__esModule?e:{default:e}}var s=(0,r.curry)(function(e,t){var n=!1,r=!0,o=e.connected(function(o){if(o&&(o.json||o.raw)&&r){var i=o.raw||e.stringify(o.json);t.send(i,function(e){e&&!n&&(console.warn("ws send err",e),n=!0)})}}),i=setInterval(function(){return o.send({json:{ping:!0},skipValidation:!0})},6e4);return t.addEventListener("close",function(){t.reconnect||(r=!1,clearInterval(i),e.disconnected(o))}),t.addEventListener("message",function e(t){try{var n=t.data||t,r=JSON.parse(n);Array.isArray(r)?r.forEach(e):o.receive({json:r,raw:n})}catch(e){console.error("RECEIVER invalid ws msg",e,t.data)}}),o}),c=(0,r.curry)(function(e,t){var n=e.web,r=e.port;return new o.default.Server({port:n?void 0:r,server:n}).on("connection",s(t)),t});t.server=c;var a=(0,r.curry)(function(e,t){var n=new i.default(e,[],{WebSocket:o.default});return n.addEventListener("open",function(){return s(t,n)}),t});t.client=a},function(e,t){e.exports=r},function(e,t,n){"use strict";n.r(t);
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function o(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var i=function(){return function(e,t){this.target=t,this.type=e}}(),u=function(e){function t(t,n){var r=e.call(this,"error",n)||this;return r.message=t.message,r.error=t,r}return o(t,e),t}(i),s=function(e){function t(t,n,r){void 0===t&&(t=1e3),void 0===n&&(n="");var o=e.call(this,"close",r)||this;return o.wasClean=!0,o.code=t,o.reason=n,o}return o(t,e),t}(i),c=function(){if("undefined"!=typeof WebSocket)return WebSocket},a={maxReconnectionDelay:1e4,minReconnectionDelay:1e3+4e3*Math.random(),minUptime:5e3,reconnectionDelayGrowFactor:1.3,connectionTimeout:4e3,maxRetries:1/0,debug:!1},f=function(){function e(e,t,n){void 0===n&&(n={});var r=this;this._listeners={error:[],message:[],open:[],close:[]},this._retryCount=-1,this._shouldReconnect=!0,this._connectLock=!1,this._binaryType="blob",this._closeCalled=!1,this._messageQueue=[],this.onclose=void 0,this.onerror=void 0,this.onmessage=void 0,this.onopen=void 0,this._handleOpen=function(e){r._debug("open event");var t=r._options.minUptime,n=void 0===t?a.minUptime:t;clearTimeout(r._connectTimeout),r._uptimeTimeout=setTimeout(function(){return r._acceptOpen()},n),r._ws.binaryType=r._binaryType,r._messageQueue.forEach(function(e){return r._ws.send(e)}),r._messageQueue=[],r.onopen&&r.onopen(e),r._listeners.open.forEach(function(t){return r._callEventListener(e,t)})},this._handleMessage=function(e){r._debug("message event"),r.onmessage&&r.onmessage(e),r._listeners.message.forEach(function(t){return r._callEventListener(e,t)})},this._handleError=function(e){r._debug("error event",e.message),r._disconnect(void 0,"TIMEOUT"===e.message?"timeout":void 0),r.onerror&&r.onerror(e),r._debug("exec error listeners"),r._listeners.error.forEach(function(t){return r._callEventListener(e,t)}),r._connect()},this._handleClose=function(e){r._debug("close event"),r._clearTimeouts(),r._shouldReconnect&&r._connect(),r.onclose&&r.onclose(e),r._listeners.close.forEach(function(t){return r._callEventListener(e,t)})},this._url=e,this._protocols=t,this._options=n,this._connect()}return Object.defineProperty(e,"CONNECTING",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(e,"OPEN",{get:function(){return 1},enumerable:!0,configurable:!0}),Object.defineProperty(e,"CLOSING",{get:function(){return 2},enumerable:!0,configurable:!0}),Object.defineProperty(e,"CLOSED",{get:function(){return 3},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"CONNECTING",{get:function(){return e.CONNECTING},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"OPEN",{get:function(){return e.OPEN},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"CLOSING",{get:function(){return e.CLOSING},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"CLOSED",{get:function(){return e.CLOSED},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"binaryType",{get:function(){return this._ws?this._ws.binaryType:this._binaryType},set:function(e){this._binaryType=e,this._ws&&(this._ws.binaryType=e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"retryCount",{get:function(){return Math.max(this._retryCount,0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bufferedAmount",{get:function(){return this._messageQueue.reduce(function(e,t){return"string"==typeof t?e+=t.length:t instanceof Blob?e+=t.size:e+=t.byteLength,e},0)+(this._ws?this._ws.bufferedAmount:0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"extensions",{get:function(){return this._ws?this._ws.extensions:""},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"protocol",{get:function(){return this._ws?this._ws.protocol:""},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"readyState",{get:function(){return this._ws?this._ws.readyState:e.CONNECTING},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"url",{get:function(){return this._ws?this._ws.url:""},enumerable:!0,configurable:!0}),e.prototype.close=function(e,t){void 0===e&&(e=1e3),this._closeCalled=!0,this._shouldReconnect=!1,this._clearTimeouts(),this._ws?this._ws.readyState!==this.CLOSED?this._ws.close(e,t):this._debug("close: already closed"):this._debug("close enqueued: no ws instance")},e.prototype.reconnect=function(e,t){this._shouldReconnect=!0,this._closeCalled=!1,this._retryCount=-1,this._ws&&this._ws.readyState!==this.CLOSED?(this._disconnect(e,t),this._connect()):this._connect()},e.prototype.send=function(e){this._ws&&this._ws.readyState===this.OPEN?(this._debug("send",e),this._ws.send(e)):(this._debug("enqueue",e),this._messageQueue.push(e))},e.prototype.addEventListener=function(e,t){this._listeners[e]&&this._listeners[e].push(t)},e.prototype.removeEventListener=function(e,t){this._listeners[e]&&(this._listeners[e]=this._listeners[e].filter(function(e){return e!==t}))},e.prototype._debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._options.debug&&console.log.apply(console,["RWS>"].concat(e))},e.prototype._getNextDelay=function(){var e=this._options,t=e.reconnectionDelayGrowFactor,n=void 0===t?a.reconnectionDelayGrowFactor:t,r=e.minReconnectionDelay,o=void 0===r?a.minReconnectionDelay:r,i=e.maxReconnectionDelay,u=void 0===i?a.maxReconnectionDelay:i,s=o;return this._retryCount>0&&(s=o*Math.pow(n,this._retryCount-1))>u&&(s=u),this._debug("next delay",s),s},e.prototype._wait=function(){var e=this;return new Promise(function(t){setTimeout(t,e._getNextDelay())})},e.prototype._getNextUrl=function(e){if("string"==typeof e)return Promise.resolve(e);if("function"==typeof e){var t=e();if("string"==typeof t)return Promise.resolve(t);if(t.then)return t}throw Error("Invalid URL")},e.prototype._connect=function(){var e=this;if(!this._connectLock&&this._shouldReconnect){this._connectLock=!0;var t=this._options,n=t.maxRetries,r=void 0===n?a.maxRetries:n,o=t.connectionTimeout,i=void 0===o?a.connectionTimeout:o,u=t.WebSocket,s=void 0===u?c():u;if(this._retryCount>=r)this._debug("max retries reached",this._retryCount,">=",r);else{if(this._retryCount++,this._debug("connect",this._retryCount),this._removeListeners(),"function"!=typeof(f=s)||2!==f.CLOSING)throw Error("No valid WebSocket class provided");var f;this._wait().then(function(){return e._getNextUrl(e._url)}).then(function(t){e._closeCalled?e._connectLock=!1:(e._debug("connect",{url:t,protocols:e._protocols}),e._ws=e._protocols?new s(t,e._protocols):new s(t),e._ws.binaryType=e._binaryType,e._connectLock=!1,e._addListeners(),e._connectTimeout=setTimeout(function(){return e._handleTimeout()},i))})}}},e.prototype._handleTimeout=function(){this._debug("timeout event"),this._handleError(new u(Error("TIMEOUT"),this))},e.prototype._disconnect=function(e,t){if(void 0===e&&(e=1e3),this._clearTimeouts(),this._ws){this._removeListeners();try{this._ws.close(e,t),this._handleClose(new s(e,t,this))}catch(e){}}},e.prototype._acceptOpen=function(){this._debug("accept open"),this._retryCount=0},e.prototype._callEventListener=function(e,t){"handleEvent"in t?t.handleEvent(e):t(e)},e.prototype._removeListeners=function(){this._ws&&(this._debug("removeListeners"),this._ws.removeEventListener("open",this._handleOpen),this._ws.removeEventListener("close",this._handleClose),this._ws.removeEventListener("message",this._handleMessage),this._ws.removeEventListener("error",this._handleError))},e.prototype._addListeners=function(){this._ws&&(this._debug("addListeners"),this._ws.addEventListener("open",this._handleOpen),this._ws.addEventListener("close",this._handleClose),this._ws.addEventListener("message",this._handleMessage),this._ws.addEventListener("error",this._handleError))},e.prototype._clearTimeouts=function(){clearTimeout(this._connectTimeout),clearTimeout(this._uptimeTimeout)},e}();t.default=f}])});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ndW4tcmVjZWl2ZXIvd2VicGFjay91bml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uIiwid2VicGFjazovL2d1bi1yZWNlaXZlci93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9ndW4tcmVjZWl2ZXIvZXh0ZXJuYWwgXCJyYW1kYVwiIiwid2VicGFjazovL2d1bi1yZWNlaXZlci9leHRlcm5hbCBcInV1aWRcIiIsIndlYnBhY2s6Ly9ndW4tcmVjZWl2ZXIvLi9zcmMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vZ3VuLXJlY2VpdmVyLy4vc3JjL2NoYWluLmpzIiwid2VicGFjazovL2d1bi1yZWNlaXZlci8uL3NyYy9jb3JlLmpzIiwid2VicGFjazovL2d1bi1yZWNlaXZlci8uL3NyYy9kaWZmLmpzIiwid2VicGFjazovL2d1bi1yZWNlaXZlci8uL3NyYy9kZWR1cC5qcyIsIndlYnBhY2s6Ly9ndW4tcmVjZWl2ZXIvLi9zcmMvbGVlY2guanMiLCJ3ZWJwYWNrOi8vZ3VuLXJlY2VpdmVyLy4vc3JjL3JlbGF5LmpzIiwid2VicGFjazovL2d1bi1yZWNlaXZlci8uL3NyYy9jbHVzdGVyLmpzIiwid2VicGFjazovL2d1bi1yZWNlaXZlci9leHRlcm5hbCBcInBtMlwiIiwid2VicGFjazovL2d1bi1yZWNlaXZlci8uL3NyYy93ZWJzb2NrZXQuanMiLCJ3ZWJwYWNrOi8vZ3VuLXJlY2VpdmVyL2V4dGVybmFsIFwid3NcIiIsIndlYnBhY2s6Ly9ndW4tcmVjZWl2ZXIvLi9ub2RlX21vZHVsZXMvcmVjb25uZWN0aW5nLXdlYnNvY2tldC9kaXN0L3JlY29ubmVjdGluZy13ZWJzb2NrZXQubWpzIl0sIm5hbWVzIjpbInJvb3QiLCJmYWN0b3J5IiwiZXhwb3J0cyIsIm1vZHVsZSIsInJlcXVpcmUiLCJkZWZpbmUiLCJhbWQiLCJzZWxmIiwidGhpcyIsIl9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfXzBfXyIsIl9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfXzFfXyIsIl9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfXzEwX18iLCJfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFX18xMl9fIiwiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImkiLCJsIiwibW9kdWxlcyIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwidCIsIm1vZGUiLCJfX2VzTW9kdWxlIiwibnMiLCJjcmVhdGUiLCJrZXkiLCJiaW5kIiwibiIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsIl9jaGFpbiIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJfY29yZSIsIl9kZWR1cCIsIl9sZWVjaCIsIl9yZWxheSIsIl9jbHVzdGVyIiwid2Vic29ja2V0VHJhbnNwb3J0IiwiX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQiLCJSIiwiX3V1aWQiLCJkYiIsImdldFBhdGgiLCJrZXlMaXN0IiwidGhpc0NoYWluIiwib3B0cyIsImFyZ3VtZW50cyIsImxlbmd0aCIsInVuZGVmaW5lZCIsIm9uIiwiZm4iLCJnZXRWYWx1ZSIsImhhc1Jlc3BvbnNlIiwiYm91bmQiLCJyZWNlaXZlZCIsInZhbCIsInJlcXVlc3RlZCIsInJlcXVlc3RzIiwiZ3JhcGgiLCJjb25uZWN0aW9uIiwiY29ubmVjdGVkIiwibXNnIiwianNvbiIsImF0IiwicHJvcCIsImF0U291bCIsInNvdWxzIiwia2V5cyIsInB1c2giLCJ1bmlxIiwiZm9yRWFjaCIsInNvdWwiLCJub2RlIiwicGF0aCIsIm1lcmdlRGVlcExlZnQiLCJuZXh0VmFsdWUiLCJnZXROb2RlIiwiaWQiLCJkZWZhdWx0IiwidjQiLCJyZWNlaXZlIiwiIyIsInNraXBWYWxpZGF0aW9uIiwia2wiLCJsYXN0S2V5IiwicGFyZW50VmFsdWUiLCJzbGljZSIsImxlZWNoIiwiZGlzY29ubmVjdGVkIiwidGhlbiIsImlkZW50aXR5IiwiUHJvbWlzZSIsInJlc29sdmUiLCJ1bnN1YnNjcmliZSIsImNvbmNhdCIsIl90b0NvbnN1bWFibGVBcnJheSIsIm9uY2UiLCJnZXREaWZmIiwicHV0IiwiZGlmZnMiLCJhbGwiLCJtYXAiLCJub1JlbGF5IiwiZXhpc3RpbmciLCJkaWZmIiwiZGlmZk5vZGUiLCJwZWVyIiwiY29ubmVjdGlvbnMiLCJfcHJvY2Vzc1F1ZXVlMiIsIl9zbGljZWRUb0FycmF5IiwicHJvY2Vzc1F1ZXVlIiwib25JbiIsInByb2Nlc3NJbiIsIl9wcm9jZXNzUXVldWU0Iiwib25PdXQiLCJwcm9jZXNzT3V0Iiwic3RyaW5naWZ5IiwiSlNPTiIsInNlbmQiLCJfcmVmIiwic2VuZEZuIiwic3RhdGUiLCJoYXNSZXBvcnRlZEVycm9yIiwibXNnSWQiLCJ0byIsImNhdGNoIiwiZXJyIiwiY29uc29sZSIsImVycm9yIiwiX3JlZjIiLCJyYXciLCJfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMiLCJmcm9tIiwiX3JhbWRhIiwic2V0IiwidiIsImFzc29jUGF0aCIsInBpc3RvbENvbm5lY3Rpb24iLCJjb25uZWN0aW9uSWR4IiwiaW5kZXhPZiIsInNwbGljZSIsIl9kaWZmIiwiZm5zIiwicmVtYWluaW5nRm5zIiwicmV2ZXJzZSIsImV4ZWN1dGVOZXh0IiwicG9wIiwiZSIsInJlamVjdCIsIndpdGhvdXQiLCJMZXhpY2FsIiwidXBkYXRlZCIsIm1heFN0YXRlIiwiRGF0ZSIsImdldFRpbWUiLCJleGlzdGluZ1N0YXRlIiwidXBkYXRlZFN0YXRlIiwiY29tcG9zZSIsInZhbHMiLCJhc3NvYyIsInBpY2siLCJfIiwicmVkdWNlIiwidXBkYXRlcyIsImV4aXN0aW5nS2V5U3RhdGUiLCJ1cGRhdGVkS2V5U3RhdGUiLCJleGlzdGluZ1ZhbCIsInVwZGF0ZWRWYWwiLCJNQVhfTVNHX0lEX0NBQ0hFIiwicmVjZWl2ZWRJZHMiLCJzZXRJbnRlcnZhbCIsImlkcyIsImlnbm9yZUxlZWNoaW5nIiwiZmlsdGVyIiwic291bERlbHRhcyIsImhhc1VwZGF0ZXMiLCJrbm93biIsImRlbHRhIiwicGFyc2VGbG9hdCIsInBtMiIsImxhdW5jaEJ1cyIsImJ1cyIsInBhY2tldCIsImZyb21DbHVzdGVyIiwidG9waWMiLCJwcm9jZXNzIiwibWVyZ2VMZWZ0IiwiX3dzIiwiX3JlY29ubmVjdGluZ1dlYnNvY2tldCIsIndzQ29ubmVjdGlvbiIsImN1cnJ5Iiwid3MiLCJoYXNMb2dnZWRFcnIiLCJ3YXJuIiwicGluZ0ludGVydmFsIiwicGluZyIsImFkZEV2ZW50TGlzdGVuZXIiLCJyZWNvbm5lY3QiLCJjbGVhckludGVydmFsIiwiZGF0YSIsInBhcnNlIiwiQXJyYXkiLCJpc0FycmF5Iiwic2VydmVyIiwid2ViIiwicG9ydCIsIlNlcnZlciIsImNsaWVudCIsInVybCIsIldlYlNvY2tldCIsIl9fd2VicGFja19leHBvcnRzX18iLCJleHRlbmRTdGF0aWNzIiwiYiIsInNldFByb3RvdHlwZU9mIiwiX19wcm90b19fIiwiX19leHRlbmRzIiwiX18iLCJjb25zdHJ1Y3RvciIsIkV2ZW50IiwidHlwZSIsInRhcmdldCIsIkVycm9yRXZlbnQiLCJfc3VwZXIiLCJfdGhpcyIsIm1lc3NhZ2UiLCJDbG9zZUV2ZW50IiwiY29kZSIsInJlYXNvbiIsIndhc0NsZWFuIiwiZ2V0R2xvYmFsV2ViU29ja2V0IiwiREVGQVVMVCIsIm1heFJlY29ubmVjdGlvbkRlbGF5IiwibWluUmVjb25uZWN0aW9uRGVsYXkiLCJNYXRoIiwicmFuZG9tIiwibWluVXB0aW1lIiwicmVjb25uZWN0aW9uRGVsYXlHcm93RmFjdG9yIiwiY29ubmVjdGlvblRpbWVvdXQiLCJtYXhSZXRyaWVzIiwiSW5maW5pdHkiLCJkZWJ1ZyIsIlJlY29ubmVjdGluZ1dlYlNvY2tldCIsInByb3RvY29scyIsIm9wdGlvbnMiLCJfbGlzdGVuZXJzIiwib3BlbiIsImNsb3NlIiwiX3JldHJ5Q291bnQiLCJfc2hvdWxkUmVjb25uZWN0IiwiX2Nvbm5lY3RMb2NrIiwiX2JpbmFyeVR5cGUiLCJfY2xvc2VDYWxsZWQiLCJfbWVzc2FnZVF1ZXVlIiwib25jbG9zZSIsIm9uZXJyb3IiLCJvbm1lc3NhZ2UiLCJvbm9wZW4iLCJfaGFuZGxlT3BlbiIsImV2ZW50IiwiX2RlYnVnIiwiX2EiLCJfb3B0aW9ucyIsImNsZWFyVGltZW91dCIsIl9jb25uZWN0VGltZW91dCIsIl91cHRpbWVUaW1lb3V0Iiwic2V0VGltZW91dCIsIl9hY2NlcHRPcGVuIiwiYmluYXJ5VHlwZSIsImxpc3RlbmVyIiwiX2NhbGxFdmVudExpc3RlbmVyIiwiX2hhbmRsZU1lc3NhZ2UiLCJfaGFuZGxlRXJyb3IiLCJfZGlzY29ubmVjdCIsIl9jb25uZWN0IiwiX2hhbmRsZUNsb3NlIiwiX2NsZWFyVGltZW91dHMiLCJfdXJsIiwiX3Byb3RvY29scyIsImNvbmZpZ3VyYWJsZSIsIkNPTk5FQ1RJTkciLCJPUEVOIiwiQ0xPU0lORyIsIkNMT1NFRCIsIm1heCIsImFjYyIsIkJsb2IiLCJzaXplIiwiYnl0ZUxlbmd0aCIsImJ1ZmZlcmVkQW1vdW50IiwiZXh0ZW5zaW9ucyIsInByb3RvY29sIiwicmVhZHlTdGF0ZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJhcmdzIiwiX2kiLCJsb2ciLCJhcHBseSIsIl9nZXROZXh0RGVsYXkiLCJfYiIsIl9jIiwiX2QiLCJkZWxheSIsInBvdyIsIl93YWl0IiwiX2dldE5leHRVcmwiLCJ1cmxQcm92aWRlciIsIkVycm9yIiwiX3JlbW92ZUxpc3RlbmVycyIsInciLCJfYWRkTGlzdGVuZXJzIiwiX2hhbmRsZVRpbWVvdXQiLCJoYW5kbGVFdmVudCJdLCJtYXBwaW5ncyI6IkNBQUEsU0FBQUEsRUFBQUMsR0FDQSxpQkFBQUMsU0FBQSxpQkFBQUMsT0FDQUEsT0FBQUQsUUFBQUQsRUFBQUcsUUFBQSxTQUFBQSxRQUFBLFFBQUFBLFFBQUEsT0FBQUEsUUFBQSxPQUNBLG1CQUFBQyxlQUFBQyxJQUNBRCxPQUFBLDJD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cU0sSUFBQVMsaUJBQUEsUUFBQTlNLEtBQUE0UixjQUNBNVIsS0FBQXFNLElBQUFTLGlCQUFBLFVBQUE5TSxLQUFBd1IsZ0JBRUF4UixLQUFBcU0sSUFBQVMsaUJBQUEsUUFBQTlNLEtBQUF5UixnQkFFQTlCLEVBQUF2TixVQUFBeVAsZUFBQSxXQUNBYixhQUFBaFIsS0FBQWlSLGlCQUNBRCxhQUFBaFIsS0FBQWtSLGlCQUVBdkIsRUFuYkEsR0FzYmUvQixFQUFBIiwiZmlsZSI6Imd1bi1yZWNlaXZlci5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gd2VicGFja1VuaXZlcnNhbE1vZHVsZURlZmluaXRpb24ocm9vdCwgZmFjdG9yeSkge1xuXHRpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG1vZHVsZSA9PT0gJ29iamVjdCcpXG5cdFx0bW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KHJlcXVpcmUoXCJyYW1kYVwiKSwgcmVxdWlyZShcInV1aWRcIiksIHJlcXVpcmUoXCJwbTJcIiksIHJlcXVpcmUoXCJ3c1wiKSk7XG5cdGVsc2UgaWYodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKVxuXHRcdGRlZmluZShcImd1bi1yZWNlaXZlclwiLCBbXCJyYW1kYVwiLCBcInV1aWRcIiwgXCJwbTJcIiwgXCJ3c1wiXSwgZmFjdG9yeSk7XG5cdGVsc2UgaWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnKVxuXHRcdGV4cG9ydHNbXCJndW4tcmVjZWl2ZXJcIl0gPSBmYWN0b3J5KHJlcXVpcmUoXCJyYW1kYVwiKSwgcmVxdWlyZShcInV1aWRcIiksIHJlcXVpcmUoXCJwbTJcIiksIHJlcXVpcmUoXCJ3c1wiKSk7XG5cdGVsc2Vcblx0XHRyb290W1wiZ3VuLXJlY2VpdmVyXCJdID0gZmFjdG9yeShyb290W1wicmFtZGFcIl0sIHJvb3RbXCJ1dWlkXCJdLCByb290W1wicG0yXCJdLCByb290W1wid3NcIl0pO1xufSkodHlwZW9mIHNlbGYgIT09ICd1bmRlZmluZWQnID8gc2VsZiA6IHRoaXMsIGZ1bmN0aW9uKF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfXzBfXywgX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV9fMV9fLCBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFX18xMF9fLCBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFX18xMl9fKSB7XG5yZXR1cm4gIiwiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDIpO1xuIiwibW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFX18wX187IiwibW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFX18xX187IiwiZXhwb3J0IHsgZGVmYXVsdCBhcyBjaGFpbkludGVyZmFjZSB9IGZyb20gXCIuL2NoYWluXCI7XG5leHBvcnQgeyBkZWZhdWx0IGFzIFJlY2VpdmVyIH0gZnJvbSBcIi4vY29yZVwiO1xuZXhwb3J0IHsgZGVmYXVsdCBhcyBkZWR1cGxpY2F0ZU1lc3NhZ2VzIH0gZnJvbSBcIi4vZGVkdXBcIjtcbmV4cG9ydCB7IGRlZmF1bHQgYXMgYWxsb3dMZWVjaCB9IGZyb20gXCIuL2xlZWNoXCI7XG5leHBvcnQgeyBkZWZhdWx0IGFzIHJlbGF5TWVzc2FnZXMgfSBmcm9tIFwiLi9yZWxheVwiO1xuZXhwb3J0IHsgZGVmYXVsdCBhcyBjbHVzdGVyIH0gZnJvbSBcIi4vY2x1c3RlclwiO1xuaW1wb3J0ICogYXMgd2Vic29ja2V0IGZyb20gXCIuL3dlYnNvY2tldFwiO1xuXG5leHBvcnQgY29uc3Qgd2Vic29ja2V0VHJhbnNwb3J0ID0gd2Vic29ja2V0O1xuIiwiLyogZ2xvYmFscyBQcm9taXNlICovXG5pbXBvcnQgKiBhcyBSIGZyb20gXCJyYW1kYVwiO1xuaW1wb3J0IHV1aWQgZnJvbSBcInV1aWRcIjtcblxuZXhwb3J0IGRlZmF1bHQgZGIgPT4ge1xuICBjb25zdCBnZXRQYXRoID0gKGtleUxpc3QsIG9wdHMgPSB7fSkgPT4ge1xuICAgIGxldCB0aGlzQ2hhaW47XG4gICAgY29uc3Qgb24gPSBmbiA9PiB7XG4gICAgICBsZXQgdmFsdWUsIGdldFZhbHVlO1xuICAgICAgbGV0IGhhc1Jlc3BvbnNlID0gZmFsc2U7XG4gICAgICBjb25zdCBib3VuZCA9IGZuLmJpbmQodGhpc0NoYWluKTtcbiAgICAgIGNvbnN0IHJlY2VpdmVkID0gdmFsID0+IChoYXNSZXNwb25zZSA9IHRydWUpICYmIGJvdW5kKCh2YWx1ZSA9IHZhbCkpO1xuICAgICAgY29uc3QgcmVxdWVzdGVkID0ge307XG4gICAgICBjb25zdCByZXF1ZXN0cyA9IHt9O1xuICAgICAgY29uc3QgZ3JhcGggPSB7fTtcblxuICAgICAgY29uc3QgY29ubmVjdGlvbiA9IGRiLmNvbm5lY3RlZChtc2cgPT4ge1xuICAgICAgICBjb25zdCB7IGpzb24gfSA9IG1zZztcbiAgICAgICAgY29uc3QgYXQgPSBSLnByb3AoXCJAXCIsIGpzb24pO1xuICAgICAgICBjb25zdCBhdFNvdWwgPSByZXF1ZXN0c1thdF07XG4gICAgICAgIGNvbnN0IHNvdWxzID0gUi5rZXlzKFIucHJvcChcInB1dFwiLCBqc29uKSk7XG5cbiAgICAgICAgaWYgKGF0U291bCkgc291bHMucHVzaChhdFNvdWwpO1xuICAgICAgICBpZiAoIXNvdWxzLmxlbmd0aCkgcmV0dXJuO1xuICAgICAgICBSLnVuaXEoc291bHMpLmZvckVhY2goc291bCA9PiB7XG4gICAgICAgICAgaWYgKCFyZXF1ZXN0ZWRbc291bF0pIHJldHVybjtcbiAgICAgICAgICBjb25zdCBub2RlID0gUi5wYXRoKFtcInB1dFwiLCBzb3VsXSwganNvbik7XG5cbiAgICAgICAgICBpZiAoIW5vZGUgJiYgIWhhc1Jlc3BvbnNlKSByZWNlaXZlZCgpO1xuICAgICAgICAgIGlmIChub2RlKSBncmFwaFtzb3VsXSA9IFIubWVyZ2VEZWVwTGVmdChub2RlLCBncmFwaFtzb3VsXSB8fCB7fSk7XG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCBuZXh0VmFsdWUgPSBnZXRWYWx1ZShrZXlMaXN0KTtcblxuICAgICAgICBpZiAobmV4dFZhbHVlICE9PSB2YWx1ZSkgcmVjZWl2ZWQobmV4dFZhbHVlKTtcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCBnZXROb2RlID0gc291bCA9PiB7XG4gICAgICAgIGlmIChyZXF1ZXN0ZWRbc291bF0pIHJldHVybiBncmFwaFtzb3VsXTtcbiAgICAgICAgY29uc3QgaWQgPSB1dWlkLnY0KCk7XG5cbiAgICAgICAgcmVxdWVzdGVkW3NvdWxdID0gaWQ7XG4gICAgICAgIHJlcXVlc3RzW2lkXSA9IHNvdWw7XG4gICAgICAgIGNvbm5lY3Rpb24ucmVjZWl2ZSh7XG4gICAgICAgICAgLi4ub3B0cyxcbiAgICAgICAgICBqc29uOiB7IFwiI1wiOiBpZCwgZ2V0OiB7IFwiI1wiOiBzb3VsIH0gfSxcbiAgICAgICAgICBza2lwVmFsaWRhdGlvbjogdHJ1ZVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGdyYXBoW3NvdWxdO1xuICAgICAgfTtcblxuICAgICAgZ2V0VmFsdWUgPSBrbCA9PiB7XG4gICAgICAgIGNvbnN0IGxhc3RLZXkgPSBrbFtrbC5sZW5ndGggLSAxXTtcblxuICAgICAgICBpZiAoa2wubGVuZ3RoID09PSAxKSByZXR1cm4gZ2V0Tm9kZShsYXN0S2V5KTtcbiAgICAgICAgY29uc3QgcGFyZW50VmFsdWUgPSBnZXRWYWx1ZShrbC5zbGljZSgwLCBrbC5sZW5ndGggLSAxKSk7XG5cbiAgICAgICAgaWYgKCFwYXJlbnRWYWx1ZSkgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgY29uc3QgdmFsdWUgPSBSLnByb3AobGFzdEtleSwgcGFyZW50VmFsdWUpO1xuXG4gICAgICAgIGlmICh2YWx1ZSAmJiB2YWx1ZVtcIiNcIl0pIHJldHVybiBnZXROb2RlKHZhbHVlW1wiI1wiXSk7XG4gICAgICAgIGlmIChrbCA9PT0ga2V5TGlzdCkgcmVjZWl2ZWQodmFsdWUpO1xuICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICB9O1xuXG4gICAgICBjb25uZWN0aW9uLnJlY2VpdmUoeyBqc29uOiB7IGxlZWNoOiB0cnVlIH0gfSk7XG4gICAgICBnZXRWYWx1ZShrZXlMaXN0KTtcbiAgICAgIHJldHVybiAoKSA9PiBkYi5kaXNjb25uZWN0ZWQoY29ubmVjdGlvbik7XG4gICAgfTtcblxuICAgIGNvbnN0IHRoZW4gPSAoZm4gPSBSLmlkZW50aXR5KSA9PlxuICAgICAgbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XG4gICAgICAgIGNvbnN0IHVuc3Vic2NyaWJlID0gb24odmFsID0+IHtcbiAgICAgICAgICByZXNvbHZlKHZhbCk7XG4gICAgICAgICAgdW5zdWJzY3JpYmUoKTtcbiAgICAgICAgfSk7XG4gICAgICB9KS50aGVuKGZuKTtcblxuICAgIGNvbnN0IG9uY2UgPSBmbiA9PiB0aGVuKGZuLmJpbmQodGhpc0NoYWluKSkgJiYgdGhpc0NoYWluO1xuICAgIGNvbnN0IGdldCA9IChrZXksIG9wdHMgPSB7fSkgPT4gZ2V0UGF0aChbLi4ua2V5TGlzdCwga2V5XSwgb3B0cyk7XG5cbiAgICB0aGlzQ2hhaW4gPSB7IGdldCwgb24sIHRoZW4sIG9uY2UgfTtcbiAgICByZXR1cm4gdGhpc0NoYWluO1xuICB9O1xuXG4gIGNvbnN0IGdldERpZmYgPSBwdXQgPT4ge1xuICAgIGNvbnN0IHNvdWxzID0gUi5rZXlzKHB1dCk7XG4gICAgY29uc3QgZGlmZnMgPSB7fTtcblxuICAgIGlmICghc291bHMubGVuZ3RoKSByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHt9KTtcbiAgICByZXR1cm4gUHJvbWlzZS5hbGwoXG4gICAgICBzb3Vscy5tYXAoc291bCA9PlxuICAgICAgICBkYi5nZXQoc291bCwgeyBub1JlbGF5OiB0cnVlIH0pLnRoZW4oZXhpc3RpbmcgPT4ge1xuICAgICAgICAgIGNvbnN0IGRpZmYgPSBkYi5kaWZmTm9kZShleGlzdGluZywgcHV0W3NvdWxdKTtcblxuICAgICAgICAgIGlmIChkaWZmKSBkaWZmc1tzb3VsXSA9IGRpZmY7XG4gICAgICAgIH0pXG4gICAgICApXG4gICAgKS50aGVuKCgpID0+IHtcbiAgICAgIGlmICghUi5rZXlzKGRpZmZzKS5sZW5ndGgpIHJldHVybiBudWxsO1xuICAgICAgcmV0dXJuIGRpZmZzO1xuICAgIH0pO1xuICB9O1xuXG4gIGRiLmdldCA9IChrZXksIG9wdHMgPSB7fSkgPT4gZ2V0UGF0aChba2V5XSwgb3B0cyk7XG4gIGRiLmdldERpZmYgPSBnZXREaWZmO1xuICByZXR1cm4gZGI7XG59O1xuIiwiLyogZ2xvYmFscyBQcm9taXNlICovXG5pbXBvcnQgeyBhc3NvY1BhdGgsIHBhdGgsIHdpdGhvdXQgfSBmcm9tIFwicmFtZGFcIjtcbmltcG9ydCB1dWlkIGZyb20gXCJ1dWlkXCI7XG5pbXBvcnQgeyBkaWZmTm9kZSB9IGZyb20gXCIuL2RpZmZcIjtcblxuZnVuY3Rpb24gcHJvY2Vzc1F1ZXVlKCkge1xuICBsZXQgZm5zID0gW107XG4gIGNvbnN0IHF1ZXVlID0gZm4gPT4gZm5zLnB1c2goZm4pO1xuICBjb25zdCBkZXF1ZXVlID0gZm4gPT4gKGZucyA9IHdpdGhvdXQoW2ZuXSwgZm5zKSk7XG5cbiAgZnVuY3Rpb24gZXhlY3V0ZShtc2cpIHtcbiAgICBjb25zdCByZW1haW5pbmdGbnMgPSBmbnMuc2xpY2UoKS5yZXZlcnNlKCk7XG4gICAgY29uc3QgZXhlY3V0ZU5leHQgPSBtc2cgPT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgZm4gPSByZW1haW5pbmdGbnMucG9wKCk7XG5cbiAgICAgICAgaWYgKG1zZyAmJiBmbikgcmV0dXJuIFByb21pc2UucmVzb2x2ZShmbihtc2cpKS50aGVuKGV4ZWN1dGVOZXh0KTtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShtc2cpO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZSk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIHJldHVybiBleGVjdXRlTmV4dChtc2cpO1xuICB9XG5cbiAgcmV0dXJuIFtxdWV1ZSwgZXhlY3V0ZSwgZGVxdWV1ZV07XG59XG5cbmZ1bmN0aW9uIHBpc3RvbENvbm5lY3Rpb24oeyBkYiwgc2VuZDogc2VuZEZuIH0pIHtcbiAgbGV0IGNvbm5lY3Rpb247XG4gIGxldCBzdGF0ZSA9IHt9O1xuICBsZXQgaGFzUmVwb3J0ZWRFcnJvciA9IGZhbHNlO1xuICBjb25zdCBnZXQgPSBwID0+IHBhdGgocCwgc3RhdGUpO1xuICBjb25zdCBzZXQgPSAocCwgdikgPT4gKHN0YXRlID0gYXNzb2NQYXRoKHAsIHYsIHN0YXRlKSk7IC8vICYmIGNvbnNvbGUubG9nKHN0YXRlKTtcbiAgY29uc3QgeyBtc2dJZCB9ID0gZGI7XG4gIGNvbnN0IHNlbmQgPSBtc2cgPT5cbiAgICBkYlxuICAgICAgLnByb2Nlc3NPdXQoeyAuLi5tc2csIHRvOiBjb25uZWN0aW9uIH0pXG4gICAgICAudGhlbihyID0+IHIgJiYgc2VuZEZuKHIpKVxuICAgICAgLmNhdGNoKGVyciA9PiB7XG4gICAgICAgIGlmICghaGFzUmVwb3J0ZWRFcnJvcikge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXG4gICAgICAgICAgICBcIlBJU1RPTCBzZW5kIGVyclwiLFxuICAgICAgICAgICAgSlNPTi5zdHJpbmdpZnkobXNnLCBudWxsLCAyKSxcbiAgICAgICAgICAgIG1zZy5qc29uLnB1dCxcbiAgICAgICAgICAgIGVyclxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgICAgaGFzUmVwb3J0ZWRFcnJvciA9IHRydWU7XG4gICAgICB9KTtcbiAgY29uc3QgcmVjZWl2ZSA9ICh7IGpzb24sIHJhdywgLi4ub3B0cyB9KSA9PiB7XG4gICAgcmV0dXJuIGRiXG4gICAgICAucHJvY2Vzc0luKHtcbiAgICAgICAgLi4ub3B0cyxcbiAgICAgICAgZGIsXG4gICAgICAgIGpzb246IHsgLi4uanNvbiwgXCIjXCI6IGpzb25bXCIjXCJdIHx8IG1zZ0lkKCkgfSxcbiAgICAgICAgZnJvbTogY29ubmVjdGlvblxuICAgICAgfSlcbiAgICAgIC5jYXRjaChlcnIgPT4gY29uc29sZS5lcnJvcihcIlBJU1RPTCByZWNlaXZlIGVyclwiLCBlcnIsIHJhdyB8fCBqc29uKSk7XG4gIH07XG5cbiAgY29ubmVjdGlvbiA9IHsgc2VuZCwgcmVjZWl2ZSwgZ2V0LCBzZXQsIG1zZ0lkIH07XG4gIHJldHVybiBjb25uZWN0aW9uO1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBSZWNlaXZlcigpIHtcbiAgbGV0IHBlZXI7XG4gIGNvbnN0IGNvbm5lY3Rpb25zID0gW107XG4gIGNvbnN0IFtvbkluLCBwcm9jZXNzSW5dID0gcHJvY2Vzc1F1ZXVlKCk7XG4gIGNvbnN0IFtvbk91dCwgcHJvY2Vzc091dF0gPSBwcm9jZXNzUXVldWUoKTtcbiAgY29uc3QgbXNnSWQgPSAoKSA9PiB1dWlkLnY0KCk7XG4gIGNvbnN0IHN0cmluZ2lmeSA9IEpTT04uc3RyaW5naWZ5O1xuXG4gIGZ1bmN0aW9uIGNvbm5lY3RlZChzZW5kKSB7XG4gICAgY29uc3QgY29ubmVjdGlvbiA9IHBpc3RvbENvbm5lY3Rpb24oeyBkYjogcGVlciwgc2VuZCB9KTtcblxuICAgIGNvbm5lY3Rpb25zLnB1c2goY29ubmVjdGlvbik7XG4gICAgcmV0dXJuIGNvbm5lY3Rpb247XG4gIH1cblxuICBmdW5jdGlvbiBkaXNjb25uZWN0ZWQoY29ubmVjdGlvbikge1xuICAgIGNvbnN0IGNvbm5lY3Rpb25JZHggPSBjb25uZWN0aW9ucy5pbmRleE9mKGNvbm5lY3Rpb24pO1xuXG4gICAgaWYgKGNvbm5lY3Rpb25JZHggIT09IC0xKSBjb25uZWN0aW9ucy5zcGxpY2UoY29ubmVjdGlvbklkeCwgMSk7XG4gIH1cblxuICBwZWVyID0ge1xuICAgIGNvbm5lY3Rpb25zLFxuICAgIGNvbm5lY3RlZCxcbiAgICBkaXNjb25uZWN0ZWQsXG4gICAgbXNnSWQsXG4gICAgb25JbixcbiAgICBvbk91dCxcbiAgICBwcm9jZXNzSW4sXG4gICAgcHJvY2Vzc091dCxcbiAgICBzdHJpbmdpZnksXG4gICAgZGlmZk5vZGVcbiAgfTtcbiAgcmV0dXJuIHBlZXI7XG59XG4iLCJpbXBvcnQgKiBhcyBSIGZyb20gXCJyYW1kYVwiO1xuXG5jb25zdCBHUkFDRSA9IDEwICogNjAgKiAxMDAwOyAvLyBIb3cgZmFyIGFoZWFkIGNsb2NrIGNhbiBiZSwgdW5saWtlIGd1biB3ZSBqdXN0IGRpc2NhcmQgbm90IGRlZmVyXG5jb25zdCBMZXhpY2FsID0gSlNPTi5zdHJpbmdpZnk7IC8vIFRoaXMgaXMgd2hhdCBHdW4gdXNlc1xuXG5leHBvcnQgY29uc3QgZGlmZk5vZGUgPSAoZXhpc3RpbmcsIHVwZGF0ZWQsIG1hY2hpbmVTdGF0ZSA9IG51bGwpID0+IHtcbiAgbGV0IG1heFN0YXRlID0gKG1hY2hpbmVTdGF0ZSB8fCBuZXcgRGF0ZSgpLmdldFRpbWUoKSkgKyBHUkFDRTsgLy8gZXNsaW50LWRpc2FibGUtbGluZVxuICBjb25zdCBleGlzdGluZ1N0YXRlID0gUi5wYXRoKFtcIl9cIiwgXCI+XCJdLCBleGlzdGluZykgfHwge307XG4gIGNvbnN0IHVwZGF0ZWRTdGF0ZSA9IFIucGF0aChbXCJfXCIsIFwiPlwiXSwgdXBkYXRlZCkgfHwge307XG5cbiAgcmV0dXJuIFIuY29tcG9zZShcbiAgICB2YWxzID0+IHtcbiAgICAgIGNvbnN0IGtleXMgPSBSLmtleXModmFscyk7XG5cbiAgICAgIGlmICgha2V5cy5sZW5ndGgpIHJldHVybiBudWxsO1xuICAgICAgcmV0dXJuIFIuYXNzb2MoXG4gICAgICAgIFwiX1wiLFxuICAgICAgICBSLmFzc29jKFwiPlwiLCBSLnBpY2soa2V5cywgdXBkYXRlZFN0YXRlKSwgdXBkYXRlZC5fKSxcbiAgICAgICAgdmFsc1xuICAgICAgKTtcbiAgICB9LFxuICAgIFIucmVkdWNlKCh1cGRhdGVzLCBrZXkpID0+IHtcbiAgICAgIGNvbnN0IGV4aXN0aW5nS2V5U3RhdGUgPSBleGlzdGluZ1N0YXRlW2tleV07XG4gICAgICBjb25zdCB1cGRhdGVkS2V5U3RhdGUgPSB1cGRhdGVkU3RhdGVba2V5XTtcblxuICAgICAgaWYgKHVwZGF0ZWRLZXlTdGF0ZSA+IG1heFN0YXRlIHx8ICF1cGRhdGVkS2V5U3RhdGUpIHJldHVybiB1cGRhdGVzO1xuICAgICAgaWYgKGV4aXN0aW5nS2V5U3RhdGUgJiYgZXhpc3RpbmdLZXlTdGF0ZSA+PSB1cGRhdGVkS2V5U3RhdGUpXG4gICAgICAgIHJldHVybiB1cGRhdGVzO1xuXG4gICAgICBpZiAoZXhpc3RpbmdLZXlTdGF0ZSA9PT0gdXBkYXRlZEtleVN0YXRlKSB7XG4gICAgICAgIGNvbnN0IGV4aXN0aW5nVmFsID0gUi5wcm9wKGtleSwgZXhpc3RpbmcpO1xuICAgICAgICBjb25zdCB1cGRhdGVkVmFsID0gUi5wcm9wKGtleSwgdXBkYXRlZCk7XG5cbiAgICAgICAgLy8gVGhpcyBpcyBiYXNlZCBvbiBHdW4ncyBsb2dpY1xuICAgICAgICBpZiAoTGV4aWNhbCh1cGRhdGVkVmFsKSA8PSBMZXhpY2FsKGV4aXN0aW5nVmFsKSkgcmV0dXJuIHVwZGF0ZWQ7XG4gICAgICB9XG4gICAgICB1cGRhdGVzW2tleV0gPSB1cGRhdGVkW2tleV07XG4gICAgICByZXR1cm4gdXBkYXRlcztcbiAgICB9LCB7fSksXG4gICAgUi5rZXlzXG4gICkodXBkYXRlZFN0YXRlKTtcbn07XG4iLCJpbXBvcnQgeyBwYXRoLCBrZXlzIH0gZnJvbSBcInJhbWRhXCI7XG5jb25zdCBNQVhfTVNHX0lEX0NBQ0hFID0gNTAwMDA7XG5jb25zdCBHQVJCQUdFX0lOVEVSVkFMID0gNjAwMDA7XG5cbmV4cG9ydCBkZWZhdWx0IGRiID0+IHtcbiAgY29uc3QgcmVjZWl2ZWRJZHMgPSB7fTtcblxuICBmdW5jdGlvbiBjb2xsZWN0R2FyYmFnZSgpIHtcbiAgICBsZXQgaWRzID0ga2V5cyhyZWNlaXZlZElkcykucmV2ZXJzZSgpO1xuXG4gICAgd2hpbGUgKGlkcy5sZW5ndGggPiBNQVhfTVNHX0lEX0NBQ0hFKSB7XG4gICAgICBkZWxldGUgcmVjZWl2ZWRJZHNbaWRzLnBvcCgpXTtcbiAgICB9XG4gIH1cblxuICBkYi5vbkluKG1zZyA9PiB7XG4gICAgY29uc3QgaWQgPSBwYXRoKFtcImpzb25cIiwgXCIjXCJdLCBtc2cpO1xuXG4gICAgaWYgKCFpZCB8fCByZWNlaXZlZElkc1tpZF0pIHJldHVybiBudWxsO1xuICAgIHJlY2VpdmVkSWRzW2lkXSA9IHRydWU7XG4gICAgcmV0dXJuIG1zZztcbiAgfSk7XG5cbiAgc2V0SW50ZXJ2YWwoY29sbGVjdEdhcmJhZ2UsIEdBUkJBR0VfSU5URVJWQUwpO1xuXG4gIHJldHVybiBkYjtcbn07XG4iLCJpbXBvcnQgeyBwYXRoLCBrZXlzIH0gZnJvbSBcInJhbWRhXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGRiID0+IHtcbiAgZGIub25Jbihtc2cgPT4ge1xuICAgIGlmICghbXNnLmZyb20gfHwgIW1zZy5mcm9tLnNldCkgcmV0dXJuIG1zZztcbiAgICBpZiAocGF0aChbXCJqc29uXCIsIFwibGVlY2hcIl0sIG1zZykpIHtcbiAgICAgIG1zZy5mcm9tLnNldChbXCJpc0xlZWNoaW5nXCJdLCB0cnVlKTtcbiAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGNvbnN0IGFza2luZ0ZvciA9IHBhdGgoW1wianNvblwiLCBcImdldFwiLCBcIiNcIl0sIG1zZyk7XG5cbiAgICBbYXNraW5nRm9yLCAuLi5rZXlzKHBhdGgoW1wianNvblwiLCBcInB1dFwiXSwgbXNnKSldLmZvckVhY2goXG4gICAgICBzb3VsID0+IHNvdWwgJiYgbXNnLmZyb20uc2V0KFtcImhhc0Fza2VkRm9yXCIsIHNvdWxdLCB0cnVlKVxuICAgICk7XG4gICAgcmV0dXJuIG1zZztcbiAgfSk7XG5cbiAgZGIub25PdXQobXNnID0+IHtcbiAgICBjb25zdCB7IHRvLCBqc29uLCBpZ25vcmVMZWVjaGluZyB9ID0gbXNnO1xuXG4gICAgaWYgKCF0by5nZXQoW1wiaXNMZWVjaGluZ1wiXSkgfHwgaWdub3JlTGVlY2hpbmcpIHJldHVybiBtc2c7XG4gICAgY29uc3QgYXNrZWRQdXRzID0ga2V5cyhqc29uLnB1dCkuZmlsdGVyKHNvdWwgPT4ge1xuICAgICAgaWYgKCF0by5nZXQoW1wiaGFzQXNrZWRGb3JcIiwgc291bF0pKSByZXR1cm4gZmFsc2U7XG4gICAgICBjb25zdCBzb3VsRGVsdGFzID0gcGF0aChbc291bCwgXCJfXCIsIFwiPlwiXSwganNvbi5wdXQpO1xuICAgICAgbGV0IGhhc1VwZGF0ZXMgPSBmYWxzZTtcblxuICAgICAgaWYgKCFrZXlzKHNvdWxEZWx0YXMpLmxlbmd0aCkgcmV0dXJuIHRydWU7XG5cbiAgICAgIGtleXMoc291bERlbHRhcykuZm9yRWFjaChrZXkgPT4ge1xuICAgICAgICBjb25zdCBrbm93biA9IHRvLmdldChbXCJrbm93bkRlbHRhc1wiLCBzb3VsLCBrZXldKSB8fCAwO1xuICAgICAgICBjb25zdCBkZWx0YSA9IHBhcnNlRmxvYXQoc291bERlbHRhc1trZXldKSB8fCAwO1xuXG4gICAgICAgIGlmIChrbm93biAmJiBkZWx0YSA8PSBrbm93bikgcmV0dXJuO1xuICAgICAgICB0by5zZXQoW1wia25vd25EZWx0YXNcIiwgc291bCwga2V5XSwgZGVsdGEpO1xuICAgICAgICBoYXNVcGRhdGVzID0gdHJ1ZTtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIGhhc1VwZGF0ZXM7XG4gICAgfSk7XG5cbiAgICBpZiAoYXNrZWRQdXRzLmxlbmd0aCkgcmV0dXJuIG1zZztcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9KTtcblxuICByZXR1cm4gZGI7XG59O1xuIiwiaW1wb3J0ICogYXMgUiBmcm9tIFwicmFtZGFcIjtcblxubW9kdWxlLmV4cG9ydHMgPSBkYiA9PiB7XG4gIGRiLm9uSW4obXNnID0+IHtcbiAgICBjb25zdCB7IGZyb20sIG5vUmVsYXkgfSA9IG1zZztcblxuICAgIGlmIChub1JlbGF5KSByZXR1cm4gbXNnO1xuICAgIFIud2l0aG91dChbZnJvbV0sIGRiLmNvbm5lY3Rpb25zKS5mb3JFYWNoKGMgPT5cbiAgICAgIGMuc2VuZChSLmFzc29jKFwic2tpcFZhbGlkYXRpb25cIiwgdHJ1ZSwgbXNnKSlcbiAgICApO1xuICAgIHJldHVybiBtc2c7XG4gIH0pO1xuICByZXR1cm4gZGI7XG59O1xuIiwiaW1wb3J0ICogYXMgUiBmcm9tIFwicmFtZGFcIjtcbmltcG9ydCB1dWlkIGZyb20gXCJ1dWlkXCI7XG5cbmNvbnN0IE1TR19UT1BJQyA9IFwiZ3VuOm1zZ1wiO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGRiID0+IHtcbiAgY29uc3QgcG0yID0gcmVxdWlyZShcInBtMlwiKTtcbiAgY29uc3QgaWQgPSB1dWlkLnY0KCk7XG5cbiAgcG0yLmxhdW5jaEJ1cygoZXJyLCBidXMpID0+IHtcbiAgICBpZiAoZXJyKSBjb25zb2xlLmVycihlcnIpO1xuICAgIGJ1cy5vbihcInByb2Nlc3M6bXNnXCIsIHBhY2tldCA9PiB7XG4gICAgICBpZiAocGFja2V0LnJhdy5tc2cuZnJvbUNsdXN0ZXIgPT09IGlkKSByZXR1cm47XG4gICAgICBpZiAocGFja2V0LnJhdy50b3BpYyA9PT0gTVNHX1RPUElDKSB7XG4gICAgICAgIGRiLnByb2Nlc3NJbihSLmFzc29jKFwiZGJcIiwgZGIsIHBhY2tldC5yYXcubXNnKSkuY2F0Y2goZXJyID0+XG4gICAgICAgICAgY29uc29sZS5lcnJvcihcIlBJU1RPTCBjbHVzdGVyIGVyclwiLCBlcnIpXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRiLm9uSW4obXNnID0+IHtcbiAgICBjb25zdCB7IGZyb21DbHVzdGVyLCBub1JlbGF5IH0gPSBtc2c7XG5cbiAgICBpZiAobm9SZWxheSB8fCBmcm9tQ2x1c3RlcikgcmV0dXJuIG1zZztcbiAgICBpZiAocHJvY2Vzcy5zZW5kKSB7XG4gICAgICBwcm9jZXNzLnNlbmQoe1xuICAgICAgICB0b3BpYzogTVNHX1RPUElDLFxuICAgICAgICBtc2c6IFIubWVyZ2VMZWZ0KHsgZnJvbUNsdXN0ZXI6IGlkLCBza2lwVmFsaWRhdGlvbjogdHJ1ZSB9LCBtc2cpXG4gICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIG1zZztcbiAgfSk7XG5cbiAgcmV0dXJuIGRiO1xufTtcbiIsIm1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV9fMTBfXzsiLCJpbXBvcnQgeyBjdXJyeSB9IGZyb20gXCJyYW1kYVwiO1xuaW1wb3J0IFdTIGZyb20gXCJ3c1wiO1xuaW1wb3J0IFJlY29ubmVjdGluZ1dlYlNvY2tldCBmcm9tIFwicmVjb25uZWN0aW5nLXdlYnNvY2tldFwiO1xuXG5jb25zdCBQSU5HID0gNjAwMDA7XG5cbmNvbnN0IHdzQ29ubmVjdGlvbiA9IGN1cnJ5KChkYiwgd3MpID0+IHtcbiAgbGV0IGhhc0xvZ2dlZEVyciA9IGZhbHNlO1xuICBsZXQgY29ubmVjdGVkID0gdHJ1ZTtcblxuICBjb25zdCBjb25uZWN0aW9uID0gZGIuY29ubmVjdGVkKG1zZyA9PiB7XG4gICAgaWYgKCFtc2cgfHwgIShtc2cuanNvbiB8fCBtc2cucmF3KSB8fCAhY29ubmVjdGVkKSByZXR1cm47XG4gICAgY29uc3QgcmF3ID0gbXNnLnJhdyB8fCBkYi5zdHJpbmdpZnkobXNnLmpzb24pO1xuXG4gICAgd3Muc2VuZChyYXcsIGVyciA9PiB7XG4gICAgICBpZiAoIWVyciB8fCBoYXNMb2dnZWRFcnIpIHJldHVybjtcbiAgICAgIGNvbnNvbGUud2FybihcIndzIHNlbmQgZXJyXCIsIGVycik7XG4gICAgICBoYXNMb2dnZWRFcnIgPSB0cnVlO1xuICAgIH0pO1xuICB9KTtcblxuICBjb25zdCBwaW5nSW50ZXJ2YWwgPSBzZXRJbnRlcnZhbChcbiAgICAoKSA9PiBjb25uZWN0aW9uLnNlbmQoeyBqc29uOiB7IHBpbmc6IHRydWUgfSwgc2tpcFZhbGlkYXRpb246IHRydWUgfSksXG4gICAgUElOR1xuICApO1xuXG4gIGNvbnN0IHJlY2VpdmUgPSBtc2cgPT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCByYXcgPSBtc2cuZGF0YSB8fCBtc2c7XG4gICAgICBjb25zdCBqc29uID0gSlNPTi5wYXJzZShyYXcpO1xuXG4gICAgICBBcnJheS5pc0FycmF5KGpzb24pXG4gICAgICAgID8ganNvbi5mb3JFYWNoKHJlY2VpdmUpXG4gICAgICAgIDogY29ubmVjdGlvbi5yZWNlaXZlKHsganNvbiwgcmF3IH0pO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJSRUNFSVZFUiBpbnZhbGlkIHdzIG1zZ1wiLCBlLCBtc2cuZGF0YSk7XG4gICAgfVxuICB9O1xuXG4gIHdzLmFkZEV2ZW50TGlzdGVuZXIoXCJjbG9zZVwiLCAoKSA9PiB7XG4gICAgaWYgKHdzLnJlY29ubmVjdCkgcmV0dXJuO1xuICAgIGNvbm5lY3RlZCA9IGZhbHNlO1xuICAgIGNsZWFySW50ZXJ2YWwocGluZ0ludGVydmFsKTtcbiAgICBkYi5kaXNjb25uZWN0ZWQoY29ubmVjdGlvbik7XG4gIH0pO1xuXG4gIHdzLmFkZEV2ZW50TGlzdGVuZXIoXCJtZXNzYWdlXCIsIHJlY2VpdmUpO1xuICByZXR1cm4gY29ubmVjdGlvbjtcbn0pO1xuXG5leHBvcnQgY29uc3Qgc2VydmVyID0gY3VycnkoKHsgd2ViLCBwb3J0IH0sIGRiKSA9PiB7XG4gIG5ldyBXUy5TZXJ2ZXIoeyBwb3J0OiAhd2ViID8gcG9ydCA6IHVuZGVmaW5lZCwgc2VydmVyOiB3ZWIgfSkub24oXG4gICAgXCJjb25uZWN0aW9uXCIsXG4gICAgd3NDb25uZWN0aW9uKGRiKVxuICApO1xuICByZXR1cm4gZGI7XG59KTtcblxuZXhwb3J0IGNvbnN0IGNsaWVudCA9IGN1cnJ5KCh1cmwsIGRiKSA9PiB7XG4gIGNvbnN0IHdzID0gbmV3IFJlY29ubmVjdGluZ1dlYlNvY2tldCh1cmwsIFtdLCB7IFdlYlNvY2tldDogV1MgfSk7XG5cbiAgd3MuYWRkRXZlbnRMaXN0ZW5lcihcIm9wZW5cIiwgKCkgPT4gd3NDb25uZWN0aW9uKGRiLCB3cykpO1xuICByZXR1cm4gZGI7XG59KTtcbiIsIm1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV9fMTJfXzsiLCIvKiEgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcclxuQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXHJcbkxpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7IHlvdSBtYXkgbm90IHVzZVxyXG50aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4gWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZVxyXG5MaWNlbnNlIGF0IGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG5cclxuVEhJUyBDT0RFIElTIFBST1ZJREVEIE9OIEFOICpBUyBJUyogQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWVxyXG5LSU5ELCBFSVRIRVIgRVhQUkVTUyBPUiBJTVBMSUVELCBJTkNMVURJTkcgV0lUSE9VVCBMSU1JVEFUSU9OIEFOWSBJTVBMSUVEXHJcbldBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBUSVRMRSwgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UsXHJcbk1FUkNIQU5UQUJMSVRZIE9SIE5PTi1JTkZSSU5HRU1FTlQuXHJcblxyXG5TZWUgdGhlIEFwYWNoZSBWZXJzaW9uIDIuMCBMaWNlbnNlIGZvciBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnNcclxuYW5kIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiAqL1xyXG4vKiBnbG9iYWwgUmVmbGVjdCwgUHJvbWlzZSAqL1xyXG5cclxudmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbihkLCBiKSB7XHJcbiAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XHJcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxyXG4gICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xyXG4gICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XHJcbn07XHJcblxyXG5mdW5jdGlvbiBfX2V4dGVuZHMoZCwgYikge1xyXG4gICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcclxuICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxyXG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xyXG59XG5cbnZhciBFdmVudCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIEV2ZW50KHR5cGUsIHRhcmdldCkge1xyXG4gICAgICAgIHRoaXMudGFyZ2V0ID0gdGFyZ2V0O1xyXG4gICAgICAgIHRoaXMudHlwZSA9IHR5cGU7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gRXZlbnQ7XHJcbn0oKSk7XHJcbnZhciBFcnJvckV2ZW50ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgX19leHRlbmRzKEVycm9yRXZlbnQsIF9zdXBlcik7XHJcbiAgICBmdW5jdGlvbiBFcnJvckV2ZW50KGVycm9yLCB0YXJnZXQpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCAnZXJyb3InLCB0YXJnZXQpIHx8IHRoaXM7XHJcbiAgICAgICAgX3RoaXMubWVzc2FnZSA9IGVycm9yLm1lc3NhZ2U7XHJcbiAgICAgICAgX3RoaXMuZXJyb3IgPSBlcnJvcjtcclxuICAgICAgICByZXR1cm4gX3RoaXM7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gRXJyb3JFdmVudDtcclxufShFdmVudCkpO1xyXG52YXIgQ2xvc2VFdmVudCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcclxuICAgIF9fZXh0ZW5kcyhDbG9zZUV2ZW50LCBfc3VwZXIpO1xyXG4gICAgZnVuY3Rpb24gQ2xvc2VFdmVudChjb2RlLCByZWFzb24sIHRhcmdldCkge1xyXG4gICAgICAgIGlmIChjb2RlID09PSB2b2lkIDApIHsgY29kZSA9IDEwMDA7IH1cclxuICAgICAgICBpZiAocmVhc29uID09PSB2b2lkIDApIHsgcmVhc29uID0gJyc7IH1cclxuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCAnY2xvc2UnLCB0YXJnZXQpIHx8IHRoaXM7XHJcbiAgICAgICAgX3RoaXMud2FzQ2xlYW4gPSB0cnVlO1xyXG4gICAgICAgIF90aGlzLmNvZGUgPSBjb2RlO1xyXG4gICAgICAgIF90aGlzLnJlYXNvbiA9IHJlYXNvbjtcclxuICAgICAgICByZXR1cm4gX3RoaXM7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gQ2xvc2VFdmVudDtcclxufShFdmVudCkpO1xuXG4vKiFcclxuICogUmVjb25uZWN0aW5nIFdlYlNvY2tldFxyXG4gKiBieSBQZWRybyBMYWRhcmlhIDxwZWRyby5sYWRhcmlhQGdtYWlsLmNvbT5cclxuICogaHR0cHM6Ly9naXRodWIuY29tL3BsYWRhcmlhL3JlY29ubmVjdGluZy13ZWJzb2NrZXRcclxuICogTGljZW5zZSBNSVRcclxuICovXHJcbnZhciBnZXRHbG9iYWxXZWJTb2NrZXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICBpZiAodHlwZW9mIFdlYlNvY2tldCAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgICAgcmV0dXJuIFdlYlNvY2tldDtcclxuICAgIH1cclxufTtcclxuLyoqXHJcbiAqIFJldHVybnMgdHJ1ZSBpZiBnaXZlbiBhcmd1bWVudCBsb29rcyBsaWtlIGEgV2ViU29ja2V0IGNsYXNzXHJcbiAqL1xyXG52YXIgaXNXZWJTb2NrZXQgPSBmdW5jdGlvbiAodykgeyByZXR1cm4gdHlwZW9mIHcgPT09ICdmdW5jdGlvbicgJiYgdy5DTE9TSU5HID09PSAyOyB9O1xyXG52YXIgREVGQVVMVCA9IHtcclxuICAgIG1heFJlY29ubmVjdGlvbkRlbGF5OiAxMDAwMCxcclxuICAgIG1pblJlY29ubmVjdGlvbkRlbGF5OiAxMDAwICsgTWF0aC5yYW5kb20oKSAqIDQwMDAsXHJcbiAgICBtaW5VcHRpbWU6IDUwMDAsXHJcbiAgICByZWNvbm5lY3Rpb25EZWxheUdyb3dGYWN0b3I6IDEuMyxcclxuICAgIGNvbm5lY3Rpb25UaW1lb3V0OiA0MDAwLFxyXG4gICAgbWF4UmV0cmllczogSW5maW5pdHksXHJcbiAgICBkZWJ1ZzogZmFsc2UsXHJcbn07XHJcbnZhciBSZWNvbm5lY3RpbmdXZWJTb2NrZXQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBSZWNvbm5lY3RpbmdXZWJTb2NrZXQodXJsLCBwcm90b2NvbHMsIG9wdGlvbnMpIHtcclxuICAgICAgICBpZiAob3B0aW9ucyA9PT0gdm9pZCAwKSB7IG9wdGlvbnMgPSB7fTsgfVxyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdGhpcy5fbGlzdGVuZXJzID0ge1xyXG4gICAgICAgICAgICBlcnJvcjogW10sXHJcbiAgICAgICAgICAgIG1lc3NhZ2U6IFtdLFxyXG4gICAgICAgICAgICBvcGVuOiBbXSxcclxuICAgICAgICAgICAgY2xvc2U6IFtdLFxyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy5fcmV0cnlDb3VudCA9IC0xO1xyXG4gICAgICAgIHRoaXMuX3Nob3VsZFJlY29ubmVjdCA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5fY29ubmVjdExvY2sgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLl9iaW5hcnlUeXBlID0gJ2Jsb2InO1xyXG4gICAgICAgIHRoaXMuX2Nsb3NlQ2FsbGVkID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5fbWVzc2FnZVF1ZXVlID0gW107XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQW4gZXZlbnQgbGlzdGVuZXIgdG8gYmUgY2FsbGVkIHdoZW4gdGhlIFdlYlNvY2tldCBjb25uZWN0aW9uJ3MgcmVhZHlTdGF0ZSBjaGFuZ2VzIHRvIENMT1NFRFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMub25jbG9zZSA9IHVuZGVmaW5lZDtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBBbiBldmVudCBsaXN0ZW5lciB0byBiZSBjYWxsZWQgd2hlbiBhbiBlcnJvciBvY2N1cnNcclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLm9uZXJyb3IgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQW4gZXZlbnQgbGlzdGVuZXIgdG8gYmUgY2FsbGVkIHdoZW4gYSBtZXNzYWdlIGlzIHJlY2VpdmVkIGZyb20gdGhlIHNlcnZlclxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMub25tZXNzYWdlID0gdW5kZWZpbmVkO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEFuIGV2ZW50IGxpc3RlbmVyIHRvIGJlIGNhbGxlZCB3aGVuIHRoZSBXZWJTb2NrZXQgY29ubmVjdGlvbidzIHJlYWR5U3RhdGUgY2hhbmdlcyB0byBPUEVOO1xyXG4gICAgICAgICAqIHRoaXMgaW5kaWNhdGVzIHRoYXQgdGhlIGNvbm5lY3Rpb24gaXMgcmVhZHkgdG8gc2VuZCBhbmQgcmVjZWl2ZSBkYXRhXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5vbm9wZW4gPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgdGhpcy5faGFuZGxlT3BlbiA9IGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgICAgICBfdGhpcy5fZGVidWcoJ29wZW4gZXZlbnQnKTtcclxuICAgICAgICAgICAgdmFyIF9hID0gX3RoaXMuX29wdGlvbnMubWluVXB0aW1lLCBtaW5VcHRpbWUgPSBfYSA9PT0gdm9pZCAwID8gREVGQVVMVC5taW5VcHRpbWUgOiBfYTtcclxuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KF90aGlzLl9jb25uZWN0VGltZW91dCk7XHJcbiAgICAgICAgICAgIF90aGlzLl91cHRpbWVUaW1lb3V0ID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7IHJldHVybiBfdGhpcy5fYWNjZXB0T3BlbigpOyB9LCBtaW5VcHRpbWUpO1xyXG4gICAgICAgICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgICAgICAgIF90aGlzLl93cy5iaW5hcnlUeXBlID0gX3RoaXMuX2JpbmFyeVR5cGU7XHJcbiAgICAgICAgICAgIC8vIHNlbmQgZW5xdWV1ZWQgbWVzc2FnZXMgKG1lc3NhZ2VzIHNlbnQgYmVmb3JlIHdlYnNvY2tldCBvcGVuIGV2ZW50KVxyXG4gICAgICAgICAgICBfdGhpcy5fbWVzc2FnZVF1ZXVlLmZvckVhY2goZnVuY3Rpb24gKG1lc3NhZ2UpIHsgcmV0dXJuIF90aGlzLl93cy5zZW5kKG1lc3NhZ2UpOyB9KTtcclxuICAgICAgICAgICAgX3RoaXMuX21lc3NhZ2VRdWV1ZSA9IFtdO1xyXG4gICAgICAgICAgICBpZiAoX3RoaXMub25vcGVuKSB7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5vbm9wZW4oZXZlbnQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIF90aGlzLl9saXN0ZW5lcnMub3Blbi5mb3JFYWNoKGZ1bmN0aW9uIChsaXN0ZW5lcikgeyByZXR1cm4gX3RoaXMuX2NhbGxFdmVudExpc3RlbmVyKGV2ZW50LCBsaXN0ZW5lcik7IH0pO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy5faGFuZGxlTWVzc2FnZSA9IGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgICAgICBfdGhpcy5fZGVidWcoJ21lc3NhZ2UgZXZlbnQnKTtcclxuICAgICAgICAgICAgaWYgKF90aGlzLm9ubWVzc2FnZSkge1xyXG4gICAgICAgICAgICAgICAgX3RoaXMub25tZXNzYWdlKGV2ZW50KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBfdGhpcy5fbGlzdGVuZXJzLm1lc3NhZ2UuZm9yRWFjaChmdW5jdGlvbiAobGlzdGVuZXIpIHsgcmV0dXJuIF90aGlzLl9jYWxsRXZlbnRMaXN0ZW5lcihldmVudCwgbGlzdGVuZXIpOyB9KTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMuX2hhbmRsZUVycm9yID0gZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgICAgIF90aGlzLl9kZWJ1ZygnZXJyb3IgZXZlbnQnLCBldmVudC5tZXNzYWdlKTtcclxuICAgICAgICAgICAgX3RoaXMuX2Rpc2Nvbm5lY3QodW5kZWZpbmVkLCBldmVudC5tZXNzYWdlID09PSAnVElNRU9VVCcgPyAndGltZW91dCcgOiB1bmRlZmluZWQpO1xyXG4gICAgICAgICAgICBpZiAoX3RoaXMub25lcnJvcikge1xyXG4gICAgICAgICAgICAgICAgX3RoaXMub25lcnJvcihldmVudCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgX3RoaXMuX2RlYnVnKCdleGVjIGVycm9yIGxpc3RlbmVycycpO1xyXG4gICAgICAgICAgICBfdGhpcy5fbGlzdGVuZXJzLmVycm9yLmZvckVhY2goZnVuY3Rpb24gKGxpc3RlbmVyKSB7IHJldHVybiBfdGhpcy5fY2FsbEV2ZW50TGlzdGVuZXIoZXZlbnQsIGxpc3RlbmVyKTsgfSk7XHJcbiAgICAgICAgICAgIF90aGlzLl9jb25uZWN0KCk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLl9oYW5kbGVDbG9zZSA9IGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgICAgICBfdGhpcy5fZGVidWcoJ2Nsb3NlIGV2ZW50Jyk7XHJcbiAgICAgICAgICAgIF90aGlzLl9jbGVhclRpbWVvdXRzKCk7XHJcbiAgICAgICAgICAgIGlmIChfdGhpcy5fc2hvdWxkUmVjb25uZWN0KSB7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5fY29ubmVjdCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChfdGhpcy5vbmNsb3NlKSB7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5vbmNsb3NlKGV2ZW50KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBfdGhpcy5fbGlzdGVuZXJzLmNsb3NlLmZvckVhY2goZnVuY3Rpb24gKGxpc3RlbmVyKSB7IHJldHVybiBfdGhpcy5fY2FsbEV2ZW50TGlzdGVuZXIoZXZlbnQsIGxpc3RlbmVyKTsgfSk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLl91cmwgPSB1cmw7XHJcbiAgICAgICAgdGhpcy5fcHJvdG9jb2xzID0gcHJvdG9jb2xzO1xyXG4gICAgICAgIHRoaXMuX29wdGlvbnMgPSBvcHRpb25zO1xyXG4gICAgICAgIHRoaXMuX2Nvbm5lY3QoKTtcclxuICAgIH1cclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShSZWNvbm5lY3RpbmdXZWJTb2NrZXQsIFwiQ09OTkVDVElOR1wiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAwO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFJlY29ubmVjdGluZ1dlYlNvY2tldCwgXCJPUEVOXCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIDE7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoUmVjb25uZWN0aW5nV2ViU29ja2V0LCBcIkNMT1NJTkdcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gMjtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShSZWNvbm5lY3RpbmdXZWJTb2NrZXQsIFwiQ0xPU0VEXCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIDM7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoUmVjb25uZWN0aW5nV2ViU29ja2V0LnByb3RvdHlwZSwgXCJDT05ORUNUSU5HXCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIFJlY29ubmVjdGluZ1dlYlNvY2tldC5DT05ORUNUSU5HO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFJlY29ubmVjdGluZ1dlYlNvY2tldC5wcm90b3R5cGUsIFwiT1BFTlwiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBSZWNvbm5lY3RpbmdXZWJTb2NrZXQuT1BFTjtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShSZWNvbm5lY3RpbmdXZWJTb2NrZXQucHJvdG90eXBlLCBcIkNMT1NJTkdcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gUmVjb25uZWN0aW5nV2ViU29ja2V0LkNMT1NJTkc7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoUmVjb25uZWN0aW5nV2ViU29ja2V0LnByb3RvdHlwZSwgXCJDTE9TRURcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gUmVjb25uZWN0aW5nV2ViU29ja2V0LkNMT1NFRDtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShSZWNvbm5lY3RpbmdXZWJTb2NrZXQucHJvdG90eXBlLCBcImJpbmFyeVR5cGVcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fd3MgPyB0aGlzLl93cy5iaW5hcnlUeXBlIDogdGhpcy5fYmluYXJ5VHlwZTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2JpbmFyeVR5cGUgPSB2YWx1ZTtcclxuICAgICAgICAgICAgaWYgKHRoaXMuX3dzKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgICAgICAgICAgICB0aGlzLl93cy5iaW5hcnlUeXBlID0gdmFsdWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShSZWNvbm5lY3RpbmdXZWJTb2NrZXQucHJvdG90eXBlLCBcInJldHJ5Q291bnRcIiwge1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFJldHVybnMgdGhlIG51bWJlciBvciBjb25uZWN0aW9uIHJldHJpZXNcclxuICAgICAgICAgKi9cclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIE1hdGgubWF4KHRoaXMuX3JldHJ5Q291bnQsIDApO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFJlY29ubmVjdGluZ1dlYlNvY2tldC5wcm90b3R5cGUsIFwiYnVmZmVyZWRBbW91bnRcIiwge1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFRoZSBudW1iZXIgb2YgYnl0ZXMgb2YgZGF0YSB0aGF0IGhhdmUgYmVlbiBxdWV1ZWQgdXNpbmcgY2FsbHMgdG8gc2VuZCgpIGJ1dCBub3QgeWV0XHJcbiAgICAgICAgICogdHJhbnNtaXR0ZWQgdG8gdGhlIG5ldHdvcmsuIFRoaXMgdmFsdWUgcmVzZXRzIHRvIHplcm8gb25jZSBhbGwgcXVldWVkIGRhdGEgaGFzIGJlZW4gc2VudC5cclxuICAgICAgICAgKiBUaGlzIHZhbHVlIGRvZXMgbm90IHJlc2V0IHRvIHplcm8gd2hlbiB0aGUgY29ubmVjdGlvbiBpcyBjbG9zZWQ7IGlmIHlvdSBrZWVwIGNhbGxpbmcgc2VuZCgpLFxyXG4gICAgICAgICAqIHRoaXMgd2lsbCBjb250aW51ZSB0byBjbGltYi4gUmVhZCBvbmx5XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBieXRlcyA9IHRoaXMuX21lc3NhZ2VRdWV1ZS5yZWR1Y2UoZnVuY3Rpb24gKGFjYywgbWVzc2FnZSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBtZXNzYWdlID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgICAgICAgICAgICAgIGFjYyArPSBtZXNzYWdlLmxlbmd0aDsgLy8gbm90IGJ5dGUgc2l6ZVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAobWVzc2FnZSBpbnN0YW5jZW9mIEJsb2IpIHtcclxuICAgICAgICAgICAgICAgICAgICBhY2MgKz0gbWVzc2FnZS5zaXplO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYWNjICs9IG1lc3NhZ2UuYnl0ZUxlbmd0aDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiBhY2M7XHJcbiAgICAgICAgICAgIH0sIDApO1xyXG4gICAgICAgICAgICByZXR1cm4gYnl0ZXMgKyAodGhpcy5fd3MgPyB0aGlzLl93cy5idWZmZXJlZEFtb3VudCA6IDApO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFJlY29ubmVjdGluZ1dlYlNvY2tldC5wcm90b3R5cGUsIFwiZXh0ZW5zaW9uc1wiLCB7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogVGhlIGV4dGVuc2lvbnMgc2VsZWN0ZWQgYnkgdGhlIHNlcnZlci4gVGhpcyBpcyBjdXJyZW50bHkgb25seSB0aGUgZW1wdHkgc3RyaW5nIG9yIGEgbGlzdCBvZlxyXG4gICAgICAgICAqIGV4dGVuc2lvbnMgYXMgbmVnb3RpYXRlZCBieSB0aGUgY29ubmVjdGlvblxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fd3MgPyB0aGlzLl93cy5leHRlbnNpb25zIDogJyc7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoUmVjb25uZWN0aW5nV2ViU29ja2V0LnByb3RvdHlwZSwgXCJwcm90b2NvbFwiLCB7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQSBzdHJpbmcgaW5kaWNhdGluZyB0aGUgbmFtZSBvZiB0aGUgc3ViLXByb3RvY29sIHRoZSBzZXJ2ZXIgc2VsZWN0ZWQ7XHJcbiAgICAgICAgICogdGhpcyB3aWxsIGJlIG9uZSBvZiB0aGUgc3RyaW5ncyBzcGVjaWZpZWQgaW4gdGhlIHByb3RvY29scyBwYXJhbWV0ZXIgd2hlbiBjcmVhdGluZyB0aGVcclxuICAgICAgICAgKiBXZWJTb2NrZXQgb2JqZWN0XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl93cyA/IHRoaXMuX3dzLnByb3RvY29sIDogJyc7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoUmVjb25uZWN0aW5nV2ViU29ja2V0LnByb3RvdHlwZSwgXCJyZWFkeVN0YXRlXCIsIHtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBUaGUgY3VycmVudCBzdGF0ZSBvZiB0aGUgY29ubmVjdGlvbjsgdGhpcyBpcyBvbmUgb2YgdGhlIFJlYWR5IHN0YXRlIGNvbnN0YW50c1xyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fd3MgPyB0aGlzLl93cy5yZWFkeVN0YXRlIDogUmVjb25uZWN0aW5nV2ViU29ja2V0LkNPTk5FQ1RJTkc7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoUmVjb25uZWN0aW5nV2ViU29ja2V0LnByb3RvdHlwZSwgXCJ1cmxcIiwge1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFRoZSBVUkwgYXMgcmVzb2x2ZWQgYnkgdGhlIGNvbnN0cnVjdG9yXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl93cyA/IHRoaXMuX3dzLnVybCA6ICcnO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgLyoqXHJcbiAgICAgKiBDbG9zZXMgdGhlIFdlYlNvY2tldCBjb25uZWN0aW9uIG9yIGNvbm5lY3Rpb24gYXR0ZW1wdCwgaWYgYW55LiBJZiB0aGUgY29ubmVjdGlvbiBpcyBhbHJlYWR5XHJcbiAgICAgKiBDTE9TRUQsIHRoaXMgbWV0aG9kIGRvZXMgbm90aGluZ1xyXG4gICAgICovXHJcbiAgICBSZWNvbm5lY3RpbmdXZWJTb2NrZXQucHJvdG90eXBlLmNsb3NlID0gZnVuY3Rpb24gKGNvZGUsIHJlYXNvbikge1xyXG4gICAgICAgIGlmIChjb2RlID09PSB2b2lkIDApIHsgY29kZSA9IDEwMDA7IH1cclxuICAgICAgICB0aGlzLl9jbG9zZUNhbGxlZCA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5fc2hvdWxkUmVjb25uZWN0ID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5fY2xlYXJUaW1lb3V0cygpO1xyXG4gICAgICAgIGlmICghdGhpcy5fd3MpIHtcclxuICAgICAgICAgICAgdGhpcy5fZGVidWcoJ2Nsb3NlIGVucXVldWVkOiBubyB3cyBpbnN0YW5jZScpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLl93cy5yZWFkeVN0YXRlID09PSB0aGlzLkNMT1NFRCkge1xyXG4gICAgICAgICAgICB0aGlzLl9kZWJ1ZygnY2xvc2U6IGFscmVhZHkgY2xvc2VkJyk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5fd3MuY2xvc2UoY29kZSwgcmVhc29uKTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIENsb3NlcyB0aGUgV2ViU29ja2V0IGNvbm5lY3Rpb24gb3IgY29ubmVjdGlvbiBhdHRlbXB0IGFuZCBjb25uZWN0cyBhZ2Fpbi5cclxuICAgICAqIFJlc2V0cyByZXRyeSBjb3VudGVyO1xyXG4gICAgICovXHJcbiAgICBSZWNvbm5lY3RpbmdXZWJTb2NrZXQucHJvdG90eXBlLnJlY29ubmVjdCA9IGZ1bmN0aW9uIChjb2RlLCByZWFzb24pIHtcclxuICAgICAgICB0aGlzLl9zaG91bGRSZWNvbm5lY3QgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuX2Nsb3NlQ2FsbGVkID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5fcmV0cnlDb3VudCA9IC0xO1xyXG4gICAgICAgIGlmICghdGhpcy5fd3MgfHwgdGhpcy5fd3MucmVhZHlTdGF0ZSA9PT0gdGhpcy5DTE9TRUQpIHtcclxuICAgICAgICAgICAgdGhpcy5fY29ubmVjdCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5fZGlzY29ubmVjdChjb2RlLCByZWFzb24pO1xyXG4gICAgICAgICAgICB0aGlzLl9jb25uZWN0KCk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogRW5xdWV1ZSBzcGVjaWZpZWQgZGF0YSB0byBiZSB0cmFuc21pdHRlZCB0byB0aGUgc2VydmVyIG92ZXIgdGhlIFdlYlNvY2tldCBjb25uZWN0aW9uXHJcbiAgICAgKi9cclxuICAgIFJlY29ubmVjdGluZ1dlYlNvY2tldC5wcm90b3R5cGUuc2VuZCA9IGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuX3dzICYmIHRoaXMuX3dzLnJlYWR5U3RhdGUgPT09IHRoaXMuT1BFTikge1xyXG4gICAgICAgICAgICB0aGlzLl9kZWJ1Zygnc2VuZCcsIGRhdGEpO1xyXG4gICAgICAgICAgICB0aGlzLl93cy5zZW5kKGRhdGEpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5fZGVidWcoJ2VucXVldWUnLCBkYXRhKTtcclxuICAgICAgICAgICAgdGhpcy5fbWVzc2FnZVF1ZXVlLnB1c2goZGF0YSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogUmVnaXN0ZXIgYW4gZXZlbnQgaGFuZGxlciBvZiBhIHNwZWNpZmljIGV2ZW50IHR5cGVcclxuICAgICAqL1xyXG4gICAgUmVjb25uZWN0aW5nV2ViU29ja2V0LnByb3RvdHlwZS5hZGRFdmVudExpc3RlbmVyID0gZnVuY3Rpb24gKHR5cGUsIGxpc3RlbmVyKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuX2xpc3RlbmVyc1t0eXBlXSkge1xyXG4gICAgICAgICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgICAgICAgIHRoaXMuX2xpc3RlbmVyc1t0eXBlXS5wdXNoKGxpc3RlbmVyKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBSZW1vdmVzIGFuIGV2ZW50IGxpc3RlbmVyXHJcbiAgICAgKi9cclxuICAgIFJlY29ubmVjdGluZ1dlYlNvY2tldC5wcm90b3R5cGUucmVtb3ZlRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uICh0eXBlLCBsaXN0ZW5lcikge1xyXG4gICAgICAgIGlmICh0aGlzLl9saXN0ZW5lcnNbdHlwZV0pIHtcclxuICAgICAgICAgICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgICAgICAgICB0aGlzLl9saXN0ZW5lcnNbdHlwZV0gPSB0aGlzLl9saXN0ZW5lcnNbdHlwZV0uZmlsdGVyKGZ1bmN0aW9uIChsKSB7IHJldHVybiBsICE9PSBsaXN0ZW5lcjsgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIFJlY29ubmVjdGluZ1dlYlNvY2tldC5wcm90b3R5cGUuX2RlYnVnID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBhcmdzID0gW107XHJcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgYXJnc1tfaV0gPSBhcmd1bWVudHNbX2ldO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5fb3B0aW9ucy5kZWJ1Zykge1xyXG4gICAgICAgICAgICAvLyBub3QgdXNpbmcgc3ByZWFkIGJlY2F1c2UgY29tcGlsZWQgdmVyc2lvbiB1c2VzIFN5bWJvbHNcclxuICAgICAgICAgICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lXHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nLmFwcGx5KGNvbnNvbGUsIFsnUldTPiddLmNvbmNhdChhcmdzKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIFJlY29ubmVjdGluZ1dlYlNvY2tldC5wcm90b3R5cGUuX2dldE5leHREZWxheSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgX2EgPSB0aGlzLl9vcHRpb25zLCBfYiA9IF9hLnJlY29ubmVjdGlvbkRlbGF5R3Jvd0ZhY3RvciwgcmVjb25uZWN0aW9uRGVsYXlHcm93RmFjdG9yID0gX2IgPT09IHZvaWQgMCA/IERFRkFVTFQucmVjb25uZWN0aW9uRGVsYXlHcm93RmFjdG9yIDogX2IsIF9jID0gX2EubWluUmVjb25uZWN0aW9uRGVsYXksIG1pblJlY29ubmVjdGlvbkRlbGF5ID0gX2MgPT09IHZvaWQgMCA/IERFRkFVTFQubWluUmVjb25uZWN0aW9uRGVsYXkgOiBfYywgX2QgPSBfYS5tYXhSZWNvbm5lY3Rpb25EZWxheSwgbWF4UmVjb25uZWN0aW9uRGVsYXkgPSBfZCA9PT0gdm9pZCAwID8gREVGQVVMVC5tYXhSZWNvbm5lY3Rpb25EZWxheSA6IF9kO1xyXG4gICAgICAgIHZhciBkZWxheSA9IG1pblJlY29ubmVjdGlvbkRlbGF5O1xyXG4gICAgICAgIGlmICh0aGlzLl9yZXRyeUNvdW50ID4gMCkge1xyXG4gICAgICAgICAgICBkZWxheSA9XHJcbiAgICAgICAgICAgICAgICBtaW5SZWNvbm5lY3Rpb25EZWxheSAqIE1hdGgucG93KHJlY29ubmVjdGlvbkRlbGF5R3Jvd0ZhY3RvciwgdGhpcy5fcmV0cnlDb3VudCAtIDEpO1xyXG4gICAgICAgICAgICBpZiAoZGVsYXkgPiBtYXhSZWNvbm5lY3Rpb25EZWxheSkge1xyXG4gICAgICAgICAgICAgICAgZGVsYXkgPSBtYXhSZWNvbm5lY3Rpb25EZWxheTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLl9kZWJ1ZygnbmV4dCBkZWxheScsIGRlbGF5KTtcclxuICAgICAgICByZXR1cm4gZGVsYXk7XHJcbiAgICB9O1xyXG4gICAgUmVjb25uZWN0aW5nV2ViU29ja2V0LnByb3RvdHlwZS5fd2FpdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkge1xyXG4gICAgICAgICAgICBzZXRUaW1lb3V0KHJlc29sdmUsIF90aGlzLl9nZXROZXh0RGVsYXkoKSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgUmVjb25uZWN0aW5nV2ViU29ja2V0LnByb3RvdHlwZS5fZ2V0TmV4dFVybCA9IGZ1bmN0aW9uICh1cmxQcm92aWRlcikge1xyXG4gICAgICAgIGlmICh0eXBlb2YgdXJsUHJvdmlkZXIgPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUodXJsUHJvdmlkZXIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodHlwZW9mIHVybFByb3ZpZGVyID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgIHZhciB1cmwgPSB1cmxQcm92aWRlcigpO1xyXG4gICAgICAgICAgICBpZiAodHlwZW9mIHVybCA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUodXJsKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAodXJsLnRoZW4pIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB1cmw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgdGhyb3cgRXJyb3IoJ0ludmFsaWQgVVJMJyk7XHJcbiAgICB9O1xyXG4gICAgUmVjb25uZWN0aW5nV2ViU29ja2V0LnByb3RvdHlwZS5fY29ubmVjdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIGlmICh0aGlzLl9jb25uZWN0TG9jayB8fCAhdGhpcy5fc2hvdWxkUmVjb25uZWN0KSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5fY29ubmVjdExvY2sgPSB0cnVlO1xyXG4gICAgICAgIHZhciBfYSA9IHRoaXMuX29wdGlvbnMsIF9iID0gX2EubWF4UmV0cmllcywgbWF4UmV0cmllcyA9IF9iID09PSB2b2lkIDAgPyBERUZBVUxULm1heFJldHJpZXMgOiBfYiwgX2MgPSBfYS5jb25uZWN0aW9uVGltZW91dCwgY29ubmVjdGlvblRpbWVvdXQgPSBfYyA9PT0gdm9pZCAwID8gREVGQVVMVC5jb25uZWN0aW9uVGltZW91dCA6IF9jLCBfZCA9IF9hLldlYlNvY2tldCwgV2ViU29ja2V0ID0gX2QgPT09IHZvaWQgMCA/IGdldEdsb2JhbFdlYlNvY2tldCgpIDogX2Q7XHJcbiAgICAgICAgaWYgKHRoaXMuX3JldHJ5Q291bnQgPj0gbWF4UmV0cmllcykge1xyXG4gICAgICAgICAgICB0aGlzLl9kZWJ1ZygnbWF4IHJldHJpZXMgcmVhY2hlZCcsIHRoaXMuX3JldHJ5Q291bnQsICc+PScsIG1heFJldHJpZXMpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuX3JldHJ5Q291bnQrKztcclxuICAgICAgICB0aGlzLl9kZWJ1ZygnY29ubmVjdCcsIHRoaXMuX3JldHJ5Q291bnQpO1xyXG4gICAgICAgIHRoaXMuX3JlbW92ZUxpc3RlbmVycygpO1xyXG4gICAgICAgIGlmICghaXNXZWJTb2NrZXQoV2ViU29ja2V0KSkge1xyXG4gICAgICAgICAgICB0aHJvdyBFcnJvcignTm8gdmFsaWQgV2ViU29ja2V0IGNsYXNzIHByb3ZpZGVkJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuX3dhaXQoKVxyXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbiAoKSB7IHJldHVybiBfdGhpcy5fZ2V0TmV4dFVybChfdGhpcy5fdXJsKTsgfSlcclxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHVybCkge1xyXG4gICAgICAgICAgICAvLyBjbG9zZSBjb3VsZCBiZSBjYWxsZWQgYmVmb3JlIGNyZWF0aW5nIHRoZSB3c1xyXG4gICAgICAgICAgICBpZiAoX3RoaXMuX2Nsb3NlQ2FsbGVkKSB7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5fY29ubmVjdExvY2sgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBfdGhpcy5fZGVidWcoJ2Nvbm5lY3QnLCB7IHVybDogdXJsLCBwcm90b2NvbHM6IF90aGlzLl9wcm90b2NvbHMgfSk7XHJcbiAgICAgICAgICAgIF90aGlzLl93cyA9IF90aGlzLl9wcm90b2NvbHNcclxuICAgICAgICAgICAgICAgID8gbmV3IFdlYlNvY2tldCh1cmwsIF90aGlzLl9wcm90b2NvbHMpXHJcbiAgICAgICAgICAgICAgICA6IG5ldyBXZWJTb2NrZXQodXJsKTtcclxuICAgICAgICAgICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgICAgICAgICBfdGhpcy5fd3MuYmluYXJ5VHlwZSA9IF90aGlzLl9iaW5hcnlUeXBlO1xyXG4gICAgICAgICAgICBfdGhpcy5fY29ubmVjdExvY2sgPSBmYWxzZTtcclxuICAgICAgICAgICAgX3RoaXMuX2FkZExpc3RlbmVycygpO1xyXG4gICAgICAgICAgICBfdGhpcy5fY29ubmVjdFRpbWVvdXQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsgcmV0dXJuIF90aGlzLl9oYW5kbGVUaW1lb3V0KCk7IH0sIGNvbm5lY3Rpb25UaW1lb3V0KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBSZWNvbm5lY3RpbmdXZWJTb2NrZXQucHJvdG90eXBlLl9oYW5kbGVUaW1lb3V0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuX2RlYnVnKCd0aW1lb3V0IGV2ZW50Jyk7XHJcbiAgICAgICAgdGhpcy5faGFuZGxlRXJyb3IobmV3IEVycm9yRXZlbnQoRXJyb3IoJ1RJTUVPVVQnKSwgdGhpcykpO1xyXG4gICAgfTtcclxuICAgIFJlY29ubmVjdGluZ1dlYlNvY2tldC5wcm90b3R5cGUuX2Rpc2Nvbm5lY3QgPSBmdW5jdGlvbiAoY29kZSwgcmVhc29uKSB7XHJcbiAgICAgICAgaWYgKGNvZGUgPT09IHZvaWQgMCkgeyBjb2RlID0gMTAwMDsgfVxyXG4gICAgICAgIHRoaXMuX2NsZWFyVGltZW91dHMoKTtcclxuICAgICAgICBpZiAoIXRoaXMuX3dzKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5fcmVtb3ZlTGlzdGVuZXJzKCk7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgdGhpcy5fd3MuY2xvc2UoY29kZSwgcmVhc29uKTtcclxuICAgICAgICAgICAgdGhpcy5faGFuZGxlQ2xvc2UobmV3IENsb3NlRXZlbnQoY29kZSwgcmVhc29uLCB0aGlzKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICAvLyBpZ25vcmVcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgUmVjb25uZWN0aW5nV2ViU29ja2V0LnByb3RvdHlwZS5fYWNjZXB0T3BlbiA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLl9kZWJ1ZygnYWNjZXB0IG9wZW4nKTtcclxuICAgICAgICB0aGlzLl9yZXRyeUNvdW50ID0gMDtcclxuICAgIH07XHJcbiAgICBSZWNvbm5lY3RpbmdXZWJTb2NrZXQucHJvdG90eXBlLl9jYWxsRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uIChldmVudCwgbGlzdGVuZXIpIHtcclxuICAgICAgICBpZiAoJ2hhbmRsZUV2ZW50JyBpbiBsaXN0ZW5lcikge1xyXG4gICAgICAgICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgICAgICAgIGxpc3RlbmVyLmhhbmRsZUV2ZW50KGV2ZW50KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcclxuICAgICAgICAgICAgbGlzdGVuZXIoZXZlbnQpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBSZWNvbm5lY3RpbmdXZWJTb2NrZXQucHJvdG90eXBlLl9yZW1vdmVMaXN0ZW5lcnMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLl93cykge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuX2RlYnVnKCdyZW1vdmVMaXN0ZW5lcnMnKTtcclxuICAgICAgICB0aGlzLl93cy5yZW1vdmVFdmVudExpc3RlbmVyKCdvcGVuJywgdGhpcy5faGFuZGxlT3Blbik7XHJcbiAgICAgICAgdGhpcy5fd3MucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xvc2UnLCB0aGlzLl9oYW5kbGVDbG9zZSk7XHJcbiAgICAgICAgdGhpcy5fd3MucmVtb3ZlRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIHRoaXMuX2hhbmRsZU1lc3NhZ2UpO1xyXG4gICAgICAgIC8vIEB0cy1pZ25vcmVcclxuICAgICAgICB0aGlzLl93cy5yZW1vdmVFdmVudExpc3RlbmVyKCdlcnJvcicsIHRoaXMuX2hhbmRsZUVycm9yKTtcclxuICAgIH07XHJcbiAgICBSZWNvbm5lY3RpbmdXZWJTb2NrZXQucHJvdG90eXBlLl9hZGRMaXN0ZW5lcnMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLl93cykge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuX2RlYnVnKCdhZGRMaXN0ZW5lcnMnKTtcclxuICAgICAgICB0aGlzLl93cy5hZGRFdmVudExpc3RlbmVyKCdvcGVuJywgdGhpcy5faGFuZGxlT3Blbik7XHJcbiAgICAgICAgdGhpcy5fd3MuYWRkRXZlbnRMaXN0ZW5lcignY2xvc2UnLCB0aGlzLl9oYW5kbGVDbG9zZSk7XHJcbiAgICAgICAgdGhpcy5fd3MuYWRkRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIHRoaXMuX2hhbmRsZU1lc3NhZ2UpO1xyXG4gICAgICAgIC8vIEB0cy1pZ25vcmVcclxuICAgICAgICB0aGlzLl93cy5hZGRFdmVudExpc3RlbmVyKCdlcnJvcicsIHRoaXMuX2hhbmRsZUVycm9yKTtcclxuICAgIH07XHJcbiAgICBSZWNvbm5lY3RpbmdXZWJTb2NrZXQucHJvdG90eXBlLl9jbGVhclRpbWVvdXRzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGNsZWFyVGltZW91dCh0aGlzLl9jb25uZWN0VGltZW91dCk7XHJcbiAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuX3VwdGltZVRpbWVvdXQpO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBSZWNvbm5lY3RpbmdXZWJTb2NrZXQ7XHJcbn0oKSk7XG5cbmV4cG9ydCBkZWZhdWx0IFJlY29ubmVjdGluZ1dlYlNvY2tldDtcbiJdLCJzb3VyY2VSb290IjoiIn0=